# File Content and Context for LLM
This file contains the content of all files in the directory along with their paths for context.

## File: ./thoughts.txt

```
UPDATE cart_item
SET sale_price = (
    SELECT sum(c.qty * p.price)
    FROM cart_item_component c
    JOIN products p ON c.product_id = p.id
    WHERE c.cart_item_id = cart_item.id
);
```

---

## File: ./go.sum

```
github.com/davecgh/go-spew v1.1.0 h1:ZDRjVQ15GmhC3fiQ8ni8+OwkZQO4DARzQgrnXU1Liz8=
github.com/davecgh/go-spew v1.1.0/go.mod h1:J7Y8YcW2NihsgmVo/mv3lAwl/skON4iLHjSsI+c5H38=
github.com/golang-jwt/jwt/v5 v5.2.1 h1:OuVbFODueb089Lh128TAcimifWaLhJwVflnrgM17wHk=
github.com/golang-jwt/jwt/v5 v5.2.1/go.mod h1:pqrtFR0X4osieyHYxtmOUWsAWrfe1Q5UVIyoH402zdk=
github.com/golang-jwt/jwt/v5 v5.2.2 h1:Rl4B7itRWVtYIHFrSNd7vhTiz9UpLdi6gZhZ3wEeDy8=
github.com/golang-jwt/jwt/v5 v5.2.2/go.mod h1:pqrtFR0X4osieyHYxtmOUWsAWrfe1Q5UVIyoH402zdk=
github.com/google/gofuzz v1.2.0 h1:xRy4A+RhZaiKjJ1bPfwQ8sedCA+YS2YcCHW6ec7JMi0=
github.com/google/gofuzz v1.2.0/go.mod h1:dBl0BpW6vV/+mYPU4Po3pmUjxk6FQPldtuIdl/M65Eg=
github.com/google/uuid v1.6.0 h1:NIvaJDMOsjHA8n1jAhLSgzrAzy1Hgr+hNrb57e+94F0=
github.com/google/uuid v1.6.0/go.mod h1:TIyPZe4MgqvfeYDBFedMoGGpEw/LqOeaOT+nhxU+yHo=
github.com/gorilla/securecookie v1.1.2 h1:YCIWL56dvtr73r6715mJs5ZvhtnY73hBvEF8kXD8ePA=
github.com/gorilla/securecookie v1.1.2/go.mod h1:NfCASbcHqRSY+3a8tlWJwsQap2VX5pwzwo4h3eOamfo=
github.com/gorilla/sessions v1.2.2 h1:lqzMYz6bOfvn2WriPUjNByzeXIlVzURcPmgMczkmTjY=
github.com/gorilla/sessions v1.2.2/go.mod h1:ePLdVu+jbEgHH+KWw8I1z2wqd0BAdAQh/8LRvBeoNcQ=
github.com/gorilla/sessions v1.4.0 h1:kpIYOp/oi6MG/p5PgxApU8srsSw9tuFbt46Lt7auzqQ=
github.com/gorilla/sessions v1.4.0/go.mod h1:FLWm50oby91+hl7p/wRxDth9bWSuk0qVL2emc7lT5ik=
github.com/joho/godotenv v1.5.1 h1:7eLL/+HRGLY0ldzfGMeQkb7vMd0as4CfYvUVzLqw0N0=
github.com/joho/godotenv v1.5.1/go.mod h1:f4LDr5Voq0i2e/R5DDNOoa2zzDfwtkZa6DnEwAbqwq4=
github.com/mattn/go-sqlite3 v1.14.24 h1:tpSp2G2KyMnnQu99ngJ47EIkWVmliIizyZBfPrBWDRM=
github.com/mattn/go-sqlite3 v1.14.24/go.mod h1:Uh1q+B4BYcTPb+yiD3kU8Ct7aC0hY9fxUwlHK0RXw+Y=
github.com/mattn/go-sqlite3 v1.14.27 h1:drZCnuvf37yPfs95E5jd9s3XhdVWLal+6BOK6qrv6IU=
github.com/mattn/go-sqlite3 v1.14.27/go.mod h1:Uh1q+B4BYcTPb+yiD3kU8Ct7aC0hY9fxUwlHK0RXw+Y=
github.com/patrickmn/go-cache v2.1.0+incompatible h1:HRMgzkcYKYpi3C8ajMPV8OFXaaRUnok+kx1WdO15EQc=
github.com/patrickmn/go-cache v2.1.0+incompatible/go.mod h1:3Qf8kWWT7OJRJbdiICTKqZju1ZixQ/KpMGzzAfe6+WQ=
github.com/pmezard/go-difflib v1.0.0 h1:4DBwDE0NGyQoBHbLQYPwSUPoCMWR5BEzIk/f1lZbAQM=
github.com/pmezard/go-difflib v1.0.0/go.mod h1:iKH77koFhYxTK1pcRnkKkqfTogsbg7gZNVY4sRDYZ/4=
github.com/seanomeara96/auth v0.0.0-20250311125829-3f40be05d59a h1:C4U5sKtFjR+3Pw27OYf9dKGzjQISmi+e3ZYIptmZuCQ=
github.com/seanomeara96/auth v0.0.0-20250311125829-3f40be05d59a/go.mod h1:LL5mjSGu0HobXf4E3Y2ZYorycBc01Dpc1JJgItqmaRA=
github.com/stretchr/objx v0.1.0/go.mod h1:HFkY916IF+rwdDfMAkV7OtwuqBVzrE8GR6GFx+wExME=
github.com/stretchr/testify v1.7.0 h1:nwc3DEeHmmLAfoZucVR881uASk0Mfjw8xYJ99tb5CcY=
github.com/stretchr/testify v1.7.0/go.mod h1:6Fq8oRcR53rry900zMqJjRRixrwX3KX962/h/Wwjteg=
github.com/stripe/stripe-go/v81 v81.4.0 h1:AuD9XzdAvl193qUCSaLocf8H+nRopOouXhxqJUzCLbw=
github.com/stripe/stripe-go/v81 v81.4.0/go.mod h1:C/F4jlmnGNacvYtBp/LUHCvVUJEZffFQCobkzwY1WOo=
golang.org/x/crypto v0.32.0 h1:euUpcYgM8WcP71gNpTqQCn6rC2t6ULUPiOzfWaXVVfc=
golang.org/x/crypto v0.32.0/go.mod h1:ZnnJkOaASj8g0AjIduWNlq2NRxL0PlBrbKVyZ6V/Ugc=
golang.org/x/crypto v0.37.0 h1:kJNSjF/Xp7kU0iB2Z+9viTPMW4EqqsrywMXLJOOsXSE=
golang.org/x/crypto v0.37.0/go.mod h1:vg+k43peMZ0pUMhYmVAWysMK35e6ioLh3wB8ZCAfbVc=
golang.org/x/net v0.0.0-20210520170846-37e1c6afe023/go.mod h1:9nx3DQGgdP8bBQD5qxJ1jj9UTztislL4KSBs9R2vV5Y=
golang.org/x/net v0.21.0 h1:AQyQV4dYCvJ7vGmJyKki9+PBdyvhkSd8EIx/qb0AYv4=
golang.org/x/net v0.21.0/go.mod h1:bIjVDfnllIU7BJ2DNgfnXvpSvtn8VRwhlsaeUTyUS44=
golang.org/x/sys v0.0.0-20201119102817-f84b799fce68/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=
golang.org/x/sys v0.0.0-20210423082822-04245dca01da/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=
golang.org/x/term v0.0.0-20201126162022-7de9c90e9dd1/go.mod h1:bj7SfCRtBDWHUb9snDiAeCFNEtKQo2Wmx5Cou7ajbmo=
golang.org/x/text v0.3.6/go.mod h1:5Zoc/QRtKVWzQhOtBMvqHzDpF6irO9z98xDceosuGiQ=
golang.org/x/text v0.21.0 h1:zyQAAkrwaneQ066sspRyJaG9VNi/YJ1NfzcGB3hZ/qo=
golang.org/x/text v0.21.0/go.mod h1:4IBbMaMmOPCJ8SecivzSH54+73PCFmPWxNTLm+vZkEQ=
golang.org/x/text v0.24.0 h1:dd5Bzh4yt5KYA8f9CJHCP4FB4D51c2c6JvN37xJJkJ0=
golang.org/x/text v0.24.0/go.mod h1:L8rBsPeo2pSS+xqN0d5u2ikmjtmoJbDBT1b7nHvFCdU=
golang.org/x/tools v0.0.0-20180917221912-90fa682c2a6e/go.mod h1:n7NCudcB/nEzxVGmLbDWY5pfWTLqBcC2KZ6jyYvM4mQ=
gopkg.in/check.v1 v0.0.0-20161208181325-20d25e280405/go.mod h1:Co6ibVJAznAaIkqp8huTwlJQCZ016jof/cbN4VW5Yz0=
gopkg.in/yaml.v3 v3.0.0-20200313102051-9f266ea9e77c h1:dUUwHk2QECo/6vqA44rthZ8ie2QXMNeKRTHCNY2nXvo=
gopkg.in/yaml.v3 v3.0.0-20200313102051-9f266ea9e77c/go.mod h1:K4uyk7z7BCEPqu6E+C64Yfv1cQ7kz7rIZviUmN+EgEM=
```

---

## File: ./repos/carts.go

```
package repos

import (
	"database/sql"
	"fmt"
	"time"

	"github.com/seanomeara96/gates/models"
)

type productRepo interface {
	GetProductByID(id int) (*models.Product, error)
}

type CartRepo struct {
	db          *sql.DB
	productRepo productRepo
}

func NewCartRepo(db *sql.DB, productRepo productRepo) *CartRepo {
	if db == nil {
		// Consider panic or returning an error if a nil db is critical
		panic("database connection is nil for CartRepo")
	}
	if productRepo == nil {
		panic("product repo is nil for cart repo")
	}
	return &CartRepo{db, productRepo}
}

func (r *CartRepo) SaveCart(cart models.Cart) (*sql.Result, error) {
	res, err := r.db.Exec(`INSERT INTO
		cart(
			id,
			created_at,
			last_updated_at)
		VALUES
			(?, ?, ?)`,
		cart.ID,
		cart.CreatedAt,
		cart.LastUpdatedAt,
	)
	if err != nil {
		return nil, fmt.Errorf("failed to save cart: %v", err)
	}
	return &res, nil
}

func (r *CartRepo) CartExists(id string) (bool, error) {
	var count int
	err := r.db.QueryRow(`SELECT count(id) AS count FROM cart WHERE id = ?`, id).Scan(&count)
	if err != nil {
		return false, fmt.Errorf("failed to check if cart exists: %v", err)
	}
	return count > 0, nil
}

func (r *CartRepo) GetCartByID(id string) (*models.Cart, error) {
	cart, err := r.selectCart(id)
	if err != nil {
		return nil, fmt.Errorf("failed to select cart with ID %s: %v", id, err)
	}
	if cart.Items, err = r.selectCartItems(cart.ID); err != nil {
		return nil, fmt.Errorf("failed to select items for cart %s: %v", cart.ID, err)
	}
	for i := range cart.Items {
		if cart.Items[i].Components, err = r.selectCartItemComponents(
			cart.ID,
			cart.Items[i].ID,
		); err != nil {
			return nil, fmt.Errorf("failed to select components for cart item %s: %v", cart.Items[i].ID, err)
		}
		cart.Items[i].SetName()
		cart.Items[i].SetPrice()
	}

	cart.SetTotalValue()

	return &cart, nil
}

func (r *CartRepo) selectCart(id string) (models.Cart, error) {
	row := r.db.QueryRow(`
	SELECT
		id,
		created_at,
		last_updated_at
	FROM
		cart
	WHERE
		id = ?`, id)
	var cart models.Cart
	if err := row.Scan(
		&cart.ID,
		&cart.CreatedAt,
		&cart.LastUpdatedAt,
	); err != nil {
		return models.Cart{}, fmt.Errorf("failed to scan cart data: %v", err)
	}
	return cart, nil
}

func (r *CartRepo) SelectCartItem(cartID, itemID string) (*models.CartItem, error) {
	var ci models.CartItem
	err := r.db.QueryRow(`
	SELECT
		id,
		cart_id,
		qty,
		created_at
	FROM
		cart_item
	WHERE
		cart_id = ?
	AND
		id = ?
	`,
		cartID,
		itemID,
	).Scan(
		&ci.ID,
		&ci.CartID,
		&ci.Qty,
		&ci.CreatedAt,
	)
	if err != nil {
		return nil, fmt.Errorf("failed to select cart item (cartID: %s, itemID: %s): %v", cartID, itemID, err)
	}
	return &ci, nil
}

func (r *CartRepo) selectCartItems(cartID string) ([]models.CartItem, error) {
	rows, err := r.db.Query(`
	SELECT
		id,
		cart_id,
		qty,
		created_at
	FROM
		cart_item
	WHERE
		cart_id = ?`, cartID)
	if err != nil {
		return nil, fmt.Errorf("failed to query cart items for cart %s: %v", cartID, err)
	}
	defer rows.Close()
	cartItems := []models.CartItem{}
	for rows.Next() {
		var cartItem models.CartItem
		if err := rows.Scan(
			&cartItem.ID,
			&cartItem.CartID,
			&cartItem.Qty,
			&cartItem.CreatedAt,
		); err != nil {
			return nil, fmt.Errorf("failed to scan cart item: %v", err)
		}
		cartItems = append(cartItems, cartItem)
	}
	return cartItems, nil
}

func (r *CartRepo) selectCartItemComponents(cartID, cartItemID string) ([]models.CartItemComponent, error) {
	rows, err := r.db.Query(`
	SELECT
		cart_item_id,
		cart_id,
		product_id,
		qty,
		created_at
	FROM
		cart_item_component
	WHERE
		cart_item_id = ?
	AND
		cart_id = ?`,
		cartItemID, cartID)
	if err != nil {
		return nil, fmt.Errorf("failed to query cart item components (cartID: %s, itemID: %s): %v", cartID, cartItemID, err)
	}
	defer rows.Close()

	components := []models.CartItemComponent{}
	for rows.Next() {
		var component models.CartItemComponent
		if err := rows.Scan(
			&component.CartItemID,
			&component.CartID,
			&component.Product.Id,
			&component.Product.Qty,
			&component.CreatedAt,
		); err != nil {
			return nil, fmt.Errorf("failed to scan cart item component: %v", err)
		}
		product, err := r.productRepo.GetProductByID(component.Product.Id)
		if err != nil {
			return nil, fmt.Errorf("failed to get product (ID: %d) for cart component: %v", component.Product.Id, err)
		}
		product.Qty = component.Product.Qty
		component.Product = *product
		components = append(components, component)
	}
	return components, nil
}

func (r *CartRepo) InsertCartItem(cartItem models.CartItem) error {
	q := `
	INSERT INTO
		cart_item (
			id,
			cart_id,
			qty,
			created_at
		)
	VALUES
		(?, ?, ?, ?)`
	_, err := r.db.Exec(
		q,
		cartItem.ID,
		cartItem.CartID,
		cartItem.Qty,
		cartItem.CreatedAt,
	)
	if err != nil {
		return fmt.Errorf("could not insert cart item in db (ID: %s, cartID: %s): %w", cartItem.ID, cartItem.CartID, err)
	}
	return nil
}

/*
Important to keep track of this for the purposes of abandoned cart messages
*/
func (r *CartRepo) SetLastUpdated(cartID string) error {
	if _, err := r.db.Exec("UPDATE cart SET last_updated_at = ? WHERE id = ?", time.Now(), cartID); err != nil {
		return fmt.Errorf("could not update last_updated_at on cart (ID: %s): %w", cartID, err)
	}
	return nil
}

func (r *CartRepo) DoesCartItemExist(cartID string, cartItemID string) (bool, error) {
	var count int
	err := r.db.QueryRow(`
	SELECT
		count(id) as count
	FROM
		cart_item
	WHERE
		id = ?
	AND
		cart_id = ?`,
		cartItemID, cartID).Scan(&count)
	if err != nil {
		return false, fmt.Errorf("could not check if cart item exists (cartID: %s, itemID: %s): %w", cartID, cartItemID, err)
	}
	return count > 0, nil
}

func (r *CartRepo) GetCartByUserID(userID int) (*models.Cart, error) {
	var cart models.Cart
	err := r.db.QueryRow(`
		SELECT
			id, created_at, last_updated_at
		FROM
			cart
		WHERE
			user_id = ?`,
		userID,
	).Scan(
		&cart.ID,
		&cart.CreatedAt,
		&cart.LastUpdatedAt,
	)
	if err != nil {
		return nil, fmt.Errorf("failed to get cart for user (ID: %d): %v", userID, err)
	}
	return &cart, nil
}

func (r *CartRepo) GetCartItemsByCartID(cartID string) ([]*models.CartItem, error) {
	return nil, fmt.Errorf("getting cart items not implemented for cartID: %s", cartID)
}

func (r *CartRepo) SaveCartItemComponents(components []models.CartItemComponent) error {
	for _, c := range components {
		q := `
		INSERT INTO
			cart_item_component (
				cart_item_id,
				cart_id,
				product_id,
				qty,
				created_at
			)
		VALUES
			(?, ?, ?, ?, ?)`
		if _, err := r.db.Exec(q,
			c.CartItemID,
			c.CartID,
			c.Product.Id,
			c.Product.Qty,
			c.CreatedAt,
		); err != nil {
			return fmt.Errorf("failed to save cart item component (cartItemID: %s, productID: %d): %v",
				c.CartItemID, c.Product.Id, err)
		}
	}
	return nil
}

func (r *CartRepo) IncrementCartItem(cartID, itemID string) error {
	if _, err := r.db.Exec(`
		UPDATE
			cart_item
		SET
			qty = qty + 1
		WHERE
			id = ?
		AND
			cart_id = ?`,
		itemID,
		cartID,
	); err != nil {
		return fmt.Errorf("failed to increment cart item (cartID: %s, itemID: %s): %v", cartID, itemID, err)
	}
	return nil
}

func (r *CartRepo) DecrementCartItem(cartID, itemID string) error {
	if _, err := r.db.Exec(`
	UPDATE cart_item
	SET qty = qty - 1
	WHERE id = ?
	AND cart_id = ?`,
		itemID,
		cartID,
	); err != nil {
		return fmt.Errorf("failed to decrement cart item (cartID: %s, itemID: %s): %v", cartID, itemID, err)
	}
	return nil
}

func (r *CartRepo) RemoveCartItem(cartID, itemID string) error {
	return fmt.Errorf("remove cart item not implemented (cartID: %s, itemID: %s)", cartID, itemID)
}

func (r *CartRepo) RemoveCartItemComponents(itemID string) error {
	return fmt.Errorf("remove Cart Item Components not yet implemented for itemID: %s", itemID)
}

/* repository funcs end */
```

---

## File: ./repos/products.go

```
package repos

import (
	"database/sql"
	"errors"
	"fmt"
	"strings"

	"github.com/seanomeara96/gates/models" // Assuming your models package path
)

// ProductRepo handles database operations for products.
// It should focus solely on data access (CRUD) and not contain business logic validation.
type ProductRepo struct {
	db *sql.DB
}

// NewProductRepo creates a new instance of ProductRepo.
func NewProductRepo(db *sql.DB) *ProductRepo {
	if db == nil {
		// Consider panic or returning an error if a nil db is critical
		panic("database connection is nil for ProductRepo")
	}
	return &ProductRepo{db}
}

// Define a custom type for the product type stored in the database.
type ProductType string

// Define constants representing the product type values.
const (
	Gate      ProductType = "gate"
	Extension ProductType = "extension"
	Bundle    ProductType = "bundle"
)

// scannable interface decouples scanning logic from specific sql types (*sql.Row, *sql.Rows).
type scannable interface {
	Scan(dest ...any) error
}

// scanProductFromRow scans a single product row into a models.Product struct.
func scanProductFromRow(row scannable) (*models.Product, error) {
	var product models.Product
	err := row.Scan(
		&product.Id,
		&product.Type,
		&product.Name,
		&product.Width,
		&product.Price,
		&product.Img,
		&product.Color,
		&product.Tolerance,
		&product.InventoryLevel,
	)
	if err != nil {
		// Specifically check for ErrNoRows and return it so callers can distinguish
		if errors.Is(err, sql.ErrNoRows) {
			return nil, sql.ErrNoRows
		}
		// Wrap other errors for context
		return nil, fmt.Errorf("could not scan product from row: %w", err)
	}
	return &product, nil
}

// InsertProduct inserts a new product record into the database.
// Assumes the input product object has been validated by the service layer.
func (r *ProductRepo) InsertProduct(product *models.Product) (sql.Result, error) {
	// Basic check for nil db pointer remains relevant
	if r.db == nil {
		return nil, errors.New("database connection is nil")
	}

	// The product object is assumed to be valid at this point.
	// The repository's job is just to execute the INSERT statement.
	res, err := r.db.Exec(
		`INSERT INTO products (
			type, name, width, price, img, color, tolerance, inventory_level
		 ) VALUES (?, ?, ?, ?, ?, ?, ?, ?)`,
		product.Type,
		product.Name,
		product.Width,
		product.Price,
		product.Img,
		product.Color,
		product.Tolerance,
		product.InventoryLevel,
	)
	if err != nil {
		// Handle potential DB constraint errors if needed, or just wrap
		// Example: Could check for SQLite UNIQUE constraint error code here
		return nil, fmt.Errorf("database error inserting product: %w", err)
	}
	return res, nil
}

// GetProductPrice retrieves only the price for a given product ID.
func (r *ProductRepo) GetProductPrice(id int) (float32, error) {
	if r.db == nil {
		return 0, errors.New("database connection is nil")
	}
	var price float32
	err := r.db.QueryRow("SELECT price FROM products WHERE id = ?", id).Scan(&price)
	if err != nil {
		if errors.Is(err, sql.ErrNoRows) {
			// Return a clear "not found" error
			return 0, fmt.Errorf("product with id %d not found", id)
		}
		return 0, fmt.Errorf("error getting price for product id %d: %w", id, err)
	}
	return price, nil
}

// GetProductByName retrieves a product by its unique name.
// Returns sql.ErrNoRows if no product with that name exists.
func (r *ProductRepo) GetProductByName(name string) (*models.Product, error) {
	if r.db == nil {
		return nil, errors.New("database connection is nil")
	}
	product, err := scanProductFromRow(
		r.db.QueryRow("SELECT id, type, name, width, price, img, color, tolerance, inventory_level FROM products WHERE name = ?", name),
	)
	// scanProductFromRow handles wrapping and sql.ErrNoRows detection
	return product, err
}

// ProductFilterParams defines the parameters for filtering product lists.
type ProductFilterParams struct {
	MaxWidth       float32
	Limit          int
	Color          string
	InventoryLevel int     // Assumed filter: inventory_level >= ? (if > 0)
	Price          float32 // Assumed filter: price <= ? (if > 0)
}

// buildProductQuery dynamically constructs the WHERE clause and arguments for filtering.
func buildProductQuery(baseSelect string, productType ProductType, params ProductFilterParams) (string, []any) {
	args := []any{productType}
	conditions := []string{"type = ?"}

	if params.MaxWidth > 0 {
		conditions = append(conditions, "width < ?")
		args = append(args, params.MaxWidth)
	}
	if params.Color != "" {
		conditions = append(conditions, "color = ?")
		args = append(args, params.Color)
	}
	if params.InventoryLevel > 0 { // Filter if InventoryLevel is explicitly positive
		conditions = append(conditions, "inventory_level >= ?")
		args = append(args, params.InventoryLevel)
	}
	if params.Price > 0 { // Filter if Price is explicitly positive
		conditions = append(conditions, "price <= ?")
		args = append(args, params.Price)
	}

	query := baseSelect + " WHERE " + strings.Join(conditions, " AND ")
	return query, args
}

// GetProducts retrieves a list of products based on type and filter parameters.
func (r *ProductRepo) GetProducts(productType ProductType, params ProductFilterParams) ([]*models.Product, error) {
	if r.db == nil {
		return nil, errors.New("database connection is nil")
	}

	baseSelect := "SELECT id, type, name, width, price, img, color, tolerance, inventory_level FROM products"
	query, args := buildProductQuery(baseSelect, productType, params)

	// Add LIMIT clause if provided
	if params.Limit > 0 {
		query += " LIMIT ?"
		args = append(args, params.Limit)
	}

	rows, err := r.db.Query(query, args...)
	if err != nil {
		return nil, fmt.Errorf("error querying products: %w", err)
	}
	defer rows.Close()

	var products []*models.Product
	for rows.Next() {
		product, err := scanProductFromRow(rows)
		if err != nil {
			// scanProductFromRow already wraps errors
			return nil, err
		}
		products = append(products, product)
	}
	if err = rows.Err(); err != nil {
		return nil, fmt.Errorf("error iterating product rows: %w", err)
	}
	return products, nil
}

// CountProducts counts products based on type and filter parameters (ignoring Limit).
func (r *ProductRepo) CountProducts(productType ProductType, params ProductFilterParams) (int, error) {
	if r.db == nil {
		return 0, errors.New("database connection is nil")
	}

	baseSelect := "SELECT COUNT(*) FROM products"
	query, args := buildProductQuery(baseSelect, productType, params)

	var count int
	err := r.db.QueryRow(query, args...).Scan(&count)
	if err != nil {
		// sql.ErrNoRows is not expected for COUNT(*), handle other DB errors
		return 0, fmt.Errorf("error counting products: %w", err)
	}
	return count, nil
}

// GetCompatibleExtensionsByGateID retrieves extensions compatible with a given gate ID.
func (r *ProductRepo) GetCompatibleExtensionsByGateID(gateID int) ([]*models.Product, error) {
	if r.db == nil {
		return nil, errors.New("database connection is nil")
	}

	// Explicitly selecting Extension type for clarity and safety
	query := `SELECT
				p.id, p.type, p.name, p.width, p.price, p.img, p.color, p.tolerance, p.inventory_level
			  FROM products p
			  INNER JOIN compatibles c ON p.id = c.extension_id
			  WHERE c.gate_id = ? AND p.type = ?`

	rows, err := r.db.Query(query, gateID, Extension)
	if err != nil {
		return nil, fmt.Errorf("error querying compatible extensions for gate ID %d: %w", gateID, err)
	}
	defer rows.Close()

	var extensions []*models.Product
	for rows.Next() {
		extension, err := scanProductFromRow(rows)
		if err != nil {
			return nil, err
		}
		extensions = append(extensions, extension)
	}
	if err = rows.Err(); err != nil {
		return nil, fmt.Errorf("error iterating compatible extension rows: %w", err)
	}
	return extensions, nil
}

// UpdateProductByID updates an existing product record.
// Assumes the input product object has been validated by the service layer.
func (r *ProductRepo) UpdateProductByID(productID int, product *models.Product) error {
	if r.db == nil {
		return errors.New("database connection is nil")
	}

	res, err := r.db.Exec(
		`UPDATE products SET
			type = ?, name = ?, width = ?, price = ?, img = ?,
			color = ?, tolerance = ?, inventory_level = ?
		 WHERE id = ?`,
		product.Type, product.Name, product.Width, product.Price, product.Img,
		product.Color, product.Tolerance, product.InventoryLevel,
		productID, // Use the passed productID for the WHERE clause
	)
	if err != nil {
		return fmt.Errorf("database error updating product with ID %d: %w", productID, err)
	}

	// Check if any row was actually updated
	rowsAffected, err := res.RowsAffected()
	if err != nil {
		// Log or ignore this error, the update might have succeeded anyway
		fmt.Printf("Warning: could not get rows affected after update for product ID %d: %v\n", productID, err)
	} else if rowsAffected == 0 {
		// Return a specific error indicating the product wasn't found
		return fmt.Errorf("no product found with ID %d to update", productID) // Or return sql.ErrNoRows
	}
	return nil
}

// DeleteProductByID deletes a product record by its ID.
func (r *ProductRepo) DeleteProductByID(productID int) error {
	if r.db == nil {
		return errors.New("database connection is nil")
	}

	res, err := r.db.Exec("DELETE FROM products WHERE id = ?", productID)
	if err != nil {
		return fmt.Errorf("database error deleting product with ID %d: %w", productID, err)
	}

	// Check if any row was actually deleted
	rowsAffected, err := res.RowsAffected()
	if err != nil {
		fmt.Printf("Warning: could not get rows affected after delete for product ID %d: %v\n", productID, err)
	} else if rowsAffected == 0 {
		// Return a specific error indicating the product wasn't found
		return fmt.Errorf("no product found with ID %d to delete", productID) // Or return sql.ErrNoRows
	}
	return nil
}

// GetProductByID retrieves a single product by its primary key ID.
// Returns sql.ErrNoRows if no product with that ID exists.
func (r *ProductRepo) GetProductByID(productID int) (*models.Product, error) {
	if r.db == nil {
		return nil, errors.New("database connection is nil")
	}
	product, err := scanProductFromRow(
		r.db.QueryRow("SELECT id, type, name, width, price, img, color, tolerance, inventory_level FROM products WHERE id = ?", productID),
	)
	// scanProductFromRow handles wrapping and sql.ErrNoRows detection
	return product, err
}

// --- Wrapper Functions (Convenience) ---
// These call GetProducts with specific types. The logic to set Qty=1 might
// arguably belong in the service or application layer, but kept here for now
// as simple convenience wrappers based on previous code.

func (r *ProductRepo) GetGates(params ProductFilterParams) ([]*models.Product, error) {
	gates, err := r.GetProducts(Gate, params)
	if err != nil {
		return nil, err // Error already wrapped
	}
	for i := range gates {
		gates[i].Qty = 1 // Consider moving this logic elsewhere
	}
	return gates, nil
}

func (r *ProductRepo) GetExtensions(params ProductFilterParams) ([]*models.Product, error) {
	extensions, err := r.GetProducts(Extension, params)
	if err != nil {
		return nil, err // Error already wrapped
	}
	for i := range extensions {
		extensions[i].Qty = 1 // Consider moving this logic elsewhere
	}
	return extensions, nil
}

func (r *ProductRepo) GetBundles(params ProductFilterParams) ([]*models.Product, error) {
	// Bundles may not naturally have a single Qty=1 concept.
	return r.GetProducts(Bundle, params) // Error already wrapped
}

// NOTE: The CreateProduct function and CreateProductParams struct have been removed.
// Responsibility for validating parameters and then calling repo.InsertProduct
// now lies within your Service layer (e.g., ProductService).
// Add this function to your ProductRepo

// CountProductByID counts products matching a specific ID.
// Returns 1 if the product exists, 0 otherwise.
func (r *ProductRepo) CountProductByID(productID int) (int, error) {
	if r.db == nil {
		return 0, errors.New("count product by ID requires a non nil db pointer")
	}

	var count int
	query := "SELECT SUM(inventory_level) FROM products WHERE id = ?"
	err := r.db.QueryRow(query, productID).Scan(&count)
	if err != nil {
		// sql.ErrNoRows should NOT occur for COUNT(*), but handle other errors
		return 0, fmt.Errorf("error counting product with ID %d: %w", productID, err)
	}

	// count will be 0 or 1 because id is a primary key
	return count, nil
}
```

---

## File: ./Makefile

```
run: build
	./bin/server.exe -port 3000

build:
	go build -o bin/server.exe ./cmd/server/

bundles:
	go run scripts/cacheBundles.go


style:
	npx tailwindcss -i ./assets/css/input.css -o ./assets/css/main.css --watch
```

---

## File: ./assets/css/main.css

```
/*
! tailwindcss v3.4.6 | MIT License | https://tailwindcss.com
*/

/*
1. Prevent padding and border from affecting element width. (https://github.com/mozdevs/cssremedy/issues/4)
2. Allow adding a border to an element by just adding a border-width. (https://github.com/tailwindcss/tailwindcss/pull/116)
*/

*,
::before,
::after {
  box-sizing: border-box;
  /* 1 */
  border-width: 0;
  /* 2 */
  border-style: solid;
  /* 2 */
  border-color: #e5e7eb;
  /* 2 */
}

::before,
::after {
  --tw-content: '';
}

/*
1. Use a consistent sensible line-height in all browsers.
2. Prevent adjustments of font size after orientation changes in iOS.
3. Use a more readable tab size.
4. Use the user's configured `sans` font-family by default.
5. Use the user's configured `sans` font-feature-settings by default.
6. Use the user's configured `sans` font-variation-settings by default.
7. Disable tap highlights on iOS
*/

html,
:host {
  line-height: 1.5;
  /* 1 */
  -webkit-text-size-adjust: 100%;
  /* 2 */
  -moz-tab-size: 4;
  /* 3 */
  -o-tab-size: 4;
     tab-size: 4;
  /* 3 */
  font-family: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  /* 4 */
  font-feature-settings: normal;
  /* 5 */
  font-variation-settings: normal;
  /* 6 */
  -webkit-tap-highlight-color: transparent;
  /* 7 */
}

/*
1. Remove the margin in all browsers.
2. Inherit line-height from `html` so users can set them as a class directly on the `html` element.
*/

body {
  margin: 0;
  /* 1 */
  line-height: inherit;
  /* 2 */
}

/*
1. Add the correct height in Firefox.
2. Correct the inheritance of border color in Firefox. (https://bugzilla.mozilla.org/show_bug.cgi?id=190655)
3. Ensure horizontal rules are visible by default.
*/

hr {
  height: 0;
  /* 1 */
  color: inherit;
  /* 2 */
  border-top-width: 1px;
  /* 3 */
}

/*
Add the correct text decoration in Chrome, Edge, and Safari.
*/

abbr:where([title]) {
  -webkit-text-decoration: underline dotted;
          text-decoration: underline dotted;
}

/*
Remove the default font size and weight for headings.
*/

h1,
h2,
h3,
h4,
h5,
h6 {
  font-size: inherit;
  font-weight: inherit;
}

/*
Reset links to optimize for opt-in styling instead of opt-out.
*/

a {
  color: inherit;
  text-decoration: inherit;
}

/*
Add the correct font weight in Edge and Safari.
*/

b,
strong {
  font-weight: bolder;
}

/*
1. Use the user's configured `mono` font-family by default.
2. Use the user's configured `mono` font-feature-settings by default.
3. Use the user's configured `mono` font-variation-settings by default.
4. Correct the odd `em` font sizing in all browsers.
*/

code,
kbd,
samp,
pre {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  /* 1 */
  font-feature-settings: normal;
  /* 2 */
  font-variation-settings: normal;
  /* 3 */
  font-size: 1em;
  /* 4 */
}

/*
Add the correct font size in all browsers.
*/

small {
  font-size: 80%;
}

/*
Prevent `sub` and `sup` elements from affecting the line height in all browsers.
*/

sub,
sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}

sub {
  bottom: -0.25em;
}

sup {
  top: -0.5em;
}

/*
1. Remove text indentation from table contents in Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=999088, https://bugs.webkit.org/show_bug.cgi?id=201297)
2. Correct table border color inheritance in all Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=935729, https://bugs.webkit.org/show_bug.cgi?id=195016)
3. Remove gaps between table borders by default.
*/

table {
  text-indent: 0;
  /* 1 */
  border-color: inherit;
  /* 2 */
  border-collapse: collapse;
  /* 3 */
}

/*
1. Change the font styles in all browsers.
2. Remove the margin in Firefox and Safari.
3. Remove default padding in all browsers.
*/

button,
input,
optgroup,
select,
textarea {
  font-family: inherit;
  /* 1 */
  font-feature-settings: inherit;
  /* 1 */
  font-variation-settings: inherit;
  /* 1 */
  font-size: 100%;
  /* 1 */
  font-weight: inherit;
  /* 1 */
  line-height: inherit;
  /* 1 */
  letter-spacing: inherit;
  /* 1 */
  color: inherit;
  /* 1 */
  margin: 0;
  /* 2 */
  padding: 0;
  /* 3 */
}

/*
Remove the inheritance of text transform in Edge and Firefox.
*/

button,
select {
  text-transform: none;
}

/*
1. Correct the inability to style clickable types in iOS and Safari.
2. Remove default button styles.
*/

button,
input:where([type='button']),
input:where([type='reset']),
input:where([type='submit']) {
  -webkit-appearance: button;
  /* 1 */
  background-color: transparent;
  /* 2 */
  background-image: none;
  /* 2 */
}

/*
Use the modern Firefox focus style for all focusable elements.
*/

:-moz-focusring {
  outline: auto;
}

/*
Remove the additional `:invalid` styles in Firefox. (https://github.com/mozilla/gecko-dev/blob/2f9eacd9d3d995c937b4251a5557d95d494c9be1/layout/style/res/forms.css#L728-L737)
*/

:-moz-ui-invalid {
  box-shadow: none;
}

/*
Add the correct vertical alignment in Chrome and Firefox.
*/

progress {
  vertical-align: baseline;
}

/*
Correct the cursor style of increment and decrement buttons in Safari.
*/

::-webkit-inner-spin-button,
::-webkit-outer-spin-button {
  height: auto;
}

/*
1. Correct the odd appearance in Chrome and Safari.
2. Correct the outline style in Safari.
*/

[type='search'] {
  -webkit-appearance: textfield;
  /* 1 */
  outline-offset: -2px;
  /* 2 */
}

/*
Remove the inner padding in Chrome and Safari on macOS.
*/

::-webkit-search-decoration {
  -webkit-appearance: none;
}

/*
1. Correct the inability to style clickable types in iOS and Safari.
2. Change font properties to `inherit` in Safari.
*/

::-webkit-file-upload-button {
  -webkit-appearance: button;
  /* 1 */
  font: inherit;
  /* 2 */
}

/*
Add the correct display in Chrome and Safari.
*/

summary {
  display: list-item;
}

/*
Removes the default spacing and border for appropriate elements.
*/

blockquote,
dl,
dd,
h1,
h2,
h3,
h4,
h5,
h6,
hr,
figure,
p,
pre {
  margin: 0;
}

fieldset {
  margin: 0;
  padding: 0;
}

legend {
  padding: 0;
}

ol,
ul,
menu {
  list-style: none;
  margin: 0;
  padding: 0;
}

/*
Reset default styling for dialogs.
*/

dialog {
  padding: 0;
}

/*
Prevent resizing textareas horizontally by default.
*/

textarea {
  resize: vertical;
}

/*
1. Reset the default placeholder opacity in Firefox. (https://github.com/tailwindlabs/tailwindcss/issues/3300)
2. Set the default placeholder color to the user's configured gray 400 color.
*/

input::-moz-placeholder, textarea::-moz-placeholder {
  opacity: 1;
  /* 1 */
  color: #9ca3af;
  /* 2 */
}

input::placeholder,
textarea::placeholder {
  opacity: 1;
  /* 1 */
  color: #9ca3af;
  /* 2 */
}

/*
Set the default cursor for buttons.
*/

button,
[role="button"] {
  cursor: pointer;
}

/*
Make sure disabled buttons don't get the pointer cursor.
*/

:disabled {
  cursor: default;
}

/*
1. Make replaced elements `display: block` by default. (https://github.com/mozdevs/cssremedy/issues/14)
2. Add `vertical-align: middle` to align replaced elements more sensibly by default. (https://github.com/jensimmons/cssremedy/issues/14#issuecomment-634934210)
   This can trigger a poorly considered lint error in some tools but is included by design.
*/

img,
svg,
video,
canvas,
audio,
iframe,
embed,
object {
  display: block;
  /* 1 */
  vertical-align: middle;
  /* 2 */
}

/*
Constrain images and videos to the parent width and preserve their intrinsic aspect ratio. (https://github.com/mozdevs/cssremedy/issues/14)
*/

img,
video {
  max-width: 100%;
  height: auto;
}

/* Make elements with the HTML hidden attribute stay hidden by default */

[hidden] {
  display: none;
}

*, ::before, ::after {
  --tw-border-spacing-x: 0;
  --tw-border-spacing-y: 0;
  --tw-translate-x: 0;
  --tw-translate-y: 0;
  --tw-rotate: 0;
  --tw-skew-x: 0;
  --tw-skew-y: 0;
  --tw-scale-x: 1;
  --tw-scale-y: 1;
  --tw-pan-x:  ;
  --tw-pan-y:  ;
  --tw-pinch-zoom:  ;
  --tw-scroll-snap-strictness: proximity;
  --tw-gradient-from-position:  ;
  --tw-gradient-via-position:  ;
  --tw-gradient-to-position:  ;
  --tw-ordinal:  ;
  --tw-slashed-zero:  ;
  --tw-numeric-figure:  ;
  --tw-numeric-spacing:  ;
  --tw-numeric-fraction:  ;
  --tw-ring-inset:  ;
  --tw-ring-offset-width: 0px;
  --tw-ring-offset-color: #fff;
  --tw-ring-color: rgb(59 130 246 / 0.5);
  --tw-ring-offset-shadow: 0 0 #0000;
  --tw-ring-shadow: 0 0 #0000;
  --tw-shadow: 0 0 #0000;
  --tw-shadow-colored: 0 0 #0000;
  --tw-blur:  ;
  --tw-brightness:  ;
  --tw-contrast:  ;
  --tw-grayscale:  ;
  --tw-hue-rotate:  ;
  --tw-invert:  ;
  --tw-saturate:  ;
  --tw-sepia:  ;
  --tw-drop-shadow:  ;
  --tw-backdrop-blur:  ;
  --tw-backdrop-brightness:  ;
  --tw-backdrop-contrast:  ;
  --tw-backdrop-grayscale:  ;
  --tw-backdrop-hue-rotate:  ;
  --tw-backdrop-invert:  ;
  --tw-backdrop-opacity:  ;
  --tw-backdrop-saturate:  ;
  --tw-backdrop-sepia:  ;
  --tw-contain-size:  ;
  --tw-contain-layout:  ;
  --tw-contain-paint:  ;
  --tw-contain-style:  ;
}

::backdrop {
  --tw-border-spacing-x: 0;
  --tw-border-spacing-y: 0;
  --tw-translate-x: 0;
  --tw-translate-y: 0;
  --tw-rotate: 0;
  --tw-skew-x: 0;
  --tw-skew-y: 0;
  --tw-scale-x: 1;
  --tw-scale-y: 1;
  --tw-pan-x:  ;
  --tw-pan-y:  ;
  --tw-pinch-zoom:  ;
  --tw-scroll-snap-strictness: proximity;
  --tw-gradient-from-position:  ;
  --tw-gradient-via-position:  ;
  --tw-gradient-to-position:  ;
  --tw-ordinal:  ;
  --tw-slashed-zero:  ;
  --tw-numeric-figure:  ;
  --tw-numeric-spacing:  ;
  --tw-numeric-fraction:  ;
  --tw-ring-inset:  ;
  --tw-ring-offset-width: 0px;
  --tw-ring-offset-color: #fff;
  --tw-ring-color: rgb(59 130 246 / 0.5);
  --tw-ring-offset-shadow: 0 0 #0000;
  --tw-ring-shadow: 0 0 #0000;
  --tw-shadow: 0 0 #0000;
  --tw-shadow-colored: 0 0 #0000;
  --tw-blur:  ;
  --tw-brightness:  ;
  --tw-contrast:  ;
  --tw-grayscale:  ;
  --tw-hue-rotate:  ;
  --tw-invert:  ;
  --tw-saturate:  ;
  --tw-sepia:  ;
  --tw-drop-shadow:  ;
  --tw-backdrop-blur:  ;
  --tw-backdrop-brightness:  ;
  --tw-backdrop-contrast:  ;
  --tw-backdrop-grayscale:  ;
  --tw-backdrop-hue-rotate:  ;
  --tw-backdrop-invert:  ;
  --tw-backdrop-opacity:  ;
  --tw-backdrop-saturate:  ;
  --tw-backdrop-sepia:  ;
  --tw-contain-size:  ;
  --tw-contain-layout:  ;
  --tw-contain-paint:  ;
  --tw-contain-style:  ;
}

.container {
  width: 100%;
}

@media (min-width: 640px) {
  .container {
    max-width: 640px;
  }
}

@media (min-width: 768px) {
  .container {
    max-width: 768px;
  }
}

@media (min-width: 1024px) {
  .container {
    max-width: 1024px;
  }
}

@media (min-width: 1280px) {
  .container {
    max-width: 1280px;
  }
}

@media (min-width: 1536px) {
  .container {
    max-width: 1536px;
  }
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.fixed {
  position: fixed;
}

.relative {
  position: relative;
}

.bottom-0 {
  bottom: 0px;
}

.right-0 {
  right: 0px;
}

.z-10 {
  z-index: 10;
}

.-mx-2 {
  margin-left: -0.5rem;
  margin-right: -0.5rem;
}

.mx-auto {
  margin-left: auto;
  margin-right: auto;
}

.my-4 {
  margin-top: 1rem;
  margin-bottom: 1rem;
}

.mb-10 {
  margin-bottom: 2.5rem;
}

.mb-2 {
  margin-bottom: 0.5rem;
}

.mb-4 {
  margin-bottom: 1rem;
}

.mb-6 {
  margin-bottom: 1.5rem;
}

.mb-8 {
  margin-bottom: 2rem;
}

.ml-4 {
  margin-left: 1rem;
}

.mr-4 {
  margin-right: 1rem;
}

.mt-2 {
  margin-top: 0.5rem;
}

.mt-4 {
  margin-top: 1rem;
}

.mt-8 {
  margin-top: 2rem;
}

.block {
  display: block;
}

.inline-block {
  display: inline-block;
}

.flex {
  display: flex;
}

.grid {
  display: grid;
}

.aspect-square {
  aspect-ratio: 1 / 1;
}

.h-20 {
  height: 5rem;
}

.h-32 {
  height: 8rem;
}

.h-8 {
  height: 2rem;
}

.h-full {
  height: 100%;
}

.w-1\/2 {
  width: 50%;
}

.w-1\/4 {
  width: 25%;
}

.w-12 {
  width: 3rem;
}

.w-20 {
  width: 5rem;
}

.w-32 {
  width: 8rem;
}

.w-8 {
  width: 2rem;
}

.w-full {
  width: 100%;
}

.max-w-16 {
  max-width: 4rem;
}

.max-w-4xl {
  max-width: 56rem;
}

.flex-1 {
  flex: 1 1 0%;
}

.list-disc {
  list-style-type: disc;
}

.grid-cols-1 {
  grid-template-columns: repeat(1, minmax(0, 1fr));
}

.flex-col {
  flex-direction: column;
}

.flex-wrap {
  flex-wrap: wrap;
}

.items-center {
  align-items: center;
}

.justify-end {
  justify-content: flex-end;
}

.justify-center {
  justify-content: center;
}

.justify-between {
  justify-content: space-between;
}

.gap-4 {
  gap: 1rem;
}

.gap-8 {
  gap: 2rem;
}

.space-x-2 > :not([hidden]) ~ :not([hidden]) {
  --tw-space-x-reverse: 0;
  margin-right: calc(0.5rem * var(--tw-space-x-reverse));
  margin-left: calc(0.5rem * calc(1 - var(--tw-space-x-reverse)));
}

.space-x-4 > :not([hidden]) ~ :not([hidden]) {
  --tw-space-x-reverse: 0;
  margin-right: calc(1rem * var(--tw-space-x-reverse));
  margin-left: calc(1rem * calc(1 - var(--tw-space-x-reverse)));
}

.space-y-2 > :not([hidden]) ~ :not([hidden]) {
  --tw-space-y-reverse: 0;
  margin-top: calc(0.5rem * calc(1 - var(--tw-space-y-reverse)));
  margin-bottom: calc(0.5rem * var(--tw-space-y-reverse));
}

.overflow-hidden {
  overflow: hidden;
}

.text-nowrap {
  text-wrap: nowrap;
}

.rounded {
  border-radius: 0.25rem;
}

.rounded-full {
  border-radius: 9999px;
}

.rounded-lg {
  border-radius: 0.5rem;
}

.rounded-md {
  border-radius: 0.375rem;
}

.rounded-tl-lg {
  border-top-left-radius: 0.5rem;
}

.border {
  border-width: 1px;
}

.border-b {
  border-bottom-width: 1px;
}

.border-t {
  border-top-width: 1px;
}

.border-gray-200 {
  --tw-border-opacity: 1;
  border-color: rgb(229 231 235 / var(--tw-border-opacity));
}

.border-gray-300 {
  --tw-border-opacity: 1;
  border-color: rgb(209 213 219 / var(--tw-border-opacity));
}

.bg-blue-500 {
  --tw-bg-opacity: 1;
  background-color: rgb(59 130 246 / var(--tw-bg-opacity));
}

.bg-blue-600 {
  --tw-bg-opacity: 1;
  background-color: rgb(37 99 235 / var(--tw-bg-opacity));
}

.bg-gray-100 {
  --tw-bg-opacity: 1;
  background-color: rgb(243 244 246 / var(--tw-bg-opacity));
}

.bg-gray-200 {
  --tw-bg-opacity: 1;
  background-color: rgb(229 231 235 / var(--tw-bg-opacity));
}

.bg-gray-800 {
  --tw-bg-opacity: 1;
  background-color: rgb(31 41 55 / var(--tw-bg-opacity));
}

.bg-red-500 {
  --tw-bg-opacity: 1;
  background-color: rgb(239 68 68 / var(--tw-bg-opacity));
}

.bg-white {
  --tw-bg-opacity: 1;
  background-color: rgb(255 255 255 / var(--tw-bg-opacity));
}

.fill-current {
  fill: currentColor;
}

.object-cover {
  -o-object-fit: cover;
     object-fit: cover;
}

.object-center {
  -o-object-position: center;
     object-position: center;
}

.p-2 {
  padding: 0.5rem;
}

.p-4 {
  padding: 1rem;
}

.p-6 {
  padding: 1.5rem;
}

.p-8 {
  padding: 2rem;
}

.px-2 {
  padding-left: 0.5rem;
  padding-right: 0.5rem;
}

.px-3 {
  padding-left: 0.75rem;
  padding-right: 0.75rem;
}

.px-4 {
  padding-left: 1rem;
  padding-right: 1rem;
}

.py-1 {
  padding-top: 0.25rem;
  padding-bottom: 0.25rem;
}

.py-16 {
  padding-top: 4rem;
  padding-bottom: 4rem;
}

.py-2 {
  padding-top: 0.5rem;
  padding-bottom: 0.5rem;
}

.py-4 {
  padding-top: 1rem;
  padding-bottom: 1rem;
}

.py-8 {
  padding-top: 2rem;
  padding-bottom: 2rem;
}

.pb-2 {
  padding-bottom: 0.5rem;
}

.pt-4 {
  padding-top: 1rem;
}

.text-center {
  text-align: center;
}

.text-right {
  text-align: right;
}

.text-2xl {
  font-size: 1.5rem;
  line-height: 2rem;
}

.text-3xl {
  font-size: 1.875rem;
  line-height: 2.25rem;
}

.text-lg {
  font-size: 1.125rem;
  line-height: 1.75rem;
}

.text-sm {
  font-size: 0.875rem;
  line-height: 1.25rem;
}

.text-xl {
  font-size: 1.25rem;
  line-height: 1.75rem;
}

.text-xs {
  font-size: 0.75rem;
  line-height: 1rem;
}

.font-bold {
  font-weight: 700;
}

.font-medium {
  font-weight: 500;
}

.font-normal {
  font-weight: 400;
}

.font-semibold {
  font-weight: 600;
}

.text-blue-600 {
  --tw-text-opacity: 1;
  color: rgb(37 99 235 / var(--tw-text-opacity));
}

.text-gray-500 {
  --tw-text-opacity: 1;
  color: rgb(107 114 128 / var(--tw-text-opacity));
}

.text-gray-600 {
  --tw-text-opacity: 1;
  color: rgb(75 85 99 / var(--tw-text-opacity));
}

.text-gray-700 {
  --tw-text-opacity: 1;
  color: rgb(55 65 81 / var(--tw-text-opacity));
}

.text-gray-800 {
  --tw-text-opacity: 1;
  color: rgb(31 41 55 / var(--tw-text-opacity));
}

.text-red-600 {
  --tw-text-opacity: 1;
  color: rgb(220 38 38 / var(--tw-text-opacity));
}

.text-white {
  --tw-text-opacity: 1;
  color: rgb(255 255 255 / var(--tw-text-opacity));
}

.shadow-lg {
  --tw-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  --tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);
  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);
}

.shadow-md {
  --tw-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);
  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);
}

.hover\:bg-blue-600:hover {
  --tw-bg-opacity: 1;
  background-color: rgb(37 99 235 / var(--tw-bg-opacity));
}

.hover\:bg-blue-700:hover {
  --tw-bg-opacity: 1;
  background-color: rgb(29 78 216 / var(--tw-bg-opacity));
}

.hover\:bg-gray-300:hover {
  --tw-bg-opacity: 1;
  background-color: rgb(209 213 219 / var(--tw-bg-opacity));
}

.hover\:bg-gray-700:hover {
  --tw-bg-opacity: 1;
  background-color: rgb(55 65 81 / var(--tw-bg-opacity));
}

.hover\:bg-red-700:hover {
  --tw-bg-opacity: 1;
  background-color: rgb(185 28 28 / var(--tw-bg-opacity));
}

.hover\:text-blue-400:hover {
  --tw-text-opacity: 1;
  color: rgb(96 165 250 / var(--tw-text-opacity));
}

.hover\:text-blue-600:hover {
  --tw-text-opacity: 1;
  color: rgb(37 99 235 / var(--tw-text-opacity));
}

.hover\:text-pink-600:hover {
  --tw-text-opacity: 1;
  color: rgb(219 39 119 / var(--tw-text-opacity));
}

.hover\:underline:hover {
  text-decoration-line: underline;
}

.focus\:outline-none:focus {
  outline: 2px solid transparent;
  outline-offset: 2px;
}

.focus\:ring-2:focus {
  --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);
  --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);
  box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);
}

.focus\:ring-blue-500:focus {
  --tw-ring-opacity: 1;
  --tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity));
}

@media (min-width: 768px) {
  .md\:flex {
    display: flex;
  }

  .md\:w-1\/2 {
    width: 50%;
  }

  .md\:grid-cols-3 {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }

  .md\:grid-cols-4 {
    grid-template-columns: repeat(4, minmax(0, 1fr));
  }

  .md\:flex-nowrap {
    flex-wrap: nowrap;
  }

  .md\:text-5xl {
    font-size: 3rem;
    line-height: 1;
  }

  .md\:text-base {
    font-size: 1rem;
    line-height: 1.5rem;
  }
}

@media (min-width: 1024px) {
  .lg\:w-1\/4 {
    width: 25%;
  }
}
```

---

## File: ./assets/css/input.css

```
@tailwind base;
@tailwind components;
@tailwind utilities;
```

---

## File: ./assets/js/index.js

```
```

---

## File: ./context.sh

```
#!/bin/bash

# Define the output file
OUTPUT_FILE="llm_context.txt"

# Initialize the output file
echo "# File Content and Context for LLM" > "$OUTPUT_FILE"
echo "This file contains the content of all files in the directory along with their paths for context." >> "$OUTPUT_FILE"
echo "" >> "$OUTPUT_FILE"

# Check if .gitignore exists
if [ -f ".gitignore" ]; then
    # Process all files, excluding those specified in .gitignore
    find . -type f -not -path "*/\.*" | grep -v -f <(grep -v '^#' .gitignore | grep -v '^\s*$' | sed 's/^/\.\//') | while read -r file; do
        # Skip the output file itself
        if [ "$file" == "./$OUTPUT_FILE" ]; then
            continue
        fi

        echo "## File: $file" >> "$OUTPUT_FILE"
        echo "" >> "$OUTPUT_FILE"
        echo '```' >> "$OUTPUT_FILE"
        cat "$file" >> "$OUTPUT_FILE"
        echo '```' >> "$OUTPUT_FILE"
        echo "" >> "$OUTPUT_FILE"
        echo "---" >> "$OUTPUT_FILE"
        echo "" >> "$OUTPUT_FILE"
    done
else
    # Process all files if no .gitignore exists
    find . -type f -not -path "*/\.*" | while read -r file; do
        # Skip the output file itself
        if [ "$file" == "./$OUTPUT_FILE" ]; then
            continue
        fi

        echo "## File: $file" >> "$OUTPUT_FILE"
        echo "" >> "$OUTPUT_FILE"
        echo '```' >> "$OUTPUT_FILE"
        cat "$file" >> "$OUTPUT_FILE"
        echo '```' >> "$OUTPUT_FILE"
        echo "" >> "$OUTPUT_FILE"
        echo "---" >> "$OUTPUT_FILE"
        echo "" >> "$OUTPUT_FILE"
    done
fi

echo "Generated context file: $OUTPUT_FILE"```

---

## File: ./templates/pages/internalerr.tmpl

```
{{ define "internalerr" }}

{{ template "header" . }}

<div class="container my-4 mx-auto px-4">
    Something went wrong. Please try again later
</div>  

{{ template "footer" .}}

{{ end }}
```

---

## File: ./templates/pages/cart.tmpl

```
{{ define "cart" }}
    {{ template "header" . }}
        {{ template "cart-main" .Cart }} 
    {{ template "footer" . }}
{{ end }}
```

---

## File: ./templates/pages/admin-login.tmpl

```
{{ define "admin-login" }}
{{ template "header" . }}

<form method="POST" action="/admin/login" class="p-4 mx-auto max-w-7xl flex flex-col gap-4">
    <input type="text" name="user_id" >
    <input type="password" name="password" >
    <button type="submit">Submit</button>
</form>

{{ template "footer" . }}
{{ end }}```

---

## File: ./templates/pages/admin.tmpl

```
{{ define "admin" }}
{{ template "header" . }}

hello admin

{{ template "footer" . }}
{{ end }}```

---

## File: ./templates/pages/product.tmpl

```
{{ define "product" }}

    {{ template "header" . }}

    <div class="w-full md:w-1/2 lg:w-1/4 px-2 mb-4">
        <img src="https://via.placeholder.com/500x300" alt="Baby Safety Gate" class="w-full">
        <div class="p-4">
            <h3 class="font-bold mb-2">{{ .Product.Name }} {{ .Product.Color }}</h3>
            <p class="text-gray-600 mb-4">This baby safety gate is perfect for keeping your baby safe in any room of your house.</p>
            <div class="flex justify-between items-center">
                <span class="text-xl font-bold">â‚¬{{ .Product.Price }}</span>
                <button class="atc-button bg-gray-800 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded" data-product="{{ . }}" >Add to Cart</button>
            </div>
        </div>
    </div>

    {{ template "footer" . }}

{{ end }}```

---

## File: ./templates/pages/test.tmpl

```
{{ define "test"}}
{{ template "header" . }}
<form
hx-post="/test"
hx-trigger="submit"
>
<input type="hidden" name="data" value="{'name':`sean`}">
<input type="hidden" name="data" value="{'name':`steven`}">
<input type="hidden" name="data" value="{'name':`rachel`}">

<button class="hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"
style="background-color: #683B1C">Add Bundle To Cart</button>
</button>
</form>
{{ template "footer" . }}
{{ end }}```

---

## File: ./templates/pages/products.tmpl

```
{{ define "products" }}

{{ template "header" . }}

    <div class="container my-4 mx-auto px-4">
        <h2 class="text-3xl font-bold mb-4">{{ .Heading }}</h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1rem;">
            {{ range .Products }}
                {{ template "product-card" . }}
            {{ end }}
        </div>
    </div>  


{{ template "footer" . }}

{{ end }}
```

---

## File: ./templates/pages/index.tmpl

```
{{ define "home" }}

{{ template "header" . }}

<main>
  <section class=" bg-gray-100 mx-auto relative flex flex-col md:flex-row items-center gap-4">
    
    <style>
      .hero-vid {
        aspect-ratio:16/9;
      }
      @media(min-width: 750px){
        .hero-vid {
        aspect-ratio:9/9;
      }
      }
    </style>
    <video
      class="hero-vid h-full w-full md:w-1/4 object-cover"
      src="https://replicate.delivery/xezq/cBCrM0QneJWfg0qsA5O9fZqnngEGIlU4e0iDbkQL1Lx2FIvRB/tmp74g77w30.mp4"
      preload="auto"
      autoplay=""
      playsinline=""
      webkit-playsinline=""
      x5-playsinline=""
      loop=""
      muted
    ></video>
    <div class="px-4 pb-4">
      <h1 class="text-2xl md:text-5xl font-bold mb-2">
        Build Your Custom Pressure Gate
      </h1>
      <p class="text-gray-600 mb-8">
        Just enter your desired width and we'll sort the rest out for
        you.
      </p>
      <form
        id="build-gate"
        hx-post="/build/"
        hx-target="#build-results"
        hx-indicator="#build-button"
        hx-swap="outerHTML"
      >
        <label for="desired-width" class="block mb-2"
          >Your desired Width in cm</label
        >
        <div class="flex gap-4 items-center">
          <input
            id="desired-width"
            name="desired-width"
            class="py-2 px-4 rounded"
            placeholder="e.g. 100"
            type="number"
          />
          <style>
            .htmx-request #button-text {
              display: none;
            }

            .htmx-request #spinner {
              display: flex;
            }
          </style>
          <button
            type="submit"
            style="background-color: #271d16"
            class="hover:bg-gray-700 text-white font-bold py-2 px-4 rounded relative"
            id="build-button"
          >
            <span id="button-text">Build Gate</span>
            <div
              id="spinner"
              class="hidden inset-0 flex items-center justify-center"
            >
              <div
                class="animate-spin h-6 w-6 border-4 border-gray-300 border-t-white rounded-full"
              ></div>
            </div>
          </button>
        </div>
      </form>
    </div>
    
  </section>
</main>

<div class="h-4"></div>

{{/*probably better to cache the most commonly searched width*/}}
<section id="build-results" class="container mx-auto p-4">
  <h2 class="text-4xl font-bold mb-4">Bundles to fit: 80cm</h2>

  <div id="build-results-content" class="md:flex gap-4">
    <div
      style="animation: fadeIn; border: 1px solid gray"
      class="bg-white rounded-lg p-4 mb-8"
    >
      <h2 class="text-2xl font-bold mb-4">
        BabyDan Premier True Pressure Fit Safety Gate and 1 extension. White
      </h2>
      <ul>
        <li>Total Bundle Price â‚¬83</li>
        <li>Width: 77 - 83cm</li>
      </ul>
      <strong class="py-4 font-medium mt-4 block">Bundle Includes:</strong>

      <div class="flex flex-col">
        <div class="px-2 mb-4 relative inline-block">
          <div
            class="flex justify-between items-centerbg-white rounded-lg overflow-hidden shadow-md"
          >
            <a class="relative" href="/gates/1">
              <img
                class="h-full aspect-square max-w-16"
                src="https://cdn11.bigcommerce.com/s-egiahb/images/stencil/640w/products/347/1003/baby-dan-premier-60114-white-no-child__43601.1559815258.jpg?c=2"
                alt="Baby Safety Gate"
              />
            </a>
            <div class="p-4">
              <a href="/gates/1">
                <h3 class="font-bold mb-2 text-xs md:text-base">
                  BabyDan Premier True Pressure Fit Safety Gate White
                </h3>
              </a>
            </div>
            <span
              style="background-color: #683b1c"
              class="p-4 z-10 text-white rounded text-xs md:text-base text-nowrap"
            >
              x 1</span
            >
          </div>
        </div>

        <div class="px-2 mb-4 relative inline-block">
          <div
            class="flex justify-between items-centerbg-white rounded-lg overflow-hidden shadow-md"
          >
            <a class="relative" href="/extensions/5">
              <img
                class="h-full aspect-square max-w-16"
                src="https://cdn11.bigcommerce.com/s-egiahb/images/stencil/640w/products/347/1003/baby-dan-premier-60114-white-no-child__43601.1559815258.jpg?c=2"
                alt="Baby Safety Gate"
              />
            </a>
            <div class="p-4">
              <a href="/gates/5">
                <h3 class="font-bold mb-2 text-xs md:text-base">
                  BabyDan Premier Gate Extension Small White
                </h3>
              </a>
            </div>
            <span
              style="background-color: #683b1c"
              class="p-4 z-10 text-white rounded text-xs md:text-base text-nowrap"
            >
              x 1</span
            >
          </div>
        </div>
      </div>

      <form
        hx-trigger="submit"
        hx-target="#cart-modal"
        hx-swap="outerHTML"
        hx-post="/cart/add"
        class="flex justify-end"
      >
        <input type="hidden" name="data" value='{"product_id":1,"qty":1}' />

        <input type="hidden" name="data" value='{"product_id":5,"qty":1}' />

        <button
          class="hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"
          style="background-color: #683b1c"
        >
          Add Bundle To Cart
        </button>
      </form>
    </div>

    <div
      style="animation: fadeIn; border: 1px solid gray"
      class="bg-white rounded-lg p-4 mb-8"
    >
      <h2 class="text-2xl font-bold mb-4">
        BabyDan Premier True Pressure Fit Safety Gate and 1 extension. Black
      </h2>
      <ul>
        <li>Total Bundle Price â‚¬83</li>
        <li>Width: 77 - 83cm</li>
      </ul>
      <strong class="py-4 font-medium mt-4 block">Bundle Includes:</strong>

      <div class="flex flex-col">
        <div class="px-2 mb-4 relative inline-block">
          <div
            class="flex justify-between items-centerbg-white rounded-lg overflow-hidden shadow-md"
          >
            <a class="relative" href="/gates/2">
              <img
                class="h-full aspect-square max-w-16"
                src="https://cdn11.bigcommerce.com/s-egiahb/images/stencil/640w/products/347/1003/baby-dan-premier-60114-white-no-child__43601.1559815258.jpg?c=2"
                alt="Baby Safety Gate"
              />
            </a>
            <div class="p-4">
              <a href="/gates/2">
                <h3 class="font-bold mb-2 text-xs md:text-base">
                  BabyDan Premier True Pressure Fit Safety Gate Black
                </h3>
              </a>
            </div>
            <span
              style="background-color: #683b1c"
              class="p-4 z-10 text-white rounded text-xs md:text-base text-nowrap"
            >
              x 1</span
            >
          </div>
        </div>

        <div class="px-2 mb-4 relative inline-block">
          <div
            class="flex justify-between items-centerbg-white rounded-lg overflow-hidden shadow-md"
          >
            <a class="relative" href="/extensions/8">
              <img
                class="h-full aspect-square max-w-16"
                src="https://cdn11.bigcommerce.com/s-egiahb/images/stencil/640w/products/347/1003/baby-dan-premier-60114-white-no-child__43601.1559815258.jpg?c=2"
                alt="Baby Safety Gate"
              />
            </a>
            <div class="p-4">
              <a href="/gates/8">
                <h3 class="font-bold mb-2 text-xs md:text-base">
                  BabyDan Premier Gate Extension Small Black
                </h3>
              </a>
            </div>
            <span
              style="background-color: #683b1c"
              class="p-4 z-10 text-white rounded text-xs md:text-base text-nowrap"
            >
              x 1</span
            >
          </div>
        </div>
      </div>

      <form
        hx-trigger="submit"
        hx-target="#cart-modal"
        hx-swap="outerHTML"
        hx-post="/cart/add"
        class="flex justify-end"
      >
        <input type="hidden" name="data" value='{"product_id":2,"qty":1}' />

        <input type="hidden" name="data" value='{"product_id":8,"qty":1}' />

        <button
          class="hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"
          style="background-color: #683b1c"
        >
          Add Bundle To Cart
        </button>
      </form>
    </div>
  </div>
</section>

<section class="bg-gray-100 py-16 px-4">
  <div class="max-w-4xl mx-auto text-center">
    <h2 class="text-3xl font-bold text-gray-800 mb-6">How It Works</h2>
    <p class="text-lg text-gray-600 mb-10">
      Get a perfectly fitted baby safety gate in three easy steps.
    </p>

    <div class="grid md:grid-cols-3 gap-8">
      <div class="flex flex-col items-center">
        <div
          class="w-20 h-20 bg-blue-500 text-white flex items-center justify-center text-3xl font-bold rounded-full"
        >
          1
        </div>
        <h3 class="text-xl font-semibold mt-4">Enter Your Measurement</h3>
        <p class="text-gray-600 text-center mt-2">
          Input the width of your space, and we'll calculate the perfect fit.
        </p>
        <img
          src="https://replicate.delivery/xezq/Q5uCuUmYh2JvDl6KXCueRAp4CDjKIX5bgQrw1sBf4z4eWG0oA/tmpn6999ybx.jpg"
          alt="Measuring a doorway"
          class="mt-4 rounded-lg shadow-md w-32 h-32 object-cover"
        />
      </div>

      <div class="flex flex-col items-center">
        <div
          class="w-20 h-20 bg-blue-500 text-white flex items-center justify-center text-3xl font-bold rounded-full"
        >
          2
        </div>
        <h3 class="text-xl font-semibold mt-4">Get Your Custom Bundle</h3>
        <p class="text-gray-600 text-center mt-2">
          Weâ€™ll generate the ideal gate and extensions for a secure fit.
        </p>
        <img
          src="https://replicate.delivery/xezq/kG3iAT0X1w4pCJORffSlcQtQX5QBE8Q2ZhmpQgqSOxkIODaUA/tmpzvgndxub.jpg"
          alt="Gate bundle preview"
          class="mt-4 rounded-lg shadow-md w-32 h-32 object-cover"
        />
      </div>

      <div class="flex flex-col items-center">
        <div
          class="w-20 h-20 bg-blue-500 text-white flex items-center justify-center text-3xl font-bold rounded-full"
        >
          3
        </div>
        <h3 class="text-xl font-semibold mt-4">Install with Ease</h3>
        <p class="text-gray-600 text-center mt-2">
          Follow our simple guide to set up your baby gate in minutes.
        </p>
        <img
          src="https://replicate.delivery/xezq/Yl2EHiDeOrTkH6iUEYVfzm4WM8ryDdyUL9siip9P13e4S0woA/tmpuy5bxwcv.jpg"
          alt="Installing the gate"
          class="mt-4 rounded-lg shadow-md w-32 h-32 object-cover"
        />
      </div>
    </div>
  </div>
</section>

<div class="container my-4 mx-auto px-4 flex flex-wrap md:flex-nowrap gap-4">
  <div class="">
    <h2 class="text-3xl font-bold mb-4">Featured Gates</h2>
    <div class="flex flex-wrap md:flex-nowrap gap-4">
      {{ range .FeaturedGates }}
      {{ template "product-card" . }}
      {{ end }}
    </div>
  </div>

  <div class="">
    <h2 class="text-3xl font-bold mb-4">Featured Extensions</h2>
    <div class="flex flex-wrap md:flex-nowrap gap-4">
      {{ range .FeaturedExtensions }}
      {{ template  "product-card" . }}
      {{ end }}
    </div>
  </div>
</div>

<section class="bg-white py-16 px-4">
  <div class="max-w-5xl mx-auto text-center">
    <h2 class="text-3xl font-bold text-gray-800 mb-6">Why Choose Us?</h2>
    <p class="text-lg text-gray-600 mb-10">
      Our baby safety gates are designed for a perfect fit, built with premium
      materials, and easy to install.
    </p>

    <div class="grid md:grid-cols-3 gap-12">
      <!-- Precision Fit -->
      <div class="flex flex-col items-center">
        <div
          class="w-16 h-16 bg-blue-500 text-white flex items-center justify-center text-2xl font-bold rounded-full"
        >
          ðŸŽ¯
        </div>
        <h3 class="text-xl font-semibold mt-4">Precision Fit</h3>
        <p class="text-gray-600 text-center mt-2">
          Our custom bundles ensure a secure fit for any space.
        </p>
        <img
          src="https://replicate.delivery/xezq/vypqRy3befoADke06YsloGezMfxuARIffMaA9JxeZp5FiTaYUA/tmp2jickw7t.jpg"
          alt="Measuring for precision fit"
          class="mt-4 w-40 h-40 object-cover rounded-lg shadow-md"
        />
      </div>

      <!-- High-Quality Materials -->
      <div class="flex flex-col items-center">
        <div
          class="w-16 h-16 bg-blue-500 text-white flex items-center justify-center text-2xl font-bold rounded-full"
        >
          ðŸ†
        </div>
        <h3 class="text-xl font-semibold mt-4">High-Quality Materials</h3>
        <p class="text-gray-600 text-center mt-2">
          Made from durable, non-toxic materials for long-lasting safety.
        </p>
        <img
          src="https://replicate.delivery/xezq/Yl2EHiDeOrTkH6iUEYVfzm4WM8ryDdyUL9siip9P13e4S0woA/tmpuy5bxwcv.jpg"
          alt="High-quality baby gate"
          class="mt-4 w-40 h-40 object-cover rounded-lg shadow-md"
        />
      </div>

      <!-- Hassle-Free Installation -->
      <div class="flex flex-col items-center">
        <div
          class="w-16 h-16 bg-blue-500 text-white flex items-center justify-center text-2xl font-bold rounded-full"
        >
          âš¡
        </div>
        <h3 class="text-xl font-semibold mt-4">Hassle-Free Installation</h3>
        <p class="text-gray-600 text-center mt-2">
          Quick setup with no drilling requiredâ€”safe and sturdy in minutes.
        </p>
        <img
          src="https://replicate.delivery/xezq/6gHv2eIKpNxWSyITx0id7cclZC94TFNe7mPlPi0ufQUSB0woA/tmphvynxr0s.jpg"
          alt="Installing baby gate"
          class="mt-4 w-40 h-40 object-cover rounded-lg shadow-md"
        />
      </div>
    </div>
  </div>
</section>

<section class="container mx-auto py-8 px-4">
  <h2 class="text-3xl font-bold mb-4">Our Baby Safety Experts</h2>
  <style>
    .gallery {
      display: flex;
      overflow: scroll;
      gap: 1rem;
    }
    .gallery img {
      width: 75vw;
    }
    @media (min-width: 500px) {
      .gallery img {
        width: auto;
      }
      .gallery {
        overflow: auto;
        display: grid;
        gap: 0.1rem;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      }
    }
  </style>
  <div class="gallery">
    <img
      class="aspect-square object-cover object-center"
      src="https://replicate.delivery/xezq/Yl2EHiDeOrTkH6iUEYVfzm4WM8ryDdyUL9siip9P13e4S0woA/tmpuy5bxwcv.jpg"
      alt="baby fitting a babysafety gate"
    />
    <img
      class="aspect-square object-cover object-center"
      src="https://replicate.delivery/xezq/vypqRy3befoADke06YsloGezMfxuARIffMaA9JxeZp5FiTaYUA/tmp2jickw7t.jpg"
      alt="baby fitting a babysafety gate"
    />
    <img
      class="aspect-square object-cover object-center"
      src="https://replicate.delivery/xezq/wWXh8ldiPZYUGxUH1QcVFaoEX5OgvVkHT0ZTz4m4FAZPlGGF/tmphwvhvocg.jpg"
      alt="baby fitting a babysafety gate"
    />
    <img
      class="aspect-square object-cover object-center"
      src="https://replicate.delivery/xezq/6gHv2eIKpNxWSyITx0id7cclZC94TFNe7mPlPi0ufQUSB0woA/tmphvynxr0s.jpg"
      alt="baby fitting a babysafety gate"
    />
    <img
      class="aspect-square object-cover object-center"
      src="https://replicate.delivery/xezq/uVp3uk9wXfWFEqriJsHF0W9pfPGYdJrBzVpII3peE9qufnhRB/tmp1o0f8osk.jpg"
      alt="baby fitting a babysafety gate"
    />
    <img
      class="aspect-square object-cover object-center"
      src="https://replicate.delivery/xezq/tAFKyrOdeiwMSKNG7hfflJlOhsxR0OOJmxmHWpHifC0fsPDjC/tmpm9n_r7is.jpg"
      alt="baby fitting a babysafety gate"
    />
    <img
      class="aspect-square object-cover object-center"
      src="https://replicate.delivery/xezq/kjjoZwI3fLRFT6jCBbnHddypUv37AA65MMemgbQenoAZJ0woA/tmpyha43fdf.jpg"
      alt="baby fitting a babysafety gate"
    />
    <img
      class="aspect-square object-cover object-center"
      src="https://replicate.delivery/xezq/CnxgzEBdyPbOBNq56TSx7vEKryl9o2U4o5imWNNfqPtrLNMKA/tmpkg1zhnc4.jpg"
      alt="baby fitting a babysafety gate"
    />
    <img
      class="aspect-square object-cover object-center"
      src="https://replicate.delivery/xezq/DMJnVHfAe8p2pU5d5n8rFsF9vkjk0pNH2v2HgnHgvFLdZaYUA/tmp88dx7jdz.jpg"
      alt="baby fitting a babysafety gate"
    />
    <img
      class="aspect-square object-cover object-center"
      src="https://replicate.delivery/xezq/7Ch7Ve0iiwQvfEAQud1jWRqtXIBw7yzVc3e4Bnp54K07y0woA/tmpu85hqug1.jpg"
      alt="baby fitting a babysafety gate"
    />
  </div>
</section>
<section class="bg-gray-100 py-16 px-4">
  <div class="max-w-5xl mx-auto text-center">
    <h2 class="text-3xl font-bold text-gray-800 mb-6">
      Certified Safety Standards
    </h2>
    <p class="text-lg text-gray-600 mb-10">
      Our baby safety gates meet the highest European safety standards to ensure
      maximum protection for your child.
    </p>

    <div class="grid md:grid-cols-2 gap-8 text-left">
      <!-- Safety Certifications -->
      <div class="flex flex-col items-center md:items-start">
        <img
          src="https://replicate.delivery/xezq/uVp3uk9wXfWFEqriJsHF0W9pfPGYdJrBzVpII3peE9qufnhRB/tmp1o0f8osk.jpg"
          alt="Safety certification badge"
          class="w-40 h-40 object-cover rounded-lg shadow-md mb-4"
        />
        <h3 class="text-xl font-semibold">Certified to EN 1930:2011 & EN 71</h3>
        <p class="text-gray-600 mt-2">
          Our safety gates comply with the strictest European safety standards,
          ensuring durability, reliability, and child safety.
        </p>
      </div>

      <!-- Rigorous Testing -->
      <div class="flex flex-col items-center md:items-start">
        <img
          src="https://replicate.delivery/xezq/kjjoZwI3fLRFT6jCBbnHddypUv37AA65MMemgbQenoAZJ0woA/tmpyha43fdf.jpg"
          alt="Strength test for baby gate"
          class="w-40 h-40 object-cover rounded-lg shadow-md mb-4"
        />
        <h3 class="text-xl font-semibold">Rigorous Strength & Safety Tests</h3>
        <p class="text-gray-600 mt-2">
          Each gate undergoes extensive testing to ensure it can withstand
          impacts, prevent climbing, and eliminate risks like finger pinching or
          choking hazards.
        </p>
      </div>

      <!-- Child-Safe Materials -->
      <div class="flex flex-col items-center md:items-start">
        <img
          src="https://replicate.delivery/xezq/Yl2EHiDeOrTkH6iUEYVfzm4WM8ryDdyUL9siip9P13e4S0woA/tmpuy5bxwcv.jpg"
          alt="Child touching a safety gate"
          class="w-40 h-40 object-cover rounded-lg shadow-md mb-4"
        />
        <h3 class="text-xl font-semibold">Non-Toxic, Child-Safe Materials</h3>
        <p class="text-gray-600 mt-2">
          Made from materials free of heavy metals and harmful chemicals,
          ensuring your childâ€™s safetyâ€”even if they chew or suck on the gate.
        </p>
      </div>

      <!-- Secure Design -->
      <div class="flex flex-col items-center md:items-start">
        <img
          src="https://replicate.delivery/xezq/7Ch7Ve0iiwQvfEAQud1jWRqtXIBw7yzVc3e4Bnp54K07y0woA/tmpu85hqug1.jpg"
          alt="Properly installed baby gate"
          class="w-40 h-40 object-cover rounded-lg shadow-md mb-4"
        />
        <h3 class="text-xl font-semibold">Stable & Secure Installation</h3>
        <p class="text-gray-600 mt-2">
          Designed to remain firmly in place, even when pushed or shaken,
          preventing accidental dislodging.
        </p>
      </div>
    </div>
  </div>
</section>

<section class="bg-white py-16 px-4">
  <div class="max-w-4xl mx-auto text-center">
    <h2 class="text-3xl font-bold text-gray-800 mb-6">
      Frequently Asked Questions
    </h2>
    <p class="text-lg text-gray-600 mb-10">
      Find answers to common questions about our baby safety gates.
    </p>

    <div class="space-y-6 text-left">
      <!-- Question 1 -->
      <div class="border-b pb-4">
        <button
          class="w-full flex justify-between items-center text-lg font-semibold text-gray-800 focus:outline-none faq-toggle"
        >
          What size baby gate do I need?
          <span class="text-blue-500">+</span>
        </button>
        <p class="text-gray-600 mt-2 hidden">
          Measure the width of your doorway, staircase, or opening. Our gates
          are adjustable and can be customized for a perfect fit.
        </p>
      </div>

      <!-- Question 2 -->
      <div class="border-b pb-4">
        <button
          class="w-full flex justify-between items-center text-lg font-semibold text-gray-800 focus:outline-none faq-toggle"
        >
          Are pressure-mounted gates safe for stairs?
          <span class="text-blue-500">+</span>
        </button>
        <p class="text-gray-600 mt-2 hidden">
          Pressure-mounted gates are great for doorways but not recommended for
          the top of stairs. Use hardware-mounted gates for staircases.
        </p>
      </div>

      <!-- Question 3 -->
      <div class="border-b pb-4">
        <button
          class="w-full flex justify-between items-center text-lg font-semibold text-gray-800 focus:outline-none faq-toggle"
        >
          Can I install a baby gate without drilling?
          <span class="text-blue-500">+</span>
        </button>
        <p class="text-gray-600 mt-2 hidden">
          Yes! Pressure-mounted gates require no drilling and are ideal for
          renters. However, for stairs, we recommend hardware-mounted gates for
          added security.
        </p>
      </div>

      <!-- Question 4 -->
      <div class="border-b pb-4">
        <button
          class="w-full flex justify-between items-center text-lg font-semibold text-gray-800 focus:outline-none faq-toggle"
        >
          How do I clean and maintain my baby gate?
          <span class="text-blue-500">+</span>
        </button>
        <p class="text-gray-600 mt-2 hidden">
          Wipe down with a damp cloth and mild detergent. Avoid harsh chemicals
          to keep materials safe for children.
        </p>
      </div>

      <!-- Question 5 -->
      <div class="border-b pb-4">
        <button
          class="w-full flex justify-between items-center text-lg font-semibold text-gray-800 focus:outline-none faq-toggle"
        >
          What safety certifications do your baby gates have?
          <span class="text-blue-500">+</span>
        </button>
        <p class="text-gray-600 mt-2 hidden">
          Our gates comply with EN 1930:2011 and EN 71, ensuring they meet the
          strictest safety standards for durability and child safety.
        </p>
      </div>

      <!-- Question 6 -->
      <div class="border-b pb-4">
        <button
          class="w-full flex justify-between items-center text-lg font-semibold text-gray-800 focus:outline-none faq-toggle"
        >
          Do baby gates work for pets as well?
          <span class="text-blue-500">+</span>
        </button>
        <p class="text-gray-600 mt-2 hidden">
          Yes! Our gates can be used for both babies and pets. We also offer
          pet-specific gates with added durability.
        </p>
      </div>

      <!-- Question 7 -->
      <div class="border-b pb-4">
        <button
          class="w-full flex justify-between items-center text-lg font-semibold text-gray-800 focus:outline-none faq-toggle"
        >
          When should I stop using a baby gate?
          <span class="text-blue-500">+</span>
        </button>
        <p class="text-gray-600 mt-2 hidden">
          Baby gates are generally used until a child is around 2 years old or
          tall enough to climb over them. Always follow manufacturer guidelines.
        </p>
      </div>
    </div>
  </div>
</section>

<script>
  document.querySelectorAll(".faq-toggle").forEach((button) => {
    button.addEventListener("click", () => {
      const answer = button.nextElementSibling;
      answer.classList.toggle("hidden");
      button.querySelector("span").textContent = answer.classList.contains(
        "hidden"
      )
        ? "+"
        : "âˆ’";
    });
  });
</script>

<!-- Structured Data for SEO -->
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "What size baby gate do I need?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Measure the width of your doorway, staircase, or opening. Our gates are adjustable and can be customized for a perfect fit."
        }
      },
      {
        "@type": "Question",
        "name": "Are pressure-mounted gates safe for stairs?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Pressure-mounted gates are great for doorways but not recommended for the top of stairs. Use hardware-mounted gates for staircases."
        }
      },
      {
        "@type": "Question",
        "name": "Can I install a baby gate without drilling?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes! Pressure-mounted gates require no drilling and are ideal for renters. However, for stairs, we recommend hardware-mounted gates for added security."
        }
      },
      {
        "@type": "Question",
        "name": "How do I clean and maintain my baby gate?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Wipe down with a damp cloth and mild detergent. Avoid harsh chemicals to keep materials safe for children."
        }
      },
      {
        "@type": "Question",
        "name": "What safety certifications do your baby gates have?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Our gates comply with EN 1930:2011 and EN 71, ensuring they meet the strictest safety standards for durability and child safety."
        }
      },
      {
        "@type": "Question",
        "name": "Do baby gates work for pets as well?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes! Our gates can be used for both babies and pets. We also offer pet-specific gates with added durability."
        }
      },
      {
        "@type": "Question",
        "name": "When should I stop using a baby gate?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Baby gates are generally used until a child is around 2 years old or tall enough to climb over them. Always follow manufacturer guidelines."
        }
      }
    ]
  }
</script>

{{ template "footer" . }}

{{ end }}
```

---

## File: ./templates/pages/notfound.tmpl

```
{{ define "not-found" }}

{{ template "header" . }}

    <div class="container my-4 mx-auto px-4">
        Page Not Found
    </div>  

{{ template "footer" . }}

{{ end }}
```

---

## File: ./templates/pages/contact.tmpl

```
{{ define "contact" }}
{{ template "header" . }}
<main class="container mx-auto p-4">
  <h2 class="text-2xl font-bold mb-6 text-gray-800">Contact Us</h2>
  <form action="/contact/" method="POST">
    <div class="mb-4">
      <label for="name" class="block text-gray-700 font-medium mb-2"
        >Name</label
      >
      <input
        type="text"
        id="name"
        name="name"
        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
    </div>
    <div class="mb-4">
      <label for="email" class="block text-gray-700 font-medium mb-2"
        >Email</label
      >
      <input
        type="email"
        id="email"
        name="email"
        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
    </div>
    <div class="mb-4">
      <label for="message" class="block text-gray-700 font-medium mb-2"
        >Message</label
      >
      <textarea
        id="message"
        name="message"
        rows="4"
        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
      ></textarea>
    </div>
    <div class="mb-4">
      <button
        type="submit"
        class="w-full bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500"
      >
        Send Message
      </button>
    </div>
  </form>
</main>
{{ template "footer" . }}
{{ end }}
```

---

## File: ./templates/partials/footer.tmpl

```
{{ define "footer" }}


{{ if .Cart }}
    {{ template "cart-modal" .Cart }}
{{ end }}

<footer class="bg-gray-100 py-8">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        <div class="footer-section about">
          <h3 class="text-lg font-semibold mb-4">Baby Safety Gates Ireland</h3>
          <p class="text-sm text-gray-700">Your trusted source for high-quality baby safety gates in Ireland. We're dedicated to keeping your little ones safe and secure.</p>
          <p class="text-xs text-gray-500">
            All non-product related imagery and videos on this site are AI-generated.
          </p>
        </div>
        <div class="footer-section contact">
          <h3 class="text-lg font-semibold mb-4">Contact Us</h3>
          <p class="text-sm text-gray-700">Bray, County Wicklow, Ireland</p>
          <p class="text-sm text-gray-700">Email: <a href="mailto:info@babysafetygatesireland.com" class="text-blue-600 hover:underline">info@babysafetygatesireland.com</a></p>
          <p class="text-sm text-gray-700">Phone: +353 (XX) XXX XXXX</p>
        </div>
        <div class="footer-section links">
          <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
          <ul class="space-y-2">
            <li><a href="#" class="text-sm text-gray-700 hover:underline">Home</a></li>
            <li><a href="#" class="text-sm text-gray-700 hover:underline">Products</a></li>
            <li><a href="#" class="text-sm text-gray-700 hover:underline">Build Your Gate</a></li>
            <li><a href="#" class="text-sm text-gray-700 hover:underline">FAQ</a></li>
            <li><a href="#" class="text-sm text-gray-700 hover:underline">Contact</a></li>
          </ul>
        </div>
        <div class="footer-section social">
          <h3 class="text-lg font-semibold mb-4">Follow Us</h3>
          <div class="flex space-x-4">
            <a href="#" target="_blank" class="text-gray-700 hover:text-blue-600"><i class="fab fa-facebook-f"></i></a>
            <a href="#" target="_blank" class="text-gray-700 hover:text-blue-400"><i class="fab fa-twitter"></i></a>
            <a href="#" target="_blank" class="text-gray-700 hover:text-pink-600"><i class="fab fa-instagram"></i></a>
          </div>
        </div>
      </div>
      <div class="footer-bottom mt-8 border-t border-gray-200 pt-4 text-center">
        <p class="text-sm text-gray-600">&copy; 2023 Baby Safety Gates Ireland. All Rights Reserved.</p>
      </div>
    </div>
  </footer>

  <script src="https://unpkg.com/htmx.org@2.0.4" integrity="sha384-HGfztofotfshcF7+8n44JQL2oJmowVChPTg48S+jvZoztPfvwD79OC/LTtG6dMp+" crossorigin="anonymous"></script>
<script src="/assets/js/index.js"></script>
</body>
</html>
{{ end }}
```

---

## File: ./templates/partials/product-card.tmpl

```
{{ define "product-card" }}

<div class="">
  <div class="bg-white rounded-lg overflow-hidden shadow-md">
    <a href="/{{.Type}}s/{{.Id}}"
      ><img
        height="300"
        width="500"
        style="aspect-ratio: 500/300"
        src="https://cdn11.bigcommerce.com/s-egiahb/images/stencil/640w/products/347/1003/baby-dan-premier-60114-white-no-child__43601.1559815258.jpg?c=2"
        alt="Baby Safety Gate"
        class="w-full"
    /></a>
    <div class="p-4">
      <a href="/{{.Type}}s/{{.Id}}"
        ><h3 class="font-bold mb-2">{{ .Name }} {{ .Color }}</h3></a
      >
      <p class="text-gray-600 mb-4">
        This baby safety gate is perfect for keeping your baby safe in any room
        of your house.
      </p>
      <div class="flex justify-between items-center">
        <span class="text-xl font-bold">â‚¬{{ .Price }}</span>
        <form
          hx-post="/cart/add"
          hx-trigger="submit"
          hx-target="#cart-modal"
          hx-swap="outerHTML"
        >
          <input
            type="hidden"
            name="data"
            value='{{ toString . }}'
          />
          <button
            style="background-color: #271d16"
            class="atc-button hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"
          >
            Add to Cart
          </button>
        </form>
      </div>
    </div>
  </div>
</div>

{{ end }}
```

---

## File: ./templates/partials/bundle-component-card.tmpl

```
{{ define "bundle-component-card" }}

<div class="px-2 mb-4 relative inline-block">
    <div class="flex justify-between items-centerbg-white rounded-lg overflow-hidden shadow-md">
        <a class="relative" href="/{{ .Type }}s/{{ .Id }}">
            <img class="h-full aspect-square max-w-16"
             src="https://cdn11.bigcommerce.com/s-egiahb/images/stencil/640w/products/347/1003/baby-dan-premier-60114-white-no-child__43601.1559815258.jpg?c=2" 
             alt="Baby Safety Gate" class="w-full">
        </a>
        <div class="p-4">
            <a href="/gates/{{.Id}}">
                <h3 class="font-bold mb-2 text-xs md:text-base">
                    {{ .Name }} {{ title  .Color }}
                </h3>
            </a>
        </div>
        <span 
        style="background-color: #683B1C;"
        class=" p-4 z-10 text-white rounded text-xs md:text-base text-nowrap"> x {{ .Qty }}</span>
    </div>
</div>

{{ end }}
```

---

## File: ./templates/partials/cart-main.tmpl

```
{{ define "cart-main" }}
    <main id="cart-main" class="container mx-auto p-4">
        <div class="bg-white shadow-md rounded-lg p-6">
            <h1 class="text-2xl font-bold mb-4">Shopping Cart</h1>

            {{ range .Items}}
                <!-- Cart Items -->
                {{ template "cart-item" . }}
            {{ end }}

            <!-- Checkout Section -->
            <div class="border-t pt-4">
                <div class="flex justify-between items-center">
                    <span class="text-lg font-semibold">Total</span>
                    <span class="text-lg font-semibold">â‚¬{{ .TotalValue }}</span>
                </div>
                <a href="/checkout">
                        <button class="mt-4 w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700">Proceed to Checkout</button>
                </a>
                <button class="mt-4 w-full bg-red-500 text-white py-2 rounded-md hover:bg-red-700" hx-post="/cart/clear" hx-target="#cart-main" hx-swap="outerHTML">Clear Cart</button>
            </div>
        </div>
    </main> 
{{ end }}
```

---

## File: ./templates/partials/single-bundle.tmpl

```
{{ define "bundle"  }}

{{ template "header" }}


    <div class="container my-4 mx-auto px-4">
        <div class="bg-white rounded-lg shadow-lg p-8">
            {{ range .Bundle.Gates }}
                <h2 class="text-2xl font-bold text-gray-800 mb-4">{{ .Name }} Bundle</h2>
                <img  src="https://via.placeholder.com/500x300" data-src="{{ .Img }}" alt="{{ .Name }}" class="rounded-lg mb-4">
            {{ end }}
            <p class="text-gray-700 mb-4">Price: {{ .Bundle.Price }}</p>
            <p class="text-gray-700 mb-4">Max Length: {{ .Bundle.Width }}</p>
            <h3 class="text-lg font-bold text-gray-800 mb-2">Gates:</h3>
            <ul>
                {{ range  .Bundle.Gates }}
                <li class="text-gray-700">{{ .Name }} ({{ .Qty }}) {{ .Width }}cm</li>
                {{ end }}
            </ul>
            <h3 class="text-lg font-bold text-gray-800 mb-2">Extensions:</h3>
            <ul class="list-disc ml-4">
                {{ range .Bundle.Extensions }}
                    <li class="text-gray-700">{{ .Name }} ({{ .Qty }}) {{ .Width }}cm</li>
                {{ end }}
            </ul>
        </div>
    </div>


{{ template "footer" }}

{{ end }}
```

---

## File: ./templates/partials/header.tmpl

```
{{ define "header" }}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{{ .MetaDescription }}">
    <title>{{ .PageTitle }}</title>
    <!-- Include Tailwind CSS styles -->
    <link href="/assets/css/main.css" rel="stylesheet">
    {{ if eq .Env "development"}}
          <script src="https://cdn.tailwindcss.com"></script>
    {{ end }}
</head>
<style>
    @keyframes fadeIn {
      0% { opacity: 0; }
      100% { opacity: 1; }
    }
    
    .fade-in {
      animation: fadeIn 0.5s ease-in-out;
    }
</style>
<body>
    <nav style="background-color: #A28868;" class=" py-4">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row gap-2 justify-between items-center">
                <a href="/" class="text-white font-bold text-xl">Baby Safety Gates Ireland</a>
                <ul class="flex gap-2 md:gap-4 flex-wrap">
                    <li><a href="/" class="text-white py-2">Home</a></li>
                    <li><a href="/gates" class="text-white py-2">Gates</a></li>
                    <li><a href="/extensions" class="text-white py-2">Extensions</a></li>
                    <li><a href="/contact" class="text-white py-2">Contact</a></li>
                    <li><a href="/cart" class="text-white py-2">Cart</a></li>
                </ul>
            </div>
        </div>
    </nav>

{{ end }}
```

---

## File: ./templates/partials/cart-item.tmpl

```
{{define "cart-item"}}
{{/*expects cart item object*/}}
<div class="mb-4" id="item-{{.ID}}">
    <div class="flex gap-4 items-center border-b pb-2 mb-2">
        
        <div class="flex w-1/2">
            <img class="w-20 h-20 object-cover mr-4" src="{{ (index .Components 0).Img }}" alt="Product Image">
            <div>
                <h2 class="text-lg font-semibold">{{ .Name }}</h2>
                <p class="text-gray-600">
                     <ul>
                        {{ range .Components }}
                            <li>{{ .Name }}</li>
                        {{ end }}
                     </ul>
                </p>
            </div>
        </div>

        {{ template "item-details" . }}
        
    </div>
</div>
{{ end }}

{{ define "item-details" }}
<div class="details w-1/2 flex items-center justify-between">
    <div class="flex items-center space-x-2">
        <button 
            class="bg-gray-200 hover:bg-gray-300 text-gray-700 p-2 rounded-full"
            x-triger="click"
            hx-post="/cart/item/decrement"
            hx-target="#cart-main"
            hx-swap="outerHTML"
            hx-vals='{"cart_item_id":"{{.ID}}"}'
        >
            <span class="sr-only">Decrease Quantity:</span>
            <span aria-hidden="true">âˆ’</span>
        </button>
        {{ template "item-counter" . }}
        <button 
            class="bg-gray-200 hover:bg-gray-300 text-gray-700 p-2 rounded-full" 
            hx-triger="click"
            hx-post="/cart/item/increment"
            hx-target="#cart-main"
            hx-swap="outerHTML"
            hx-vals='{"cart_item_id":"{{.ID}}"}'
            >
            <span class="sr-only">Increase Quantity:</span>
            <span aria-hidden="true">+</span>
        </button>
    </div>   

    <div class="text-right">
        <p class="text-lg font-semibold">â‚¬{{ mul .SalePrice .Qty }}</p>
        <button 
        class="text-red-600 hover:underline"
        hx-triger="click"
        hx-post="/cart/item/remove"
        hx-target="#cart-main"
        hx-swap="outerHTML"
        hx-vals='{"cart_item_id":"{{.ID}}"}'
        >Remove</button>
    </div>
</div>
{{ end }}

{{ define "item-counter" }}
{{/*expects cart item object*/}}
    <input class="item-qty border border-gray-300 rounded w-12 text-center py-1" type="tel" value="{{.Qty}}" min="1">
{{ end }}
```

---

## File: ./templates/partials/build-results.tmpl

```
{{ define "build-results" }}
<section
  id="build-results"
  hx-on::after-settle="document.getElementById('build-results').scrollIntoView({ behavior: 'smooth' });"
  class="container mx-auto p-4"
>
  <h3 class="text-4xl font-bold mb-4">
    Bundles to fit: {{ .RequestedBundleSize }}cm
  </h3>

  <div id="build-results-content" class="md:flex gap-4">
    {{ range .Bundles }}
    <div
      style="animation: fadeIn; border: 1px solid gray"
      class="bg-white rounded-lg p-4 mb-8"
    >
      <h2 class="text-2xl font-bold mb-4">{{ .Name }} {{ title .Color }}</h2>
      <ul>
        <li>Total Bundle Price â‚¬{{ .Price }}</li>
        <li>Width: {{ sizeRange .Width .Tolerance }} - {{ .Width }}cm</li>
      </ul>
      <strong class="py-4 font-medium mt-4 block">Bundle Includes:</strong>

      <div class="flex flex-col">
        {{ range .Components }}
        {{ template "bundle-component-card" . }}
        {{ end }}
      </div>

      <form
        hx-trigger="submit"
        hx-target="#cart-modal"
        hx-swap="outerHTML"
        hx-post="/cart/add"
        class="flex justify-end"
      >
 
      {{ range .Components }}
          <input type="hidden" name="data" value='{{ toString .}}' />
      {{ end }}


        <button
          class="hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"
          style="background-color: #683b1c"
        >
          Add Bundle To Cart
        </button>
      </form>
    </div>
    {{ end }}
  </div>
</section>
{{ end }}
```

---

## File: ./templates/partials/cart-modal.tmpl

```
{{ define "cart-modal" }}
<a
  id="cart-modal"
  class="fixed bottom-0 right-0 p-4 bg-white shadow-lg rounded-tl-lg z-10"
  href="/cart/"
>
  <div class="flex items-center space-x-2">
    <svg class="flex-1 w-8 h-8 fill-current" viewbox="0 0 24 24">
      <path
        d="M17,18C15.89,18 15,18.89 15,20A2,2 0 0,0 17,22A2,2 0 0,0 19,20C19,18.89 18.1,18 17,18M1,2V4H3L6.6,11.59L5.24,14.04C5.09,14.32 5,14.65 5,15A2,2 0 0,0 7,17H19V15H7.42A0.25,0.25 0 0,1 7.17,14.75C7.17,14.7 7.18,14.66 7.2,14.63L8.1,13H15.55C16.3,13 16.96,12.58 17.3,11.97L20.88,5.5C20.95,5.34 21,5.17 21,5A1,1 0 0,0 20,4H5.21L4.27,2M7,18C5.89,18 5,18.89 5,20A2,2 0 0,0 7,22A2,2 0 0,0 9,20C9,18.89 8.1,18 7,18Z"
      />
    </svg>

    <div class="text-gray-500 font-medium">
      <span class="text-sm font-normal">Cart</span>
      <span class="text-xl font-semibold">${{ .TotalValue }}</span>
      <span class="text-xs font-normal">({{ len .Items }} items)</span>
    </div>
  </div>
</a>
{{ end }}

{{ define "cart-modal-oob" }}
<a
  id="cart-modal"
  hx-swap-oob="true"
  class="fixed bottom-0 right-0 p-4 bg-white shadow-lg rounded-tl-lg"
  href="/cart/"
>
  <div class="flex items-center space-x-2">
    <svg class="flex-1 w-8 h-8 fill-current" viewbox="0 0 24 24">
      <path
        d="M17,18C15.89,18 15,18.89 15,20A2,2 0 0,0 17,22A2,2 0 0,0 19,20C19,18.89 18.1,18 17,18M1,2V4H3L6.6,11.59L5.24,14.04C5.09,14.32 5,14.65 5,15A2,2 0 0,0 7,17H19V15H7.42A0.25,0.25 0 0,1 7.17,14.75C7.17,14.7 7.18,14.66 7.2,14.63L8.1,13H15.55C16.3,13 16.96,12.58 17.3,11.97L20.88,5.5C20.95,5.34 21,5.17 21,5A1,1 0 0,0 20,4H5.21L4.27,2M7,18C5.89,18 5,18.89 5,20A2,2 0 0,0 7,22A2,2 0 0,0 9,20C9,18.89 8.1,18 7,18Z"
      />
    </svg>

    <div class="text-gray-500 font-medium">
      <span class="text-sm font-normal">Cart</span>
      <span class="text-xl font-semibold">${{ .TotalValue }}</span>
      <span class="text-xs font-normal">({{ len .Items }} items)</span>
    </div>
  </div>
</a>
{{ end }}
```

---

## File: ./templates/partials/bundles.tmpl

```
{{ template "header" }}    
    
    <div class="container my-4 mx-auto px-4">
        <h2 class="text-3xl font-bold mb-4">Popular Bundles</h2>
        <div class="flex flex-wrap -mx-2">
            {{ range .PopularBundles}}
                <a class="w-full md:w-1/2 lg:w-1/4 px-2 mb-4" href="/bundles/{{.Id}}">
                    <div class="bg-white rounded-lg overflow-hidden shadow-md">
                        <img src="https://via.placeholder.com/500x300" alt="Baby Safety Gate" class="w-full">
                        <div class="p-4">
                            <h3 class="font-bold mb-2">{{ .Name }}</h3>
                            <p class="text-gray-600 mb-4">
                                <ul>
                                    <li>Size: {{ .Size }}</li>
                                    <li>Colour: {{ .Color }}</li>
                                </ul>
                            </p>
                            <div class="flex justify-between items-center">
                                <span class="text-xl font-bold">â‚¬{{ .Price }}</span>
                                <button class="bg-gray-800 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded">Add to Cart</button>
                            </div>
                        </div>
                    </div>
                </a>
            {{ end }}
        </div>
    </div> 

{{ template "footer" }}```

---

## File: ./go.mod

```
module github.com/seanomeara96/gates

go 1.23.1

toolchain go1.24.1

require github.com/mattn/go-sqlite3 v1.14.27

require (
	github.com/google/uuid v1.6.0
	github.com/gorilla/sessions v1.4.0
	github.com/joho/godotenv v1.5.1
	github.com/patrickmn/go-cache v2.1.0+incompatible
	github.com/seanomeara96/auth v0.0.0-20250311125829-3f40be05d59a
	github.com/stripe/stripe-go/v81 v81.4.0
	golang.org/x/text v0.24.0
)

require (
	github.com/golang-jwt/jwt/v5 v5.2.2 // indirect
	github.com/gorilla/securecookie v1.1.2 // indirect
	golang.org/x/crypto v0.37.0 // indirect
)
```

---

## File: ./tailwind.config.js

```
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: ["./templates/**/*.tmpl", "./assets/**/*.js"],
  theme: {
    extend: {},
  },
  plugins: [],
}
```

---

## File: ./sql/cart.sql

```
-- Table for cart
CREATE TABLE cart (
    id TEXT PRIMARY KEY,
    created_at DATETIME,
    last_updated_at DATETIME,
    total_value REAL
);

-- Table for cart_item
CREATE TABLE cart_item (
    id TEXT,
    cart_id TEXT,
    name TEXT,
    sale_price REAL,
    qty INTEGER,
    created_at DATETIME,
    FOREIGN KEY (cart_id) REFERENCES cart(id)
);

-- Table for cart_item_component
CREATE TABLE cart_item_component (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    cart_item_id TEXT,
    cart_id TEXT,
    product_id INTEGER,
    qty INTEGER,
    name TEXT,
    created_at DATETIME,
    FOREIGN KEY (cart_item_id) REFERENCES cart_item(id),
    FOREIGN KEY (cart_id) REFERENCES cart(id)
);
```

---

## File: ./sql/bundle.sql

```
// bundle components schema goes here```

---

## File: ./sql/contact.sql

```
CREATE TABLE IF NOT EXISTS contact(
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT,
    email TEXT NOT NULL,
    message TEXT NOT NULL
);
```

---

## File: ./models/bundle.go

```
package models

import (
	"strconv"
)

type Bundle struct {
	Product
	Components []Product `json:"components"`
}

// we can add in error handling retrospectively,
// for now, lets assume we're not doing anything stupid
func (b *Bundle) ComputeMetaData() {
	b.setType()
	b.setName()
	b.setPrice()
	b.setImg()
	b.setColor()
	b.setQty()
	b.setWidth()
	b.setTolerance()
}

func (b *Bundle) ToProduct() Product {
	b.ComputeMetaData()
	return Product{
		Type:      "bundle",
		Name:      b.Name,
		Width:     b.Width,
		Price:     b.Price,
		Img:       b.Img,
		Color:     b.Color,
		Tolerance: b.Tolerance,
		Qty:       b.Qty,
	}
}

/*
	for all of the below, we assume that product at index 0 is the gate and that there is
	only one gate per bundle
*/

func (b *Bundle) setType() {
	b.Type = "bundle"
}

func (b *Bundle) setQty() {
	if b.Qty < 1 {
		b.Qty = 1
	}
}

func (b *Bundle) setTolerance() {
	if b.Tolerance == 0 {
		b.Tolerance = b.Components[0].Tolerance
	}
}

func (b *Bundle) setPrice() {
	if b.Price == 0 {
		for i := 0; i < len(b.Components); i++ {
			b.Price += (b.Components[i].Price * float32(b.Components[i].Qty))
		}
	}
}
func (b *Bundle) setImg() {
	if b.Img == "" {
		b.Img = b.Components[0].Img
	}
}
func (b *Bundle) setColor() {
	if b.Color == "" {
		b.Color = b.Components[0].Color
	}
}
func (b *Bundle) setName() {
	if b.Name == "" {
		gate := b.Components[0]
		b.Name = gate.Name
		extensionCount := 0
		for i := 1; i < len(b.Components); i++ {
			extensionCount += b.Components[i].Qty
		}
		if extensionCount == 1 {
			b.Name += " and 1 extension."
		} else if extensionCount > 1 {
			b.Name += " and " + strconv.Itoa(extensionCount) + " extensions."
		}

	}
}

func (b *Bundle) setWidth() {
	if b.Width == 0 {
		b.Width = b.Components[0].Width * float32(b.Components[0].Qty)
		for i := 1; i < len(b.Components); i++ {
			b.Width += (b.Components[i].Width * float32(b.Components[i].Qty))
		}
	}
}
```

---

## File: ./models/cart.go

```
package models

import (
	"strconv"
	"strings"
	"time"

	"github.com/google/uuid"
)

type Cart struct {
	ID            string     `json:"id"`              // stored in cart table
	CreatedAt     time.Time  `json:"created_at"`      // stored in cart table
	LastUpdatedAt time.Time  `json:"last_updated_at"` // stored in cart table
	Items         []CartItem `json:"items"`
	TotalValue    float32    `json:"total_value"`
}

type CartItem struct {
	ID         string              `json:"id"`      // stored in cart_item table
	CartID     string              `json:"cart_id"` // stored in cart_item table
	Name       string              `json:"name"`
	SalePrice  float32             `json:"sale_price"`
	Components []CartItemComponent `json:"components"`
	Qty        int                 `json:"qty"`        // stored in cart_item table
	CreatedAt  time.Time           `json:"created_at"` // stored in cart_item table
}

type CartItemComponent struct {
	CartItemID string    `json:"cart_item_id"` // stored in cart_item_component table
	CartID     string    `json:"cart_id"`      // stored in cart_item_component table
	CreatedAt  time.Time `json:"created_at"`   // stored in cart_item_component table
	Product              // only product_id and qty stored in cart_item_component table
}

func NewCart() Cart {
	cartID := uuid.New().String()
	return Cart{
		ID:            cartID,
		CreatedAt:     time.Now(),
		LastUpdatedAt: time.Now(),
	}
}

func (c *Cart) SetTotalValue() {
	c.TotalValue = 0
	for i := range c.Items {
		c.TotalValue += (c.Items[i].SalePrice * float32(c.Items[i].Qty))
	}
}

func (i *CartItem) SetName() {
	i.Name = ""
	i.Name = i.Components[0].Name
	if len(i.Components) > 1 {
		i.Name += " and " + strconv.Itoa(len(i.Components)-1) + " components"
	}
}

func (i *CartItem) SetPrice() {
	i.SalePrice = 0
	for c := range i.Components {
		component := i.Components[c]
		i.SalePrice += (component.Price * float32(component.Qty))
	}
}

func NewCartItem(cartID string, components []CartItemComponent) CartItem {

	idParts := []string{}
	for _, c := range components {
		idParts = append(idParts, strconv.Itoa(c.Product.Id)+"-"+strconv.Itoa(c.Qty))
	}
	id := strings.Join(idParts, "_")

	item := CartItem{
		ID:         id,
		CartID:     cartID,
		Components: components,
		CreatedAt:  time.Now(),
		Qty:        1,
	}

	for i := range item.Components {
		item.Components[i].CartID = cartID
		item.Components[i].CartItemID = id
	}

	item.SetName()

	return item
}

func NewCartItemComponent(cartID string) CartItemComponent {
	return CartItemComponent{
		CartID:    cartID,
		CreatedAt: time.Now(),
	}
}
```

---

## File: ./models/product.go

```
package models

type Product struct {
	Id             int     `json:"product_id"`
	Type           string  `json:"type"`
	Name           string  `json:"name"`
	Width          float32 `json:"width"`
	Price          float32 `json:"price"`
	Img            string  `json:"img"`
	Color          string  `json:"color"`
	Tolerance      float32 `json:"tolerance"`
	Qty            int     `json:"qty"`
	InventoryLevel int     `json:"inventory_level"`
}
```

---

## File: ./cachedrepos/products.go

```
package cachedrepos

import (
	"database/sql" // Import errors for sql.ErrNoRows check potentially
	"fmt"
	"time"

	"github.com/patrickmn/go-cache"
	"github.com/seanomeara96/gates/models"
	"github.com/seanomeara96/gates/repos"
)

type CachedProductRepo struct {
	cache       *cache.Cache
	productRepo *repos.ProductRepo // The underlying non-cached repository
}

// NewCachedProductRepo creates a new caching wrapper around a ProductRepo.
func NewCachedProductRepo(productRepo *repos.ProductRepo) *CachedProductRepo {
	if productRepo == nil {
		panic("underlying productRepo cannot be nil for CachedProductRepo")
	}
	defaultExpiration := time.Minute * 5
	cleanupInterval := time.Minute * 10
	c := cache.New(defaultExpiration, cleanupInterval)
	return &CachedProductRepo{
		cache:       c,
		productRepo: productRepo,
	}
}

// --- Method Implementations ---

// InsertProduct clears relevant caches and calls the underlying repository's InsertProduct.
func (r *CachedProductRepo) InsertProduct(product *models.Product) (sql.Result, error) {
	// Cache Invalidation: Flush is simple but potentially broad.
	// More granular invalidation could delete specific keys related to 'product.Name', 'product.Type', etc.
	// For now, Flush ensures correctness.
	r.cache.Flush()
	return r.productRepo.InsertProduct(product)
}

// GetProductPrice checks cache first, otherwise fetches from underlying repo and caches the result.
func (r *CachedProductRepo) GetProductPrice(id int) (float32, error) {
	cacheKey := fmt.Sprintf("product_price_%d", id)
	if cachedPrice, found := r.cache.Get(cacheKey); found {
		if price, ok := cachedPrice.(float32); ok {
			return price, nil
		}
		// If type assertion fails, treat as cache miss (or log error)
	}

	price, err := r.productRepo.GetProductPrice(id)
	if err != nil {
		// Don't cache errors like "not found"
		return 0, err
	}

	r.cache.Set(cacheKey, price, cache.DefaultExpiration)
	return price, nil
}

// GetProductByName checks cache first, otherwise fetches from underlying repo and caches the result.
func (r *CachedProductRepo) GetProductByName(name string) (*models.Product, error) {
	cacheKey := fmt.Sprintf("product_by_name_%s", name) // Consider case sensitivity if needed
	if cachedProduct, found := r.cache.Get(cacheKey); found {
		if product, ok := cachedProduct.(*models.Product); ok {
			return product, nil
		}
	}

	product, err := r.productRepo.GetProductByName(name)
	if err != nil {
		// Don't cache errors, especially sql.ErrNoRows
		return nil, err
	}

	// Cache the found product (make sure product is not nil here)
	if product != nil {
		r.cache.Set(cacheKey, product, cache.DefaultExpiration)
	}
	return product, nil
}

// Helper function to generate cache key for product list filters
func generateProductListCacheKey(prefix string, productType repos.ProductType, params repos.ProductFilterParams) string {
	// Ensure consistent key format, handling zero values appropriately
	return fmt.Sprintf("%s_%s_maxwidth_%.2f_color_%s_invlvl_%d_price_%.2f_limit_%d",
		prefix,
		productType,
		params.MaxWidth,
		params.Color, // Empty string is handled fine
		params.InventoryLevel,
		params.Price,
		params.Limit, // Limit included for GetProducts, ignored logically by CountProducts but part of params
	)
}

// GetProducts checks cache first based on *all* filter params, otherwise fetches and caches.
func (r *CachedProductRepo) GetProducts(productType repos.ProductType, params repos.ProductFilterParams) ([]*models.Product, error) {
	cacheKey := generateProductListCacheKey("products", productType, params)
	if cachedProducts, found := r.cache.Get(cacheKey); found {
		if products, ok := cachedProducts.([]*models.Product); ok {
			return products, nil
		}
	}

	products, err := r.productRepo.GetProducts(productType, params)
	if err != nil {
		return nil, err
	}

	// Cache the result (even if it's an empty slice, that's a valid result)
	r.cache.Set(cacheKey, products, cache.DefaultExpiration)
	return products, nil
}

// CountProducts checks cache first, otherwise counts via underlying repo and caches.
func (r *CachedProductRepo) CountProducts(productType repos.ProductType, params repos.ProductFilterParams) (int, error) {
	// Use the same key generation logic but maybe a different prefix
	// Note: Limit in params is ignored by the underlying CountProducts, but included in key for consistency with params struct
	cacheKey := generateProductListCacheKey("count", productType, params) // Use "count" prefix

	if cachedCount, found := r.cache.Get(cacheKey); found {
		if count, ok := cachedCount.(int); ok {
			return count, nil
		}
	}

	count, err := r.productRepo.CountProducts(productType, params)
	if err != nil {
		// Don't cache errors
		return 0, err
	}

	r.cache.Set(cacheKey, count, cache.DefaultExpiration)
	return count, nil
}

// GetCompatibleExtensionsByGateID checks cache first, otherwise fetches and caches.
func (r *CachedProductRepo) GetCompatibleExtensionsByGateID(gateID int) ([]*models.Product, error) {
	cacheKey := fmt.Sprintf("compatible_extensions_%d", gateID)
	if cachedExtensions, found := r.cache.Get(cacheKey); found {
		if extensions, ok := cachedExtensions.([]*models.Product); ok {
			return extensions, nil
		}
	}

	extensions, err := r.productRepo.GetCompatibleExtensionsByGateID(gateID)
	if err != nil {
		return nil, err
	}

	r.cache.Set(cacheKey, extensions, cache.DefaultExpiration)
	return extensions, nil
}

// UpdateProductByID flushes the cache and calls the underlying repository's UpdateProductByID.
func (r *CachedProductRepo) UpdateProductByID(productID int, product *models.Product) error {
	// Cache Invalidation: Flush is simple. Granular would involve deleting keys for:
	// - product_by_id_...
	// - product_by_name_... (if name changed)
	// - potentially relevant list keys (difficult without knowing which lists it affected)
	r.cache.Flush()
	return r.productRepo.UpdateProductByID(productID, product)
}

// DeleteProductByID flushes the cache and calls the underlying repository's DeleteProductByID.
func (r *CachedProductRepo) DeleteProductByID(productID int) error {
	// Cache Invalidation: Flush is simple. Granular would involve deleting keys for:
	// - product_by_id_...
	// - product_by_name_... (need to fetch name before delete or pass it)
	// - potentially relevant list keys
	r.cache.Flush()
	return r.productRepo.DeleteProductByID(productID)
}

// GetProductByID checks cache first, otherwise fetches from underlying repo and caches the result.
func (r *CachedProductRepo) GetProductByID(productID int) (*models.Product, error) {
	cacheKey := fmt.Sprintf("product_by_id_%d", productID)
	if cachedProduct, found := r.cache.Get(cacheKey); found {
		if product, ok := cachedProduct.(*models.Product); ok {
			return product, nil
		}
	}

	product, err := r.productRepo.GetProductByID(productID)
	if err != nil {
		// Don't cache errors like sql.ErrNoRows
		return nil, err
	}

	if product != nil {
		r.cache.Set(cacheKey, product, cache.DefaultExpiration)
	}
	return product, nil
}

// --- Convenience Wrappers (GetGates, GetExtensions, GetBundles) ---
// These now correctly generate cache keys based on the full ProductFilterParams

func (r *CachedProductRepo) GetGates(params repos.ProductFilterParams) ([]*models.Product, error) {
	cacheKey := generateProductListCacheKey("gates", repos.Gate, params) // Use helper
	if cachedGates, found := r.cache.Get(cacheKey); found {
		if gates, ok := cachedGates.([]*models.Product); ok {
			return gates, nil
		}
	}

	gates, err := r.productRepo.GetGates(params)
	if err != nil {
		return nil, err
	}

	r.cache.Set(cacheKey, gates, cache.DefaultExpiration)
	return gates, nil
}

func (r *CachedProductRepo) GetExtensions(params repos.ProductFilterParams) ([]*models.Product, error) {
	cacheKey := generateProductListCacheKey("extensions", repos.Extension, params) // Use helper
	if cachedExtensions, found := r.cache.Get(cacheKey); found {
		if extensions, ok := cachedExtensions.([]*models.Product); ok {
			return extensions, nil
		}
	}

	extensions, err := r.productRepo.GetExtensions(params)
	if err != nil {
		return nil, err
	}

	r.cache.Set(cacheKey, extensions, cache.DefaultExpiration)
	return extensions, nil
}

func (r *CachedProductRepo) GetBundles(params repos.ProductFilterParams) ([]*models.Product, error) {
	cacheKey := generateProductListCacheKey("bundles", repos.Bundle, params) // Use helper
	if cachedBundles, found := r.cache.Get(cacheKey); found {
		if bundles, ok := cachedBundles.([]*models.Product); ok {
			return bundles, nil
		}
	}

	bundles, err := r.productRepo.GetBundles(params)
	if err != nil {
		return nil, err
	}

	r.cache.Set(cacheKey, bundles, cache.DefaultExpiration)
	return bundles, nil
}

// NOTE: CreateProduct(params repos.CreateProductParams) has been REMOVED
// as it no longer exists in the underlying repos.ProductRepo.
// The service layer should perform validation and call InsertProduct.
```

---

## File: ./package.json

```
{
  "devDependencies": {
    "eslint": "^9.22.0",
    "tailwindcss": "^4.0.14"
  },
  "scripts": {
    "start": "nodemon --exec go run main.go --signal SIGTERM"
  }
}
```

---

## File: ./main.db

```
SQLite format 3   @    3              ÿ                                                3 .zq    ˜ ®i
ë
]
2	=	 3î	”kÇ” ˜M    …2"33Štablecart_item_componentcart_item_componentCREATE TABLE cart_item_component (
    cart_item_id TEXT    NOT NULL,           -- stored in cart_item_component table
    cart_id      TEXT    NOT NULL,           -- stored in cart_item_component table
    product_id   TEXT    NOT NULL,           -- from Product: only product_id stored
    qty          INTEGER NOT NULL,           -- from Product: only qty stored
    created_at   DATETIME NOT NULL,          -- stored in cart_item_component table
    PRIMARY KEY (cart_item_id, product_id),
    FOREIGN KEY (cart_item_id) REFERENCES cart_item(id) ON DELETE CASCADE,
    FOREIGN KEY (cart_id)      REFERENCES cart(id) ON DELETE CASCADE
)E#Y3 indexsqlite_autoindex_cart_item_component_1cart_item_component1!E indexsqlite_autoindex_cart_item_1cart_itemƒ! †tablecart_itemcart_itemCREATE TABLE cart_item (
    id          TEXT     PRIMARY KEY,        -- stored in cart_item table
    cart_id     TEXT     NOT NULL,           -- stored in cart_item table
    qty         INTEGER  NOT NULL,           -- stored in cart_item table
    created_at  DATETIME NOT NULL,           -- stored in cart_item table
    FOREIGN KEY (cart_id) REFERENCES cart(id) ON DELETE CASCADE
)'; indexsqlite_autoindex_cart_1cartyƒUtablecartcart
CREATE TABLE cart (
    id              TEXT     PRIMARY KEY,    -- stored in cart table
    created_at      DATETIME NOT NULL,       -- stored in cart table
    last_updated_at DATETIME NOT NULL        -- stored in cart table
)wA)indexidx_refresh_tokens_user_idrefresh_tokensCREATE INDEX idx_refresh_tokens_user_id ON refresh_tokens(user_id)b))‚tablelogin_attemptslogin_attemptsCREATE TABLE login_attempts(
	user_id INTEGER NOT NULL,
	attempt_count INTEGER DEFAULT 0,
	last_attempt DATETIME DEFAULT CURRENT_TIMESTAMP,
	FOREIGN KEY (user_id) REFERENCES users(id)
)CW1 indexsqlite_autoindex_blacklisted_tokens_1blacklisted_tokensJ11‚?tableblacklisted_tokensblacklisted_tokensCREATE TABLE blacklisted_tokens(
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	token TEXT NOT NULL UNIQUE,
	blacklisted_at DATETIME DEFAULT CURRENT_TIMESTAMP
);O) indexsqlite_autoindex_refresh_tokens_1refresh_tokensr))ƒtablerefresh_tokensrefresh_tokensCREATE TABLE refresh_tokens (
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	user_id INTEGER NOT NULL,
	token TEXT NOT NULL UNIQUE,
	expires_at DATETIME NOT NULL,
	FOREIGN KEY (user_id) REFERENCES users(id)
))= indexsqlite_autoindex_users_1usersutableusersusersCREATE TABLE users (
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	user_id TEXT NOT NULL UNIQUE,
	password TEXT NOT NULL
)‚{//…%tablebundle_componentsbundle_componentsCREATE TABLE bundle_components (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                product_id INTEGER NOT NULL,
                product_type TEXT NOT NULL,
                bundle_id INTEGER NOT NULL,
                qty INTEGER NOT NULL,
                FOREIGN KEY (product_id) REFERENCES products(id)
        )2‚;tablecontactcontactCREATE TABLE contact(
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT,
    email TEXT NOT NULL,
    message TEXT NOT NULL
, timestamp DATETIME)l##ƒtablecompatiblescompatiblesCREATE TABLE compatibles(
id INTEGER PRIMARY KEY AUTOINCREMENT,
gate_id INTEGER,
extension_id INTEGER,
FOREIGN KEY (gate_id) REFERENCES products(id),
FOREIGN KEY (extension_id) REFERENCES products(id))‚ƒ[tableproductsproductsCREATE TABLE products (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    type TEXT NOT NULL,
    name TEXT,
    width REAL,
    price REAL,
    img TEXT,
    tolerance REAL,
    color REAL
, inventory_level INTEGER NOT NULL DEFAULT 0)%%qtablebundle_sizesbundle_sizesCREATE TABLE bundle_sizes(
   id integer primary key autoincrement,
   type TEXT NOT NULL,
   size REAL NOT NULL
)P++Ytablesqlite_sequencesqlite_sequenceCREATE TABLE sqlite_sequence(name,seq)   ` µ`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    S 1seanom96@gmail.com$2a$10$CEmglC1YnhF5maog.UE/ceYUWQYbTbvQQzaD37Y9.nR6nflovirdyI 28347823$2a$10$G.pcuGEiQ5uCyFWQyfSbUuZwHEHGSAyyGlOyBKRTaEdebvNZjQ1xm ‚Î´ï‚¡¡                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            !cart_item_component bu	users
contactactÂ )	refresh_tokensproductså bundle_%bundle_sizes· cts   
      #compatibles
   Ý ôÝ                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 1seanom96@gmail.com	28347823   ¸† ìØÃ®š†r^J6"úæÒ¾ª–‚nZF2
öâÎº¦’~jVB.òÞÊ¶¢ŽzfR>*îÚÆ²žŠvbN:&
ý
é
Õ
Á
­
™
…
q
]
I
5
!
	ù	å	Ñ	¼	¨	”	€	l	X	D	0		óÞÊ¶¢ŽzfR=)íÙÅ±‰t_J6"úæÑ¼¨“kWC/óÝÈ³Ÿ‹wcO;'ÿë×Ã¯›‡s_K7#ûçÓ¿«—ƒoZE0òÞÊ¶¢ŽzfR>*ìØÄ¯›†              ‚v %pressure fit ‚u %pressure fitx‚t %pressure fit  ‚s %pressure fit}‚r %pressure fitx‚q %pressure fit œ‚p %pressure fit –‚o %pressure fit}‚n %pressure fitx‚m %pressure fitx‚l %pressure fitx‚k %pressure fitx‚j %pressure fitx‚i %pressure fitx‚h %pressure fitx‚g %pressure fitx‚f %pressure fitx‚e %pressure fitx‚d %pressure fit –‚c %pressure fit –‚b %pressure fit‚a %pressure fit –‚` %pressure fit †‚_ %pressure fit –‚^ %pressure fitx‚] %pressure fitx‚\ %pressure fitx‚[ %pressure fitx‚Z %pressure fitx‚Y %pressure fitx‚X %pressure fit}‚W %pressure fit}‚V %pressure fit}‚U %pressure fitx‚T %pressure fit}‚S %pressure fitx‚R %pressure fitx‚Q %pressure fitx‚P %pressure fitx‚O %pressure fitx‚N %pressure fitx‚M %pressure fitx‚L %pressure fitx‚K %pressure fitx‚J %pressure fitx‚I %pressure fitx‚H %pressure fitx‚G %pressure fitx‚F %pressure fitN‚E %pressure fitZ‚D %pressure fitY‚C %pressure fitd‚B %pressure fitx‚A %pressure fit^‚@ %pressure fit,‚? %pressure fitÕA‚> %pressure fitx‚= %pressure fitx‚< %pressure fitx‚; %pressure fitx‚: %pressure fitx‚9 %pressure fitx‚8 %pressure fit{‚7 %pressure fitx‚6 %pressure fit ’‚5 %pressure fit‚4 %pressure fit –‚3 %pressure fit ‚2 %pressure fit‚1 %pressure fit}‚0 %pressure fitx‚/ %pressure fitx‚. %pressure fitp‚- %pressure fit ‘‚, %pressure fit –‚+ %pressure fit –‚* %pressure fitx‚) %pressure fitx‚( %pressure fitx‚' %pressure fitx‚& %pressure fitx‚% %pressure fitz‚$ %pressure fit{‚# %pressure fitn‚" %pressure fit‚! %pressure fitW‚  %pressure fito‚ %pressure fitx‚ %pressure fitx‚ %pressure fitx‚ %pressure fitx‚ %pressure fitx‚ %pressure fitx‚ %pressure fit È‚ %pressure fitx‚ %pressure fit –‚ %pressure fitx‚ %pressure fitd‚ %pressure fit‚ %pressure fit~‚ %pressure fitx‚ %pressure fitx‚ %pressure fitd‚ %pressure fitp‚ %pressure fit`‚ %pressure fitd‚ %pressure fitd‚ %pressure fitx‚
 %pressure fit}‚	 %pressure fitx‚ %pressure fitx‚ %pressure fitd‚ %pressure fit{‚ %pressure fit{‚ %pressure fit{‚ %pressure fit{‚ %pressure fit{‚ %pressure fit{‚  %pressure fit{ %pressure fit}~ %pressure fit~} %pressure fitÒ| %pressure fit{ %pressure fityz %pressure fitzy %pressure fit}x %pressure fitxw %pressure fitxv %pressure fitu %pressure fitt %pressure fit}s %pressure fitxr %pressure fitxq %pressure fitxp %pressure fitxo %pressure fitxn %pressure fittm %pressure fittl %pressure fitxk %pressure fitxj %pressure fitli %pressure fitlh %pressure fitsg %pressure fitxf %pressure fitxe %pressure fitxd %pressure fitxc %pressure fitsb %pressure fitxa %pressure fitx` %pressure fitx_ %pressure fitx^ %pressure fitx] %pressure fitl\ %pressure fitl[ %pressure fitlZ %pressure fitlY %pressure fitxX %pressure fitxW %pressure fitxV %pressure fitxU %pressure fitxT %pressure fitxS %pressure fitxR %pressure fitxQ %pressure fitxP %pressure fitxO %pressure fitxN %pressure fitM %pressure fit}L %pressure fit}K %pressure fit}J %pressure fit}I %pressure fit}H %pressure fit}G %pressure fituF %pressure fituE %pressure fituD %pressure fituC %pressure fit{B %pressure fit ïA %pressure fit ï@ %pressure fit|? %pressure fit}   ô    úôžŠvbO<(ïÜÉ¶£}iUB.
øæÔÂ°žŒzhVC0
÷äÑ¾«˜†s`L8$ýéÖÃ°ŠwdQ>+
ñ
Ý
É
µ
¡

|
i
V
C
0


	ö	ã	Ð	½	ª	—	„	q	^	K	8	%	ÿìÙÆ³ yfS?,òßÌ¹¦’~kXE2ùæÓÀ­š‡s_K7$ýéÕÀ¬˜„p\H4
öáÍ¹¥‘}iU@+îÚÆ²žŠvbN:&þêÖÂ®š†r^J6!÷ãÏ»§“               > %pressure fit}= %pressure fit|< %pressure fit}; %pressure fit}: %pressure fit}9 %pressure fit –8 %pressure fit –7 %pressure fit –6 %pressure fit5 %pressure fity4 %pressure fit|3 %pressure fit|2 %pressure fit|1 %pressure fit}0 %pressure fit}/ %pressure fit}. %pressure fit}- %pressure fit}, %pressure fit|+ %pressure fit~* %pressure fit}) %pressure fit}( %pressure fit}' %pressure fit}& %pressure fit}% %pressure fit}$ %pressure fit}# %pressure fit}" %pressure fit}! %pressure fit}  %pressure fit} %pressure fit ‚ %pressure fit} %pressure fit È %pressure fit ‚ %pressure fit} %pressure fit} %pressure fit} %pressure fit} %pressure fit} %pressure fit} %pressure fit} %pressure fit ‡ %pressure fit %pressure fit %pressure fit ‚ %pressure fit} %pressure fit} %pressure fit} %pressure fit| %pressure fit| %pressure fit}
 %pressure fit}	 %pressure fitÛ %pressure fit} %pressure fit} %pressure fit} %pressure fit %pressure fit %pressure fit~ %pressure fit} %pressure fit}  %pressure fit} %pressure fit}~ %pressure fit}} %pressure fit}| %pressure fit|{ %pressure fit}z %pressure fit{y %pressure fit{x %pressure fit}w %pressure fit{v %pressure fit|u %pressure fitt %pressure fit}s %pressure fit|r %pressure fit €q %pressure fit €p %pressure fit}o %pressure fit}n %pressure fit}m %pressure fitpl %pressure fitBk %pressure fit,j %pressure fit}i %pressure fit{h %pressure fit ‚g %pressure fit}f %pressure fit{e %pressure fit d %pressure fit}c %pressure fit}b %pressure fit}a %pressure fit}` %pressure fit}_ %pressure fitm^ %pressure fits] %pressure fit}\ %pressure fit}[ %pressure fit}Z %pressure fit{Y %pressure fit{X %pressure fit{W %pressure fit|V %pressure fit{U %pressure fit{T %pressure fitS %pressure fit|R %pressure fit{Q %pressure fit úP %pressure fitxO %pressure fitxN %pressure fitxM %pressure fitxL %pressure fitK %pressure fitJ %pressure fit|I %pressure fitH %pressure fit ˜G %pressure fit ‰F %pressure fit ˆE %pressure fit ‚D %pressure fit €C %pressure fit}B %pressure fitA %pressure fitx@ %pressure fiti? %pressure fit{> %pressure fit{= %pressure fit{< %pressure fit{; %pressure fit{: %pressure fit{9 %pressure fit{8 %pressure fit{7 %pressure fit Þ6 %pressure fitz5 %pressure fit ¦4 %pressure fit ›3 %pressure fit ›2 %pressure fit –1 %pressure fit~0 %pressure fit{/ %pressure fit. %pressure fit{- %pressure fit{, %pressure fit{+ %pressure fitx* %pressure fit|) %pressure fit|( %pressure fit}' %pressure fit& %pressure fit% %pressure fit|$ %pressure fit# %pressure fit" %pressure fit! %pressure fit  %pressure fit %pressure fit %pressure fit %pressure fit %pressure fit %pressure fit %pressure fit %pressure fit %pressure fit ª %pressure fit{ %pressure fit ‘ %pressure fit › %pressure fit{ %pressure fit{ %pressure fit{ %pressure fit{ %pressure fitd %pressure fit| %pressure fit| %pressure fit} %pressure fit} %pressure fitù
 %pressure fit	 %pressure fit| %pressure fit Š %pressure fit Š %pressure fit ‡ %pressure fit ‡ %pressure fit  %pressure fit  %pressure fit} %p   ‚v   	>j 
 ©Nô™>ä‰­‚                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     U
 g/gateBabyDan Premier True Pressure Fit Safety GateLL/images/gate.webpwhite
   C/bundleBabyDan Premier True Pressure Fit Safety Gate andl /bundleBabyDan Premier True Pressure Fit Safety Gate and 4 extensions.  /images/gate.webpblack
l /bundleBabyDan Premier True Pressure Fit Safety Gate and 4 extensions.  /images/gate.webpwhite
Y
 UAextensionBabyDan Premier Gate Extension Small/images/smallExtension.jpgblack
X
 W=extensionBabydan Premier Gate Extension Medium  /images/medExtension.jpgblack
Y
 UAextensionBabyDan Premier Gate Extension Large@@/images/largeExtension.jpgblack
Y
 UAextensionBabyDan Premier Gate Extension Small/images/smallExtension.jpgwhite
X
 W=extensionBabydan Premier Gate Extension Medium  /images/medExtension.jpgwhite
Y
 UAextensionBabyDan Premier Gate Extension Large@@/images/largeExtension.jpgwhite
U
 g/gateBabyDan Premier True Pressure Fit Safety GateLL/images/gate.webpblack
   Ó ùòëãÛÓ                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   	 	 	   ¾“ íÚÆ²žŠvbO<(ïÜÉ¶£}iUB.
øæÔÂ°žŒzhVC0
÷äÑ¾«˜†s`L8$ýéÖÃ°ŠwdQ>+
ñ
Ý
É
µ
¡

|
i
V
C
0


	ö	ã	Ð	½	ª	—	„	q	^	K	8	%	ÿìÙÆ³ yfS?,òßÌ¹¦’~kXE2ùæÓÀ­š‡s_K7$ýéÕÀ¬˜„p\H4
öáÍ¹¥‘}iU@+îÚÆ²žŠvbN:&þêÖÂ®š†r^J6!÷ãÏ»§“               > %pressure fit}= %pressure fit|< %pressure fit}; %pressure fit}: %pressure fit}9 %pressure fit –8 %pressure fit –7 %pressure fit –6 %pressure fit5 %pressure fity4 %pressure fit|3 %pressure fit|2 %pressure fit|1 %pressure fit}0 %pressure fit}/ %pressure fit}. %pressure fit}- %pressure fit}, %pressure fit|+ %pressure fit~* %pressure fit}) %pressure fit}( %pressure fit}' %pressure fit}& %pressure fit}% %pressure fit}$ %pressure fit}# %pressure fit}" %pressure fit}! %pressure fit}  %pressure fit} %pressure fit ‚ %pressure fit} %pressure fit È %pressure fit ‚ %pressure fit} %pressure fit} %pressure fit} %pressure fit} %pressure fit} %pressure fit} %pressure fit} %pressure fit ‡ %pressure fit %pressure fit %pressure fit ‚ %pressure fit} %pressure fit} %pressure fit} %pressure fit| %pressure fit| %pressure fit}
 %pressure fit}	 %pressure fitÛ %pressure fit} %pressure fit} %pressure fit} %pressure fit %pressure fit %pressure fit~ %pressure fit} %pressure fit}  %pressure fit} %pressure fit}~ %pressure fit}} %pressure fit}| %pressure fit|{ %pressure fit}z %pressure fit{y %pressure fit{x %pressure fit}w %pressure fit{v %pressure fit|u %pressure fitt %pressure fit}s %pressure fit|r %pressure fit €q %pressure fit €p %pressure fit}o %pressure fit}n %pressure fit}m %pressure fitpl %pressure fitBk %pressure fit,j %pressure fit}i %pressure fit{h %pressure fit ‚g %pressure fit}f %pressure fit{e %pressure fit d %pressure fit}c %pressure fit}b %pressure fit}a %pressure fit}` %pressure fit}_ %pressure fitm^ %pressure fits] %pressure fit}\ %pressure fit}[ %pressure fit}Z %pressure fit{Y %pressure fit{X %pressure fit{W %pressure fit|V %pressure fit{U %pressure fit{T %pressure fitS %pressure fit|R %pressure fit{Q %pressure fit úP %pressure fitxO %pressure fitxN %pressure fitxM %pressure fitxL %pressure fitK %pressure fitJ %pressure fit|I %pressure fitH %pressure fit ˜G %pressure fit ‰F %pressure fit ˆE %pressure fit ‚D %pressure fit €C %pressure fit}B %pressure fitA %pressure fitx@ %pressure fiti? %pressure fit{> %pressure fit{= %pressure fit{< %pressure fit{; %pressure fit{: %pressure fit{9 %pressure fit{8 %pressure fit{7 %pressure fit Þ6 %pressure fitz5 %pressure fit ¦4 %pressure fit ›3 %pressure fit ›2 %pressure fit –1 %pressure fit~0 %pressure fit{/ %pressure fit. %pressure fit{- %pressure fit{, %pressure fit{+ %pressure fitx* %pressure fit|) %pressure fit|( %pressure fit}' %pressure fit& %pressure fit% %pressure fit|$ %pressure fit# %pressure fit" %pressure fit! %pressure fit  %pressure fit %pressure fit %pressure fit %pressure fit %pressure fit %pressure fit %pressure fit %pressure fit %pressure fit ª %pressure fit{ %pressure fit ‘ %pressure fit › %pressure fit{ %pressure fit{ %pressure fit{ %pressure fit{ %pressure fitd %pressure fit| %pressure fit| %pressure fit} %pressure fit} %pressure fitù
 %pressure fit	 %pressure fit| %pressure fit Š %pressure fit Š %pressure fit ‡ %pressure fit ‡ %pressure fit  %pressure fit  %pressure fit} %pressure fit{                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          nUSS861b9ef1-5b59-4268-9840-30070d43a1152025-04-18 17:27:38.339199728+01:002025-04-18 17:48:41.182549912+01:00
   ñ ñÅÅÅÅÅâØ¹ì>gš                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    (Ue7d259c8-eca1-44ec-a7d6-b9fcec5d2809(U9779513d-34f7-4b7c-be2e-7bb1796c2ea4(Udbf7adcc-3dbd-4463-90aa-8fd04d9ff732(U0cc6dc57-218a-48fa-9f34-4202071338c8(Ude0c904a-829c-4dee-a5fc-40429863fc02(Ue69f4261-110b-44c0-b38a-a1cf375294ad
(Uddb1b5ba-dc64-4b95-8155-85f6b6755022	(Udbc5c208-11b8-40eb-9afa-c46ecc1bb8b1(U9cc5bf22-ab9c-46b5-a18f-c2ec17be700e(Ucf6086fc-fbf3-4a6b-bcba-7ece8713dc38(U76d200e3-35e0-4fed-a484-285d20c64552(U450ef5ba-7b9f-4b45-bbd5-42ef67f882ee(U8b533dd7-010a-4c3e-8594-e10bfc785603(U796ca4af-a347-443e4-1   $3-1   2-1   1-1   1-1_5-1#	1-1_4-1_5-2
   Ø Ø                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              'U	861b9ef1-5b59-4268-9840-30070d43a115R øø                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 OU	S4-1861b9ef1-5b59-4268-9840-30070d43a1152025-04-18 17:48:41.139160496+01:00R ¢U	S3-1861b9ef1-5b59-4268-9840-30070d43a1152025-04-18 17:48:39.715180747+01:00R QU	S2-1861b9ef1-5b59-4268-9840-30070d43a1152025-04-18 17:48:34.455590267+01:00W#U	S1-1_4-1_5-2861b9ef1-5b59-4268-9840-30070d43a1152025-04-18 17:30:49.674611981+01:000   ®U	S1-1_5-1861b9ef1-5b59-4268-9840-30070d43a1152025-04-18 17:31:47.022396402+01:00   U	S1OU	S1-1861b9ef1-5b59-4268-9840-30070d43a1152025-04-18 17:48:20.022324212+01:00      !                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       \ 	‚wOeyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE3NDQ5ODgyNzQsImp0aSI6IjI2NmM5OTVjLThhYmEtNGIxMi1iZjJiLWE2OTgyMjRiOWY2MyJ9.18fJvBj7y2VVJyp86olS9KBRnHvSlYlTxvlCJXvU3bg2025-04-18 15:57:54.7835506+01:00
      E                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           9‚w	eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE3NDQ5ODgyNzQsImp0aSI6IjI2NmM5OTVjLThhYmEtNGIxMi1iZjJiLWE2OTgyMjRiOWY2MyJ9.18fJvBj7y2VVJyp86olS9KBRnHvSlYlTxvlCJXvU3bg   ^ ±^                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Q -9OSena@example.comSeani have another message2024-07-22 12:52:07.7690736+01:00M -1Oseam@example.comSeami have a message
2024-07-22 12:49:27.6901816+01:00                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 A
¿ ìØÃ®™„o[G3
õàË¶¢ŽzfQ<'ýèÓ¾©”jU@+ì×Â­™„oZE0ñÜÇ³Ÿ‹vaL8#
û
ç
Ó
¿                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     ƒ7 %pressure fitxƒ6 %pressure fitxƒ5 %pressure fitxƒ4 %pressure fitxƒ3 %pressure fitxƒ2 %pressure fit ›ƒ1 %pressure fitxƒ0 %pressure fit  ƒ/ %pressure fit ›ƒ. %pressure fit ›ƒ- %pressure fitxƒ, %pressure fitxƒ+ %pressure fitxƒ* %pressure fit ‚ƒ) %pressure fit ‚ƒ( %pressure fit ‚ƒ' %pressure fit ‚ƒ& %pressure fit ‚ƒ% %pressure fit ‚ƒ$ %pressure fit ‚ƒ# %pressure fit ‚ƒ" %pressure fit ‚ƒ! %pressure fit ‚ƒ  %pressure fit}ƒ %pressure fit,ƒ %pressure fit,ƒ %pressure fit ‚ƒ %pressure fit,ƒ %pressure fit ´ƒ %pressure fit ¯ƒ %pressure fit ›ƒ %pressure fit ‚ƒ %pressure fit ‚ƒ %pressure fit ‚ƒ %pressure fit ‚ƒ %pressure fit ‚ƒ %pressure fit ‚ƒ %pressure fit ‚ƒ %pressure fit ‚ƒ %pressure fit ‚ƒ %pressure fit ‚ƒ %pressure fit ‚ƒ %pressure fit ‚ƒ %pressure fit ‚ƒ %pressure fit ‚ƒ
 %pressure fitxƒ	 %pressure fitxƒ %pressure fitxƒ %pressure fitxƒ %pressure fit ‚ƒ %pressure fit ‚ƒ %pressure fit ‚ƒ %pressure fit ‚ƒ %pressure fit ‚ƒ %pressure fit}ƒ  %pressure fit}‚ %pressure fit}‚~ %pressure fit}‚} %pressure fit ý‚| %pressure fit ë‚{ %pressure fit ý‚z %pressure fit ý‚y %pressure fit ý‚x %pressure fit{‚w %pressure fit}
                                 Š§5ÃQÝjö‚š&²> Ê V        r9UU	Sa3cdab9d-7e1a-4189-8226-aa38426038874c07dfaf-345a-4fa6-a655-d769bc8c29e22024-07-20 10:42:03.628774544+01:00r8UU	Se155f70a-73ff-4089-a3e7-88534f00f2f54c07dfaf-345a-4fa6-a655-d769bc8c29e22024-07-20 10:42:03.439513555+01:00r7UU	S32542010-9b1a-4bed-8d12-b5b34e07e49d4c07dfaf-345a-4fa6-a655-d769bc8c29e22024-07-20 10:42:03.279703078+01:00r6UU	S922eba8e-9606-426a-a470-444408dda3cc4c07dfaf-345a-4fa6-a655-d769bc8c29e22024-07-20 10:42:03.106758536+01:00r5UU	S791f5f74-7dd5-41e0-aacf-91717e9edc624c07dfaf-345a-4fa6-a655-d769bc8c29e22024-07-20 10:42:02.964372182+01:00r4UU	S846c0206-e2f3-44ee-9825-b2eb9c53f9b14c07dfaf-345a-4fa6-a655-d769bc8c29e22024-07-20 10:42:02.349737969+01:00r3UU	S04c43e98-2c20-4e04-87bf-5fd3c9950ebb4c07dfaf-345a-4fa6-a655-d769bc8c29e22024-07-20 10:42:02.160891039+01:00r2UU	S4024f233-a156-42e4-b6fb-a70f21b53cab4c07dfaf-345a-4fa6-a655-d769bc8c29e22024-07-20 10:42:01.994228337+01:00r1UU	Sbd16dcfc-df41-4768-b4f4-09b153d2dd794c07dfaf-345a-4fa6-a655-d769bc8c29e22024-07-20 10:42:01.846016509+01:00q0UU	Q9819901d-745c-4dd0-a7e1-7487391acd1f4c07dfaf-345a-4fa6-a655-d769bc8c29e22024-07-20 10:42:01.17949097+01:00r/UU	Sb5274ca2-472c-4ce2-9c0d-86793fa01ff94c07dfaf-345a-4fa6-a655-d769bc8c29e22024-07-20 10:42:00.991349529+01:00pUU	Oc4de3294-7f12-493b-b546-bac62337f09633976e79-1000-4903-be4a-4355c2d6749c2024-07-19 11:10:15.3742524+01:00pUU	O54f59cb0-0030-48ba-9bf1-37294d13dfce33976e79-1000-4903-be4a-4355c2d6749c2024-07-19 11:10:15.2228145+01:00pUU	O328c57fc-9e37-401e-a523-49653f21b7d033976e79-1000-4903-be4a-4355c2d6749c2024-07-19 11:10:14.1017312+01:00oUU	M982e7a34-f86b-4a83-b5b9-34d5d8cbcb5833976e79-1000-4903-be4a-4355c2d6749c2024-07-19 11:10:13.942691+01:00pUU	Oa0a42e5c-9601-40bc-83ce-62771ac4244433976e79-1000-4903-be4a-4355c2d6749c2024-07-19 11:10:13.5435999+01:00pUU	O5e43ad44-536c-405c-8802-1a4b0893abfd33976e79-1000-4903-be4a-4355c2d6749c2024-07-19 10:59:47.7612415+01:00pUU	O10b20e2e-f264-4569-8e05-0bf527034d3433976e79-1000-4903-be4a-4355c2d6749c2024-07-19 10:59:47.4327493+01:00pUU	Odbb57f68-8174-4ac5-ba0b-ec13d996572833976e79-1000-4903-be4a-4355c2d6749c2024-07-19 10:59:46.3521472+01:00pUU	Of0c3b045-7c65-46b5-bc6b-fd36a0aee92d33976e79-1000-4903-be4a-4355c2d6749c2024-07-19 10:59:45.1367467+01:00pUU	Ocd8b2f60-a7f0-40d0-bce4-937581418a2133976e79-1000-4903-be4a-4355c2d6749c2024-07-19 10:59:43.4088027+01:00pUU	O82bff2de-28eb-4f38-a95a-5a43fb6f3bdf33976e79-1000-4903-be4a-4355c2d6749c2024-07-19 10:56:33.9561382+01:00rUU	S4a703ba0-de1b-4992-9843-3a8c4f12a7c1404523fc-4e63-438f-9550-aacacc3c0a9b2024-07-17 19:54:12.286435823+01:00pUU	O08f5e3d5-3faf-4ff0-a3f3-93488ed4d9f233976e79-1000-4903-be4a-4355c2d6749c2024-07-17 15:37:18.1571331+01:00pUU	O7ae7b8d7-e44e-4900-b9de-16da1eb9e99d33976e79-1000-4903-be4a-4355c2d6749c2024-07-17 15:37:17.9985559+01:00o
UU	Ma6622dee-12ac-4bf2-b21f-ce47fb07fe4033976e79-1000-4903-be4a-4355c2d6749c2024-07-17 15:37:08.735975+01:00p	UU	Oa2ba3f0c-6d0c-4b8f-870d-cb96ec836b6b33976e79-1000-4903-be4a-4355c2d6749c2024-07-17 15:30:41.5044275+01:00pUU	O23dd16ea-ef14-49f5-9e6f-3a50938f1c0a33976e79-1000-4903-be4a-4355c2d6749c2024-07-17 15:29:34.5470358+01:00oUU	M6dd8a6db-05e5-4165-982c-544df8d6917433976e79-1000-4903-be4a-4355c2d6749c2024-07-17 15:28:59.532638+01:00pUU	O16e0d7d4-13fc-4097-b9be-06180f762bc3112dd6ef-a2b9-4b82-a756-cf38fc4e381e2024-07-17 15:26:23.5954991+01:00pUU	O6ee2d59a-1435-4b1a-9316-80b2d960022adfc274d3-794e-449d-970e-b292da3b488b2024-07-17 15:17:22.6565618+01:00pUU	O6492fc30-6612-44b2-a6c2-34ab41cef8dedfc274d3-794e-449d-970e-b292da3b488b2024-07-17 15:16:45.0194534+01:00pUU	O420a6e92-d2e4-46e3-b031-354366738643dfc274d3-794e-449d-970e-b292da3b488b2024-07-17 15:05:40.0378977+01:00pUU	Oeacdbbbe-d70e-46ba-b934-670074861ab9dfc274d3-794e-449d-970e-b292da3b488b2024-07-17 15:05:18.6412119+01:00pUU	O7d11bae3-1462-41e8-82c1-ae31a1c8f355dfc274d3-794e-449d-970e-b292da3b488b2024-07-17 14:45:21.2741463+01:00                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
      ü                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  		   	ö ¥Jî—@í›Iö                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Q	U	S4-1861b9ef1-5b59-4268-9840-30070d43a11542025-04-18 17:48:41.139132568+01:00PU	Q3-1861b9ef1-5b59-4268-9840-30070d43a11532025-04-18 17:48:39.71515392+01:00PU	Q2-1861b9ef1-5b59-4268-9840-30070d43a11522025-04-18 17:48:34.45547095+01:00QU	S1-1861b9ef1-5b59-4268-9840-30070d43a11512025-04-18 17:48:20.021980159+01:00UU	S1-1_5-1861b9ef1-5b59-4268-9840-30070d43a11552025-04-18 17:31:47.022391153+01:00UU	S1-1_5-1861b9ef1-5b59-4268-9840-30070d43a11512025-04-18 17:31:47.022364241+01:00Z#US1-1_4-1_5-2861b9ef1-5b59-4268-9840-30070d43a11552025-04-18 17:30:49.674601122+01:00Y#U	S1-1_4-1_5-2861b9ef1-5b59-4268-9840-30070d43a11542025-04-18 17:30:49.674591004+01:00Y#U	S1-1_4-1_5-2861b9ef1-5b59-4268-9840-30070d43a11512025-04-18 17:30:49.674506624+01:00
   	‡ ¥ïÝË½¯›‘‡                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             	4-14		3-13	2-12	1-111-1_5-151-1_5-11#1-1_4-1_5-25#1-1_4-1_5-24#	1-1_4-1_5-21```

---

## File: ./tsconfig.json

```
{
  "compilerOptions": {
    /* Visit https://aka.ms/tsconfig to read more about this file */

    /* Projects */
    // "incremental": true,                              /* Save .tsbuildinfo files to allow for incremental compilation of projects. */
    // "composite": true,                                /* Enable constraints that allow a TypeScript project to be used with project references. */
    // "tsBuildInfoFile": "./.tsbuildinfo",              /* Specify the path to .tsbuildinfo incremental compilation file. */
    // "disableSourceOfProjectReferenceRedirect": true,  /* Disable preferring source files instead of declaration files when referencing composite projects. */
    // "disableSolutionSearching": true,                 /* Opt a project out of multi-project reference checking when editing. */
    // "disableReferencedProjectLoad": true,             /* Reduce the number of projects loaded automatically by TypeScript. */

    /* Language and Environment */
    "target": "es2016",                                  /* Set the JavaScript language version for emitted JavaScript and include compatible library declarations. */
    // "lib": [],                                        /* Specify a set of bundled library declaration files that describe the target runtime environment. */
    // "jsx": "preserve",                                /* Specify what JSX code is generated. */
    // "experimentalDecorators": true,                   /* Enable experimental support for TC39 stage 2 draft decorators. */
    // "emitDecoratorMetadata": true,                    /* Emit design-type metadata for decorated declarations in source files. */
    // "jsxFactory": "",                                 /* Specify the JSX factory function used when targeting React JSX emit, e.g. 'React.createElement' or 'h'. */
    // "jsxFragmentFactory": "",                         /* Specify the JSX Fragment reference used for fragments when targeting React JSX emit e.g. 'React.Fragment' or 'Fragment'. */
    // "jsxImportSource": "",                            /* Specify module specifier used to import the JSX factory functions when using 'jsx: react-jsx*'. */
    // "reactNamespace": "",                             /* Specify the object invoked for 'createElement'. This only applies when targeting 'react' JSX emit. */
    // "noLib": true,                                    /* Disable including any library files, including the default lib.d.ts. */
    // "useDefineForClassFields": true,                  /* Emit ECMAScript-standard-compliant class fields. */
    // "moduleDetection": "auto",                        /* Control what method is used to detect module-format JS files. */

    /* Modules */
    "module": "commonjs",                                /* Specify what module code is generated. */
    "rootDir": "./assets/ts/",                                  /* Specify the root folder within your source files. */
    // "moduleResolution": "node",                       /* Specify how TypeScript looks up a file from a given module specifier. */
    // "baseUrl": "./",                                  /* Specify the base directory to resolve non-relative module names. */
    // "paths": {},                                      /* Specify a set of entries that re-map imports to additional lookup locations. */
    // "rootDirs": [],                                   /* Allow multiple folders to be treated as one when resolving modules. */
    // "typeRoots": [],                                  /* Specify multiple folders that act like './node_modules/@types'. */
    // "types": [],                                      /* Specify type package names to be included without being referenced in a source file. */
    // "allowUmdGlobalAccess": true,                     /* Allow accessing UMD globals from modules. */
    // "moduleSuffixes": [],                             /* List of file name suffixes to search when resolving a module. */
    // "resolveJsonModule": true,                        /* Enable importing .json files. */
    // "noResolve": true,                                /* Disallow 'import's, 'require's or '<reference>'s from expanding the number of files TypeScript should add to a project. */

    /* JavaScript Support */
    // "allowJs": true,                                  /* Allow JavaScript files to be a part of your program. Use the 'checkJS' option to get errors from these files. */
    // "checkJs": true,                                  /* Enable error reporting in type-checked JavaScript files. */
    // "maxNodeModuleJsDepth": 1,                        /* Specify the maximum folder depth used for checking JavaScript files from 'node_modules'. Only applicable with 'allowJs'. */

    /* Emit */
    // "declaration": true,                              /* Generate .d.ts files from TypeScript and JavaScript files in your project. */
    // "declarationMap": true,                           /* Create sourcemaps for d.ts files. */
    // "emitDeclarationOnly": true,                      /* Only output d.ts files and not JavaScript files. */
    // "sourceMap": true,                                /* Create source map files for emitted JavaScript files. */
    // "outFile": "./",                                  /* Specify a file that bundles all outputs into one JavaScript file. If 'declaration' is true, also designates a file that bundles all .d.ts output. */
    "outDir": "./assets/js/",                                   /* Specify an output folder for all emitted files. */
    // "removeComments": true,                           /* Disable emitting comments. */
    // "noEmit": true,                                   /* Disable emitting files from a compilation. */
    // "importHelpers": true,                            /* Allow importing helper functions from tslib once per project, instead of including them per-file. */
    // "importsNotUsedAsValues": "remove",               /* Specify emit/checking behavior for imports that are only used for types. */
    // "downlevelIteration": true,                       /* Emit more compliant, but verbose and less performant JavaScript for iteration. */
    // "sourceRoot": "",                                 /* Specify the root path for debuggers to find the reference source code. */
    // "mapRoot": "",                                    /* Specify the location where debugger should locate map files instead of generated locations. */
    // "inlineSourceMap": true,                          /* Include sourcemap files inside the emitted JavaScript. */
    // "inlineSources": true,                            /* Include source code in the sourcemaps inside the emitted JavaScript. */
    // "emitBOM": true,                                  /* Emit a UTF-8 Byte Order Mark (BOM) in the beginning of output files. */
    // "newLine": "crlf",                                /* Set the newline character for emitting files. */
    // "stripInternal": true,                            /* Disable emitting declarations that have '@internal' in their JSDoc comments. */
    // "noEmitHelpers": true,                            /* Disable generating custom helper functions like '__extends' in compiled output. */
    // "noEmitOnError": true,                            /* Disable emitting files if any type checking errors are reported. */
    // "preserveConstEnums": true,                       /* Disable erasing 'const enum' declarations in generated code. */
    // "declarationDir": "./",                           /* Specify the output directory for generated declaration files. */
    // "preserveValueImports": true,                     /* Preserve unused imported values in the JavaScript output that would otherwise be removed. */

    /* Interop Constraints */
    // "isolatedModules": true,                          /* Ensure that each file can be safely transpiled without relying on other imports. */
    // "allowSyntheticDefaultImports": true,             /* Allow 'import x from y' when a module doesn't have a default export. */
    "esModuleInterop": true,                             /* Emit additional JavaScript to ease support for importing CommonJS modules. This enables 'allowSyntheticDefaultImports' for type compatibility. */
    // "preserveSymlinks": true,                         /* Disable resolving symlinks to their realpath. This correlates to the same flag in node. */
    "forceConsistentCasingInFileNames": true,            /* Ensure that casing is correct in imports. */

    /* Type Checking */
    "strict": true,                                      /* Enable all strict type-checking options. */
    // "noImplicitAny": true,                            /* Enable error reporting for expressions and declarations with an implied 'any' type. */
    // "strictNullChecks": true,                         /* When type checking, take into account 'null' and 'undefined'. */
    // "strictFunctionTypes": true,                      /* When assigning functions, check to ensure parameters and the return values are subtype-compatible. */
    // "strictBindCallApply": true,                      /* Check that the arguments for 'bind', 'call', and 'apply' methods match the original function. */
    // "strictPropertyInitialization": true,             /* Check for class properties that are declared but not set in the constructor. */
    // "noImplicitThis": true,                           /* Enable error reporting when 'this' is given the type 'any'. */
    // "useUnknownInCatchVariables": true,               /* Default catch clause variables as 'unknown' instead of 'any'. */
    // "alwaysStrict": true,                             /* Ensure 'use strict' is always emitted. */
    // "noUnusedLocals": true,                           /* Enable error reporting when local variables aren't read. */
    // "noUnusedParameters": true,                       /* Raise an error when a function parameter isn't read. */
    // "exactOptionalPropertyTypes": true,               /* Interpret optional property types as written, rather than adding 'undefined'. */
    // "noImplicitReturns": true,                        /* Enable error reporting for codepaths that do not explicitly return in a function. */
    // "noFallthroughCasesInSwitch": true,               /* Enable error reporting for fallthrough cases in switch statements. */
    // "noUncheckedIndexedAccess": true,                 /* Add 'undefined' to a type when accessed using an index. */
    // "noImplicitOverride": true,                       /* Ensure overriding members in derived classes are marked with an override modifier. */
    // "noPropertyAccessFromIndexSignature": true,       /* Enforces using indexed accessors for keys declared using an indexed type. */
    // "allowUnusedLabels": true,                        /* Disable error reporting for unused labels. */
    // "allowUnreachableCode": true,                     /* Disable error reporting for unreachable code. */

    /* Completeness */
    // "skipDefaultLibCheck": true,                      /* Skip type checking .d.ts files that are included with TypeScript. */
    "skipLibCheck": true                                 /* Skip type checking all .d.ts files. */
  }
}
```

---

## File: ./cmd/server/main.go

```
package main

import (
	"bytes"
	"context"
	"database/sql"
	"encoding/json"
	"errors"
	"fmt"
	"log"
	"net/http"
	"os"
	"os/signal"
	"regexp"
	"sort"
	"strconv"
	"syscall"
	"text/template"
	"time"

	"github.com/gorilla/sessions"
	"github.com/joho/godotenv"
	_ "github.com/mattn/go-sqlite3"
	"github.com/seanomeara96/auth"
	"github.com/seanomeara96/gates/cachedrepos"
	"github.com/seanomeara96/gates/models"
	"github.com/seanomeara96/gates/repos"
	"github.com/stripe/stripe-go/v81"
	"github.com/stripe/stripe-go/v81/checkout/session"
	"golang.org/x/text/cases"
	"golang.org/x/text/language"
)

type Environment string
type customHandleFunc func(cart *models.Cart, w http.ResponseWriter, r *http.Request) error
type middlewareFunc func(next customHandleFunc) customHandleFunc
type customHandler func(path string, fn customHandleFunc)

const (
	Development Environment = "development"
	Production  Environment = "production"
)

type config struct {
	Port                 string
	Mode                 Environment
	DBPath               string
	CookieStoreSecretKey string
	AdminUserID          string
	AdminUserPassword    string
	JWTSecretKey         string
}

func configEnv() (*config, error) {

	var config config
	var errs []error

	config.Port = os.Getenv("PORT")
	if config.Port == "" {
		errs = append(errs, errors.New("env PORT value not set in env"))
	}

	config.Mode = Environment(os.Getenv("MODE"))
	if config.Mode != Development && config.Mode != Production {
		errs = append(errs, errors.New("env MODE not set in env"))
	}

	config.DBPath = os.Getenv("DB_FILE_PATH")
	if config.DBPath == "" {
		config.DBPath = "main.db"
	}

	config.AdminUserID = os.Getenv("ADMIN_USER_ID")
	if config.AdminUserID == "" {
		errs = append(errs, errors.New("env ADMIN_USER_ID not set"))
	}

	config.AdminUserPassword = os.Getenv("ADMIN_USER_PASSWORD")
	if config.AdminUserPassword == "" {
		errs = append(errs, errors.New("env ADMIN_USER_PASSWORD not set"))
	}

	stripe.Key = os.Getenv("STRIPE_API_KEY")

	config.CookieStoreSecretKey = os.Getenv("COOKIE_SECRET")
	if config.CookieStoreSecretKey == "" {
		errs = append(errs, errors.New("env COOKIE_SECRET not set"))
	}

	config.JWTSecretKey = os.Getenv("JWT_SECRET_KEY")
	if config.JWTSecretKey == "" {
		errs = append(errs, errors.New("env JWT_SECRET_KEY not set"))
	}

	if len(errs) > 0 {
		var err = errors.New("env config err(s)")
		for _, e := range errs {
			err = fmt.Errorf("%w|%w", err, e)
		}
		return nil, err
	}

	return &config, nil
}

func configCookieStore(config *config) (*sessions.CookieStore, error) {

	if config.CookieStoreSecretKey == "" {
		if config.Mode == Development {
			config.CookieStoreSecretKey = "suprSecrtStoreKey"
		} else {
			return nil, errors.New("cookie secret not set in env")
		}
	}
	return sessions.NewCookieStore([]byte(config.CookieStoreSecretKey)), nil
}

func app() error {

	if err := godotenv.Load(); err != nil {
		return err
	}

	config, err := configEnv()
	if err != nil {
		return err
	}

	db := SqliteOpen(config.DBPath)
	defer db.Close()

	authConfig := auth.AuthConfig{DB: db, JWTSecretKey: config.JWTSecretKey}

	auth, err := auth.Init(authConfig)
	if err != nil {
		return err
	}

	auth.Register(context.Background(), config.AdminUserID, config.AdminUserPassword)

	productRepo := repos.NewProductRepo(db)
	productCache := cachedrepos.NewCachedProductRepo(productRepo)

	cartRepo := repos.NewCartRepo(db, productCache)

	store, err := configCookieStore(config)
	if err != nil {
		return err
	}

	tmpl := templateParser(config.Mode)
	renderPage := NewPageRenderer(tmpl)
	renderPartial := NewPartialRenderer(tmpl)

	router := http.NewServeMux()
	getCartFromRequest := NewCartFromSessionGetter(cartRepo, productCache, store)
	// ROUTING LOGIC
	// middleware executed in reverse order; i = 0 executes last
	middleware := []middlewareFunc{
		// Example for middleware usage:
	}

	handle := createCustomHandler(config.Mode, router, middleware, getCartFromRequest)

	handle.get("/admin/login", func(cart *models.Cart, w http.ResponseWriter, r *http.Request) error {
		accessToken, refreshToken, _ := auth.GetTokensFromRequest(r)

		_, err = auth.ValidateToken(accessToken)
		if err == nil {
			accessToken, refreshToken, err = auth.Refresh(r.Context(), refreshToken)
			if err != nil {
				return err
			}
			auth.SetTokens(w, accessToken, refreshToken)
			http.Redirect(w, r, "/admin", http.StatusTemporaryRedirect)
			return nil
		}

		data := map[string]any{
			"PageTitle":       "Home Page",
			"MetaDescription": "Welcome to the home page",

			"Cart": cart,
			"Env":  config.Mode,
		}

		return renderPage(w, "admin-login", data)
	})

	handle.post("/admin/login", func(cart *models.Cart, w http.ResponseWriter, r *http.Request) error {
		if err := r.ParseForm(); err != nil {
			return err
		}

		accessToken, refreshToken, err := auth.Login(r.Context(), r.Form.Get("user_id"), r.Form.Get("password"))
		if err != nil {
			return err
		}
		auth.SetTokens(w, accessToken, refreshToken)

		http.Redirect(w, r, "/admin", http.StatusTemporaryRedirect)
		return nil
	})

	handle.get("/admin", func(cart *models.Cart, w http.ResponseWriter, r *http.Request) error {

		accessToken, refreshToken, err := auth.GetTokensFromRequest(r)
		if err != nil {
			return err
		}

		_, err = auth.ValidateToken(accessToken)
		if err != nil {
			return err
		}

		accessToken, refreshToken, err = auth.Refresh(r.Context(), refreshToken)
		if err != nil {
			return err
		}
		auth.SetTokens(w, accessToken, refreshToken)

		data := map[string]any{
			"PageTitle":       "Home Page",
			"MetaDescription": "Welcome to the home page",

			"Cart": cart,
			"Env":  config.Mode,
		}

		return renderPage(w, "home", data)
	})

	handle("/", func(cart *models.Cart, w http.ResponseWriter, r *http.Request) error {
		if r.URL.Path == "/" {
			featuredGates, err := productCache.GetGates(repos.ProductFilterParams{})
			if err != nil {
				return fmt.Errorf("home page: failed to get featured gates: %w", err)
			}

			extensions, err := productCache.GetExtensions(repos.ProductFilterParams{Limit: 2})
			if err != nil {
				return fmt.Errorf("home page: failed to get featured extensions: %w", err)
			}

			data := map[string]any{
				"PageTitle":          "Home Page",
				"MetaDescription":    "Welcome to the home page",
				"FeaturedGates":      featuredGates,
				"FeaturedExtensions": extensions,
				"Cart":               cart,
				"Env":                config.Mode,
			}

			return renderPage(w, "home", data)
		}

		return NotFoundPage(w, renderPage)
	})

	handle.get("/contact/", func(cart *models.Cart, w http.ResponseWriter, r *http.Request) error {
		data := map[string]any{
			"PageTitle":       "Contact BabyGate Builders",
			"MetaDescription": "Contact form for Babygate builders",
			"Cart":            cart,
			"Env":             config.Mode,
		}
		return renderPage(w, "contact", data)
	})

	handle.get("/checkout/", func(cart *models.Cart, w http.ResponseWriter, r *http.Request) error {

		// reset the prices in the cart object in case there has been some manipulation on the client side
		cart.TotalValue = 0
		for i := range cart.Items {
			cartItem := &cart.Items[i]
			cartItem.SalePrice = 0
			for ii := range cartItem.Components {
				component := &cartItem.Components[ii]
				count, err := productRepo.CountProductByID(component.Id)
				if err != nil {
					return err
				}
				insufficientStock := count < component.Qty
				if insufficientStock {
					return fmt.Errorf("insufficient stock of %d expected more than %d but only have  %d", component.Id, component.Qty, count)
				}
				price, err := productRepo.GetProductPrice(component.Id)
				if err != nil {
					return err
				}
				component.Price = price
				cartItem.SalePrice += ((component.Price) * float32(component.Qty))
			}
			cart.TotalValue += (cartItem.SalePrice * float32(cartItem.Qty))
		}

		if os.Getenv("STRIPE_API_KEY") == "" {
			if err := json.NewEncoder(w).Encode(cart); err != nil {
				return err
			}
			return nil
		}

		// continue validating cart
		lineItems := []*stripe.CheckoutSessionLineItemParams{}
		for _, item := range cart.Items {
			lineItems = append(lineItems, &stripe.CheckoutSessionLineItemParams{
				Quantity: stripe.Int64(int64(item.Qty)),
				PriceData: &stripe.CheckoutSessionLineItemPriceDataParams{
					UnitAmount: stripe.Int64(int64(item.SalePrice * 100)),
					ProductData: &stripe.CheckoutSessionLineItemPriceDataProductDataParams{
						Name: stripe.String(item.Name),
					},
					Currency: stripe.String("EUR"),
				},
			},
			)
		}

		domain := "http://localhost:3000"
		params := &stripe.CheckoutSessionParams{
			LineItems:  lineItems,
			Mode:       stripe.String(string(stripe.CheckoutSessionModePayment)),
			SuccessURL: stripe.String(domain + "/success"),
			CancelURL:  stripe.String(domain + "/cart"),
			ShippingAddressCollection: &stripe.CheckoutSessionShippingAddressCollectionParams{
				AllowedCountries: []*string{stripe.String("IE")},
			},
			PhoneNumberCollection: &stripe.CheckoutSessionPhoneNumberCollectionParams{
				Enabled: stripe.Bool(true),
			},
		}
		s, err := session.New(params)
		if err != nil {
			log.Printf("session.New: %v", err)
		}

		http.Redirect(w, r, s.URL, http.StatusSeeOther)
		return nil
	})

	emailRegex, err := regexp.Compile(`^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$`)
	if err != nil {
		return fmt.Errorf("contact page: could not compile email validation regex: %w", err)
	}
	handle.post("/contact/", func(cart *models.Cart, w http.ResponseWriter, r *http.Request) error {
		if err := r.ParseForm(); err != nil {
			return fmt.Errorf("contact page: failed to parse form: %w", err)
		}
		email := r.Form.Get("email")
		name := r.Form.Get("name")
		message := r.Form.Get("message")

		if message == "" {
			return renderPage(w, "contact", map[string]any{
				"PageTitle":       "Contact us | No Message Provided",
				"MetaDescription": "Please provide a message",
				"Cart":            nil,
			})
		}

		if !emailRegex.MatchString(email) || email == "" {
			return renderPage(w, "contact", map[string]any{
				"PageTitle":       "Contact us | Invalid Email",
				"MetaDescription": "Please provide a valid email address",
				"Cart":            nil,
				"Env":             config.Mode,
			})
		}

		var contact struct {
			Email   string
			Name    string
			Message string
		}

		contact.Email = template.HTMLEscapeString(email)
		contact.Name = template.HTMLEscapeString(name)
		contact.Message = template.HTMLEscapeString(message)

		ctx, cancel := context.WithTimeout(r.Context(), 5*time.Second)
		defer cancel()

		if err := InsertContactForm(ctx, db, contact); err != nil {
			return err
		}

		data := map[string]any{
			"PageTitle":       "Contact BabyGate Builders",
			"MetaDescription": "Contact form for Babygate builders",
			"Cart":            cart,
			"Env":             config.Mode,
		}
		return renderPage(w, "contact", data)
	})

	// Build endpoint. Currently only handling builds for pressure gates.
	handle.post("/build/", func(cart *models.Cart, w http.ResponseWriter, r *http.Request) error {
		if err := r.ParseForm(); err != nil {
			return fmt.Errorf("build endpoint: failed to parse form: %w", err)
		}

		desiredWidth, err := strconv.ParseFloat(r.Form.Get("desired-width"), 32)
		if err != nil {
			return fmt.Errorf("build endpoint: failed to parse desired width: %w", err)
		}

		/*
			static max witdth for now
			could consider adding a max width to the gates in the DB and enforcing the
			constraint from there
		*/
		maxWidth := 220.00
		if desiredWidth > maxWidth {
			desiredWidth = maxWidth
		}

		if err := SaveRequestedBundleSize(db, float32(desiredWidth)); err != nil {
			return fmt.Errorf("build endpoint: failed to save requested bundle size: %w", err)
		}

		bundles, err := BuildPressureFitBundles(productCache, float32(desiredWidth))
		if err != nil {
			return fmt.Errorf("build endpoint: failed to build pressure fit bundles: %w", err)
		}

		data := map[string]any{
			"RequestedBundleSize": float32(desiredWidth),
			"Bundles":             bundles,
			"Env":                 config.Mode,
		}

		return renderPage(w, "build-results", data)
	})

	// Product page endpoints.
	handle.get("/gates/", func(cart *models.Cart, w http.ResponseWriter, r *http.Request) error {
		gates, err := productCache.GetGates(repos.ProductFilterParams{})
		if err != nil {
			return fmt.Errorf("gates page: failed to get gates: %w", err)
		}

		data := map[string]any{
			"Heading":         "Shop All Gates",
			"PageTitle":       "Shop All Gates",
			"MetaDescription": "Shop our full range of gates",
			"Products":        gates,
			"Cart":            cart,
			"Env":             config.Mode,
		}

		return renderPage(w, "products", data)
	})

	handle.get("/gates/{gate_id}", func(cart *models.Cart, w http.ResponseWriter, r *http.Request) error {
		gateID, err := strconv.Atoi(r.PathValue("gate_id"))
		if err != nil {
			return fmt.Errorf("gate details: failed to convert gate_id to integer: %w", err)
		}

		gate, err := productCache.GetProductByID(gateID)
		if err != nil {
			return fmt.Errorf("gate details: failed to retrieve gate: %w", err)
		}

		data := map[string]any{
			"PageTitle":       gate.Name,
			"MetaDescription": gate.Name,
			"Product":         gate,
			"Cart":            cart,
			"Env":             config.Mode,
		}

		return renderPage(w, "product", data)
	})

	handle.get("/extensions/", func(cart *models.Cart, w http.ResponseWriter, r *http.Request) error {
		extensions, err := productCache.GetExtensions(repos.ProductFilterParams{})
		if err != nil {
			return fmt.Errorf("extensions page: failed to get extensions: %w", err)
		}

		data := map[string]any{
			"Heading":         "All extensions",
			"PageTitle":       "All extensions",
			"MetaDescription": "Shop all extensions",
			"Products":        extensions,
			"Cart":            cart,
			"Env":             config.Mode,
		}

		return renderPage(w, "products", data)
	})

	handle.get("/extensions/{extension_id}", func(cart *models.Cart, w http.ResponseWriter, r *http.Request) error {
		extensionID, err := strconv.Atoi(r.PathValue("extension_id"))
		if err != nil {
			return fmt.Errorf("extension details: failed to convert extension_id to integer: %w", err)
		}

		extension, err := productCache.GetProductByID(extensionID)
		if err != nil {
			return fmt.Errorf("extension details: failed to retrieve extension: %w", err)
		}

		data := map[string]any{
			"PageTitle":       extension.Name,
			"MetaDescription": extension.Name,
			"Cart":            cart,
			"Env":             config.Mode,
		}

		return renderPage(w, "products", data)
	})

	// Cart endpoints.
	handle.get("/cart/", func(cart *models.Cart, w http.ResponseWriter, r *http.Request) error {
		data := map[string]any{
			"PageTitle":       "Your shopping cart",
			"MetaDescription": "",
			"Cart":            cart,
			"Env":             config.Mode,
		}

		return renderPage(w, "cart", data)
	})

	handle.get("/cart/json", func(cart *models.Cart, w http.ResponseWriter, r *http.Request) error {
		bytes, err := json.Marshal(cart)
		if err != nil {
			return fmt.Errorf("cart JSON endpoint: failed to marshal cart: %w", err)
		}

		if _, err := w.Write(bytes); err != nil {
			return fmt.Errorf("cart JSON endpoint: failed to write response: %w", err)
		}
		return nil
	})

	if config.Mode == Development {
		handle("/test", func(cart *models.Cart, w http.ResponseWriter, r *http.Request) error {
			if r.Method == http.MethodGet {
				return renderPage(w, "test", map[string]any{})
			}
			if r.Method == http.MethodPost {
				if err := r.ParseForm(); err != nil {
					return fmt.Errorf("cart add: failed to parse form: %w", err)
				}
				fmt.Printf("%+v\n", r.Form["data"])
				for k, v := range r.Form["data"] {
					fmt.Printf("k:%d v:%s\n", k, v)
				}
				return nil
			}
			return nil
		})
	}

	handle.post("/cart/add", func(cart *models.Cart, w http.ResponseWriter, r *http.Request) error {
		if err := r.ParseForm(); err != nil {
			return fmt.Errorf("cart add: failed to parse form: %w", err)
		}

		formData := r.Form["data"]
		if len(formData) < 1 {
			return renderPartial(w, "cart-modal", cart)
		}

		components := []models.CartItemComponent{}

		for _, d := range formData {
			component := models.NewCartItemComponent(cart.ID)
			if err := json.Unmarshal([]byte(d), &component); err != nil {
				return fmt.Errorf("cart add: failed to unmarshal cart item component %s: %w", d, err)
			}
			components = append(components, component)
		}

		if err := AddItemToCart(cartRepo, cart.ID, models.NewCartItem(cart.ID, components)); err != nil {
			return fmt.Errorf("cart add: failed to add item to cart: %w", err)
		}

		cart, err := cartRepo.GetCartByID(cart.ID)
		if err != nil {
			return fmt.Errorf("cart add: failed to retrieve updated cart: %w", err)
		}

		return renderPartial(w, "cart-modal", cart)
	})

	handle.post("/cart/item/remove", func(cart *models.Cart, w http.ResponseWriter, r *http.Request) error {
		if err := r.ParseForm(); err != nil {
			return fmt.Errorf("cart item remove: failed to parse form: %w", err)
		}

		cartItemID := r.Form.Get("cart_item_id")
		if cartItemID == "" {
			return nil
		}

		if _, err := db.Exec(`DELETE FROM cart_item WHERE id = ? AND cart_id = ?`, cartItemID, cart.ID); err != nil {
			return fmt.Errorf("cart item remove: failed to delete cart item: %w", err)
		}

		cart, err := cartRepo.GetCartByID(cart.ID)
		if err != nil {
			return fmt.Errorf("cart item remove: failed to retrieve updated cart: %w", err)
		}

		if err := renderPartial(w, "cart-main", cart); err != nil {
			return fmt.Errorf("cart item remove: failed to render partial (cart-main): %w", err)
		}

		return nil
	})

	handle.post("/cart/item/{mode}", func(cart *models.Cart, w http.ResponseWriter, r *http.Request) error {

		mode := r.PathValue("mode")

		if mode != "increment" && mode != "decrement" {
			return nil
		}

		if err := r.ParseForm(); err != nil {
			return fmt.Errorf("cart item update: failed to parse form: %w", err)
		}

		cartItemID := r.Form.Get("cart_item_id")
		if cartItemID == "" {
			return fmt.Errorf("cart item update: cart_item_id is blank")
		}

		cartItem, err := cartRepo.SelectCartItem(cart.ID, cartItemID)
		if err != nil {
			return fmt.Errorf("cart item update: failed to select cart item: %w", err)
		}

		if mode == "increment" {
			if err := cartRepo.IncrementCartItem(cart.ID, cartItem.ID); err != nil {
				return fmt.Errorf("cart item update: failed to increment cart item: %w", err)
			}
		} else {
			if cartItem.Qty < 2 {
				w.WriteHeader(http.StatusBadRequest)
				return nil
			}
			if err := cartRepo.DecrementCartItem(cart.ID, cartItem.ID); err != nil {
				return fmt.Errorf("cart item update: failed to decrement cart item: %w", err)
			}
		}

		cart, err = cartRepo.GetCartByID(cart.ID)
		if err != nil {
			return fmt.Errorf("cart item update: failed to retrieve updated cart: %w", err)
		}
		if err := renderPartial(w, "cart-main", cart); err != nil {
			return fmt.Errorf("cart item update: failed to render partial (cart-main): %w", err)
		}
		if err := renderPartial(w, "cart-modal-oob", cart); err != nil {
			return fmt.Errorf("cart item update: failed to render partial (cart-modal-oob): %w", err)
		}

		return nil
	})

	handle.delete("/cart/item/", func(cart *models.Cart, w http.ResponseWriter, r *http.Request) error {
		if err := r.ParseForm(); err != nil {
			return fmt.Errorf("cart item delete: failed to parse form: %w", err)
		}

		cartItemID := r.Form.Get("id")
		if cartItemID == "" {
			return fmt.Errorf("cart item delete: no cart item id supplied")
		}

		if _, err := db.Exec("DELETE FROM cart_item WHERE id = ? AND cart_id = ?", cartItemID, cart.ID); err != nil {
			return fmt.Errorf("cart item delete: failed to delete cart item: %w", err)
		}

		cart, err := cartRepo.GetCartByID(cart.ID)
		if err != nil {
			return fmt.Errorf("cart item delete: failed to retrieve updated cart: %w", err)
		}

		if err := renderPartial(w, "cart-main", cart); err != nil {
			return fmt.Errorf("cart item delete: failed to render partial (cart-main): %w", err)
		}

		if err := renderPartial(w, "cart-modal-oob", cart); err != nil {
			return fmt.Errorf("cart item delete: failed to render partial (cart-modal-oob): %w", err)
		}

		return nil
	})

	handle.post("/cart/clear", func(cart *models.Cart, w http.ResponseWriter, r *http.Request) error {
		if _, err := db.Exec(`DELETE FROM cart_item WHERE cart_id = ?`, cart.ID); err != nil {
			return fmt.Errorf("cart clear: could not delete cart_item for cart_id %s: %w", cart.ID, err)
		}

		if _, err := db.Exec("DELETE FROM cart_item_component WHERE cart_id = ?", cart.ID); err != nil {
			return fmt.Errorf("cart clear: could not delete cart_item_component for cart_id %s: %w", cart.ID, err)
		}

		cart, err := cartRepo.GetCartByID(cart.ID)
		if err != nil {
			return fmt.Errorf("cart clear: failed to retrieve updated cart: %w", err)
		}

		if err := renderPartial(w, "cart-main", cart); err != nil {
			return fmt.Errorf("cart clear: failed to render partial (cart-main): %w", err)
		}

		if err := renderPartial(w, "cart-modal-oob", cart); err != nil {
			return fmt.Errorf("cart clear: failed to render partial (cart-modal-oob): %w", err)
		}

		return nil
	})

	// Initialize assets dir.
	assetsDirPath := "/assets/"
	httpFileSystem := http.Dir("assets")
	staticFileHttpHandler := http.FileServer(httpFileSystem)
	assetsPathHandler := http.StripPrefix(assetsDirPath, staticFileHttpHandler)
	router.Handle(assetsDirPath, http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		w.Header().Set("Cache-Control", "public, max-age="+strconv.Itoa(24*int(time.Hour.Seconds())))
		assetsPathHandler.ServeHTTP(w, r)
	}))

	srv := http.Server{
		Addr:    ":" + config.Port,
		Handler: router,
	}

	errChan := make(chan error)
	go func() {
		log.Println("Listening on http://localhost:" + config.Port)
		if err := srv.ListenAndServe(); err != nil {
			errChan <- fmt.Errorf("server startup: failed to listen and serve on env.config.Port %s: %w", config.Port, err)
		}
	}()

	quit := make(chan os.Signal, 1)
	signal.Notify(quit, os.Interrupt, syscall.SIGTERM)

	select {
	case err := <-errChan:
		close(errChan)
		return fmt.Errorf("server errored: %w", err)
	case <-quit:
		close(quit)
		log.Println("shutting down server gracefully")
		ctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)
		defer cancel()
		if err := srv.Shutdown(ctx); err != nil {
			return fmt.Errorf("server forced to shut down %w", err)
		}
		log.Println("server shut down gracefully")
		return nil
	}
}

func main() {
	if err := app(); err != nil {
		log.Fatal(err)
	}
}

func refreshCartDetails(cart *models.Cart, productCache *cachedrepos.CachedProductRepo) error {
	for i := range cart.Items {
		item := &cart.Items[i]
		for j := range item.Components {
			component := &item.Components[j]
			product, err := productCache.GetProductByID(component.Id)
			if err != nil {
				return err
			}
			originalQty := component.Qty
			component.Product = *product
			component.Product.Qty = originalQty
		}
		item.SetName()
	}
	return nil
}

func sendErr(w http.ResponseWriter, err error) {
	http.Error(w, err.Error(), http.StatusInternalServerError)
}

func attachNewCartToSession(cart *models.Cart, session *sessions.Session, w http.ResponseWriter, r *http.Request) error {

	session.Values["cart_id"] = cart.ID
	if err := session.Save(r, w); err != nil {
		return err
	}
	return nil
}

func NewCartFromSessionGetter(cartRepo *repos.CartRepo, products *cachedrepos.CachedProductRepo, store *sessions.CookieStore) func(w http.ResponseWriter, r *http.Request) (*models.Cart, error) {
	return func(w http.ResponseWriter, r *http.Request) (*models.Cart, error) {
		session, err := getCartSession(r, store)
		if err != nil {
			return nil, err
		}

		cartID, err := getCartID(session)
		if err != nil {
			return nil, err
		}

		if cartID == nil {
			cart, err := NewCart(cartRepo)
			if err != nil {
				return nil, err
			}
			if err := attachNewCartToSession(cart, session, w, r); err != nil {
				return nil, err
			}
			return cart, nil
		}

		if valid := validateCartID(cartID); !valid {
			return nil, fmt.Errorf("cart id is invalid")
		}

		exists, err := cartRepo.CartExists(cartID.(string))
		if err != nil {
			return nil, err
		}
		if !exists {
			cart, err := NewCart(cartRepo)
			if err != nil {
				return nil, err
			}
			if err := attachNewCartToSession(cart, session, w, r); err != nil {
				return nil, err
			}
			return cart, nil
		}

		cart, err := cartRepo.GetCartByID(cartID.(string))
		if err != nil {
			return nil, err
		}

		return cart, nil
	}
}

func createCustomHandler(environment Environment, router *http.ServeMux, middleware []middlewareFunc, getCartFromRequest func(w http.ResponseWriter, r *http.Request) (*models.Cart, error)) customHandler {
	return func(path string, fn customHandleFunc) {

		// wrap fn in middleware funcs
		for i := range middleware {
			fn = middleware[i](fn)
		}

		router.HandleFunc(path, func(w http.ResponseWriter, r *http.Request) {
			if environment == Development {
				rMsg := "[INFO] %s request made to %s"
				log.Printf(rMsg, r.Method, r.URL.Path)
			}

			cart, err := getCartFromRequest(w, r)
			if err != nil {
				errMsg := "[ERROR] Failed  %s request to %s. %v"
				log.Printf(errMsg, r.Method, path, err)

				// ideally I would get notified of an error here
				if environment == Development {
					sendErr(w, err)
				} else {
					// TODO handle production env err handling different
					sendErr(w, err)
				}
				return
			}

			// custom handler get passed throgh the cart handler middleware first to
			// ensure there is a cart session
			if err := fn(cart, w, r); err != nil {
				errMsg := "[ERROR] Failed  %s request to %s. %v"
				log.Printf(errMsg, r.Method, path, err)

				// ideally I would get notified of an error here
				if environment == Development {
					sendErr(w, err)
				} else {
					// TODO handle production env err handling different
					sendErr(w, err)
				}
			}
		})
	}

}

func (handle customHandler) get(path string, fn customHandleFunc) {
	handle("GET "+path, fn)
}
func (handle customHandler) post(path string, fn customHandleFunc) {
	handle("POST "+path, fn)
}

//	func (handle customHandler) put(path string, fn customHandleFunc) {
//		handle("PUT "+path, fn)
//	}
func (handle customHandler) delete(path string, fn customHandleFunc) {
	handle("DELETE"+path, fn)
}

func validateCartID(cartID interface{}) (valid bool) {
	if _, ok := cartID.(string); !ok {
		return false
	}
	return true
}

func getCartSession(r *http.Request, store *sessions.CookieStore) (*sessions.Session, error) {
	session, err := store.Get(r, "cart-session")
	if err != nil {
		return nil, err
	}
	return session, nil
}

func getCartID(session *sessions.Session) (interface{}, error) {
	if session == nil {
		return nil, errors.New("cart Session is nil")
	}
	return session.Values["cart_id"], nil

}

func NotFoundPage(w http.ResponseWriter, renderPage renderPageFunc) error {
	w.WriteHeader(http.StatusNotFound)
	data := map[string]any{
		"pageTile":        "Page Not Found",
		"MetaDescription": "Unable to find page",
	}
	return renderPage(w, "not-found", data)
}

/* service funcs start */

func BuildPressureFitBundles(products *cachedrepos.CachedProductRepo, limit float32) ([]models.Bundle, error) {
	var bundles []models.Bundle

	gates, err := products.GetProducts(repos.Gate, repos.ProductFilterParams{MaxWidth: limit})
	if err != nil {
		return bundles, err
	}
	if len(gates) < 1 {
		return bundles, nil
	}

	for _, gate := range gates {
		compatibleExtensions, err := products.GetCompatibleExtensionsByGateID(gate.Id)
		if err != nil {
			return bundles, err
		}

		bundle, err := BuildPressureFitBundle(limit, gate, compatibleExtensions)
		if err != nil {
			return bundles, err
		}
		bundles = append(bundles, bundle)
	}

	return bundles, nil
}

func BuildPressureFitBundle(limit float32, gate *models.Product, extensions []*models.Product) (models.Bundle, error) {
	widthLimit := limit

	var bundle = models.Bundle{}

	// returning a single bundle
	bundle.Qty = 1

	//  add gate to the bundle. Ensure Qty is at least 1
	if gate.Width > widthLimit {
		return bundle, errors.New("gate too big")
	}

	if gate.Qty < 1 {
		gate.Qty = 1
	}

	bundle.Components = append(bundle.Components, *gate)

	widthLimit -= gate.Width

	// sort extensions to ensure width descending
	sort.Slice(extensions, func(i int, j int) bool {
		return extensions[i].Width > extensions[j].Width
	})

	extensionIndex := 0
	for widthLimit > 0 {

		// we want to add one more extension if the width remaining > 0 but we've reached the last extension
		var override bool = false
		if extensionIndex >= len(extensions) {
			extensionIndex--
			override = true
		}

		extension := extensions[extensionIndex]
		if extension.Width > widthLimit && !override {
			//  extension too big, try next extension size down
			extensionIndex++
			continue
		}

		// check if extension already exists in the bundle and if so, increment the qty, else add it with a qty of 1
		var existingExtension *models.Product
		for ii := 1; ii < len(bundle.Components); ii++ {
			var bundleExtension *models.Product = &bundle.Components[ii]

			if bundleExtension.Id == extension.Id {
				existingExtension = bundleExtension
			}
		}

		if existingExtension != nil {
			existingExtension.Qty++
			widthLimit -= existingExtension.Width
		} else {
			extension.Qty = 1
			bundle.Components = append(bundle.Components, *extension)
			widthLimit -= extension.Width
		}
	}
	bundle.ComputeMetaData()
	return bundle, nil
}

func TotalValue(products *cachedrepos.CachedProductRepo, cart models.Cart) (float32, error) {
	var value float32 = 0.0
	for _, item := range cart.Items {
		for _, component := range item.Components {
			productPrice, err := products.GetProductPrice(component.Product.Id)
			if err != nil {
				return 0, err
			}
			value += (productPrice * float32(component.Qty))
		}
	}
	return value, nil
}

func NewCart(cartRepo *repos.CartRepo) (*models.Cart, error) {
	cart := models.NewCart()
	if _, err := cartRepo.SaveCart(cart); err != nil {
		return nil, err
	}
	return &cart, nil
}

func AddItemToCart(cartRepo *repos.CartRepo, cartID string, cartItem models.CartItem) error {
	exists, err := cartRepo.DoesCartItemExist(cartID, cartItem.ID)
	if err != nil {
		return err
	}
	if !exists {
		if err := cartRepo.InsertCartItem(cartItem); err != nil {
			return fmt.Errorf("adding item to cart failed at insert or increment cart item: %w", err)
		}
		if err := cartRepo.SaveCartItemComponents(cartItem.Components); err != nil {
			return fmt.Errorf("adding item components failed: %w", err)
		}
	} else {
		if err := cartRepo.IncrementCartItem(cartID, cartItem.ID); err != nil {
			return err
		}
	}
	if err := cartRepo.SetLastUpdated(cartID); err != nil {
		return fmt.Errorf("failed to update last_updated field from main.go; %w", err)
	}
	return nil
}

func RemoveItem(cartRepo *repos.CartRepo, cartID, itemID string) error {
	// TODO add transactions
	if err := cartRepo.RemoveCartItem(cartID, itemID); err != nil {
		return fmt.Errorf("failed to remove item. %w", err)
	}
	if err := cartRepo.RemoveCartItemComponents(itemID); err != nil {
		return fmt.Errorf("failed to remove item components. %w", err)
	}
	return nil
}

// Other methods for user-related operations (e.g., UpdateUser, DeleteUser, etc.)

/* service funcs end */

/* repository funcs start */

func InsertContactForm(ctx context.Context, db *sql.DB, contact struct {
	Email   string
	Name    string
	Message string
}) error {
	q := "INSERT INTO contact (name, email, message, timestamp) VALUES (?, ?, ?, ?)"
	_, err := db.ExecContext(ctx, q, contact.Email, contact.Name, contact.Message, time.Now())
	if err != nil {
		return fmt.Errorf("contact page: failed to insert contact into database: %w", err)
	}
	return nil
}

func SaveRequestedBundleSize(db *sql.DB, desiredWidth float32) error {
	_, err := db.Exec("INSERT INTO bundle_sizes (type, size) VALUES ('pressure fit', ?)", desiredWidth)
	if err != nil {
		return err
	}
	return nil
}

func SqliteOpen(path string) *sql.DB {
	db, err := sql.Open("sqlite3", path)
	if err != nil {
		panic(err)
	}

	return db
}

type renderPageFunc func(w http.ResponseWriter, templateName string, templateData map[string]any) error
type renderPartialFunc func(w http.ResponseWriter, templateName string, templateData any) error

func NewPageRenderer(tmpl tmplFunc) renderPageFunc {
	return func(w http.ResponseWriter, templateName string, templateData map[string]any) error {

		data := map[string]any{
			"MetaDescription": "default meta description",
			"PageTitle":       "default page title",
		}

		for k, v := range templateData {
			data[k] = v
		}

		var buffer bytes.Buffer
		if err := tmpl().ExecuteTemplate(&buffer, templateName, data); err != nil {
			return fmt.Errorf("problem executing template %s: %w", templateName, err)
		}

		if _, err := w.Write(buffer.Bytes()); err != nil {
			return err
		}

		return nil
	}
}

func NewPartialRenderer(tmpl tmplFunc) renderPartialFunc {
	return func(w http.ResponseWriter, templateName string, templateData any) error {

		var buffer bytes.Buffer
		if err := tmpl().ExecuteTemplate(&buffer, templateName, templateData); err != nil {
			return fmt.Errorf("problem executing partial template %s: %w", templateName, err)
		}

		if _, err := w.Write(buffer.Bytes()); err != nil {
			return err
		}

		return nil
	}
}

type tmplFunc func() *template.Template

func structToString(v any) string {
	b, err := json.Marshal(v)
	if err != nil {
		return "error: marshalling struct to string"
	}

	return string(b)
}

func templateParser(env Environment) tmplFunc {
	var tmpl *template.Template
	return func() *template.Template {
		if env == Production && tmpl != nil {
			return tmpl
		}
		tmpl = template.Must(template.New("").Funcs(template.FuncMap{
			"toString": structToString,
			"sizeRange": func(width, tolerance float32) float32 {
				return width - tolerance
			},
			"title": func(str string) string {
				return cases.Title(language.AmericanEnglish).String(str)
			},
			// expect two different number types int and float32
			"mul": func(a any, b any) float32 {
				var f1, f2 float32

				switch v := a.(type) {
				case int:
					f1 = float32(v)
				case float32:
					f1 = v
				case float64:
					f1 = float32(v)
				default:
					return 0.0
				}

				switch v := b.(type) {
				case int:
					f2 = float32(v)
				case float32:
					f2 = v
				case float64:
					f2 = float32(v)
				default:
					return 0.0
				}

				return f1 * f2
			},
		}).ParseGlob("templates/**/*.tmpl"))
		return tmpl
	}
}
```

---

## File: ./package-lock.json

```
{
  "name": "gates",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "devDependencies": {
        "eslint": "^9.22.0",
        "tailwindcss": "^4.0.14"
      }
    },
    "node_modules/@eslint-community/eslint-utils": {
      "version": "4.4.0",
      "resolved": "https://registry.npmjs.org/@eslint-community/eslint-utils/-/eslint-utils-4.4.0.tgz",
      "integrity": "sha512-1/sA4dwrzBAyeUoQ6oxahHKmrZvsnLCg4RfxW3ZFGGmQkSNQPFNLV9CUEFQP1x9EYXHTo5p6xdhZM1Ne9p/AfA==",
      "dev": true,
      "dependencies": {
        "eslint-visitor-keys": "^3.3.0"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "peerDependencies": {
        "eslint": "^6.0.0 || ^7.0.0 || >=8.0.0"
      }
    },
    "node_modules/@eslint-community/eslint-utils/node_modules/eslint-visitor-keys": {
      "version": "3.4.3",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-3.4.3.tgz",
      "integrity": "sha512-wpc+LXeiyiisxPlEkUzU6svyS1frIO3Mgxj1fdy7Pm8Ygzguax2N3Fa/D/ag1WqbOprdI+uY6wMUl8/a2G+iag==",
      "dev": true,
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@eslint-community/regexpp": {
      "version": "4.12.1",
      "resolved": "https://registry.npmjs.org/@eslint-community/regexpp/-/regexpp-4.12.1.tgz",
      "integrity": "sha512-CCZCDJuduB9OUkFkY2IgppNZMi2lBQgD2qzwXkEia16cge2pijY/aXi96CJMquDMn3nJdlPV1A5KrJEXwfLNzQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^12.0.0 || ^14.0.0 || >=16.0.0"
      }
    },
    "node_modules/@eslint/config-array": {
      "version": "0.19.2",
      "resolved": "https://registry.npmjs.org/@eslint/config-array/-/config-array-0.19.2.tgz",
      "integrity": "sha512-GNKqxfHG2ySmJOBSHg7LxeUx4xpuCoFjacmlCoYWEbaPXLwvfIjixRI12xCQZeULksQb23uiA8F40w5TojpV7w==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@eslint/object-schema": "^2.1.6",
        "debug": "^4.3.1",
        "minimatch": "^3.1.2"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/config-helpers": {
      "version": "0.1.0",
      "resolved": "https://registry.npmjs.org/@eslint/config-helpers/-/config-helpers-0.1.0.tgz",
      "integrity": "sha512-kLrdPDJE1ckPo94kmPPf9Hfd0DU0Jw6oKYrhe+pwSC0iTUInmTa+w6fw8sGgcfkFJGNdWOUeOaDM4quW4a7OkA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/core": {
      "version": "0.12.0",
      "resolved": "https://registry.npmjs.org/@eslint/core/-/core-0.12.0.tgz",
      "integrity": "sha512-cmrR6pytBuSMTaBweKoGMwu3EiHiEC+DoyupPmlZ0HxBJBtIxwe+j/E4XPIKNx+Q74c8lXKPwYawBf5glsTkHg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@types/json-schema": "^7.0.15"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/eslintrc": {
      "version": "3.3.0",
      "resolved": "https://registry.npmjs.org/@eslint/eslintrc/-/eslintrc-3.3.0.tgz",
      "integrity": "sha512-yaVPAiNAalnCZedKLdR21GOGILMLKPyqSLWaAjQFvYA2i/ciDi8ArYVr69Anohb6cH2Ukhqti4aFnYyPm8wdwQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ajv": "^6.12.4",
        "debug": "^4.3.2",
        "espree": "^10.0.1",
        "globals": "^14.0.0",
        "ignore": "^5.2.0",
        "import-fresh": "^3.2.1",
        "js-yaml": "^4.1.0",
        "minimatch": "^3.1.2",
        "strip-json-comments": "^3.1.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@eslint/js": {
      "version": "9.22.0",
      "resolved": "https://registry.npmjs.org/@eslint/js/-/js-9.22.0.tgz",
      "integrity": "sha512-vLFajx9o8d1/oL2ZkpMYbkLv8nDB6yaIwFNt7nI4+I80U/z03SxmfOMsLbvWr3p7C+Wnoh//aOu2pQW8cS0HCQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/object-schema": {
      "version": "2.1.6",
      "resolved": "https://registry.npmjs.org/@eslint/object-schema/-/object-schema-2.1.6.tgz",
      "integrity": "sha512-RBMg5FRL0I0gs51M/guSAj5/e14VQ4tpZnQNWwuDT66P14I43ItmPfIZRhO9fUVIPOAQXU47atlywZ/czoqFPA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/plugin-kit": {
      "version": "0.2.7",
      "resolved": "https://registry.npmjs.org/@eslint/plugin-kit/-/plugin-kit-0.2.7.tgz",
      "integrity": "sha512-JubJ5B2pJ4k4yGxaNLdbjrnk9d/iDz6/q8wOilpIowd6PJPgaxCuHBnBszq7Ce2TyMrywm5r4PnKm6V3iiZF+g==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@eslint/core": "^0.12.0",
        "levn": "^0.4.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@humanfs/core": {
      "version": "0.19.1",
      "resolved": "https://registry.npmjs.org/@humanfs/core/-/core-0.19.1.tgz",
      "integrity": "sha512-5DyQ4+1JEUzejeK1JGICcideyfUbGixgS9jNgex5nqkW+cY7WZhxBigmieN5Qnw9ZosSNVC9KQKyb+GUaGyKUA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=18.18.0"
      }
    },
    "node_modules/@humanfs/node": {
      "version": "0.16.6",
      "resolved": "https://registry.npmjs.org/@humanfs/node/-/node-0.16.6.tgz",
      "integrity": "sha512-YuI2ZHQL78Q5HbhDiBA1X4LmYdXCKCMQIfw0pw7piHJwyREFebJUvrQN4cMssyES6x+vfUbx1CIpaQUKYdQZOw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@humanfs/core": "^0.19.1",
        "@humanwhocodes/retry": "^0.3.0"
      },
      "engines": {
        "node": ">=18.18.0"
      }
    },
    "node_modules/@humanfs/node/node_modules/@humanwhocodes/retry": {
      "version": "0.3.1",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/retry/-/retry-0.3.1.tgz",
      "integrity": "sha512-JBxkERygn7Bv/GbN5Rv8Ul6LVknS+5Bp6RgDC/O8gEBU/yeH5Ui5C/OlWrTb6qct7LjjfT6Re2NxB0ln0yYybA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=18.18"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@humanwhocodes/module-importer": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/module-importer/-/module-importer-1.0.1.tgz",
      "integrity": "sha512-bxveV4V8v5Yb4ncFTT3rPSgZBOpCkjfK0y4oVVVJwIuDVBRMDXrPyXRL988i5ap9m9bnyEEjWfm5WkBmtffLfA==",
      "dev": true,
      "engines": {
        "node": ">=12.22"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@humanwhocodes/retry": {
      "version": "0.4.2",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/retry/-/retry-0.4.2.tgz",
      "integrity": "sha512-xeO57FpIu4p1Ri3Jq/EXq4ClRm86dVF2z/+kvFnyqVYRavTZmaFaUBbWCOuuTh0o/g7DSsk6kc2vrS4Vl5oPOQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=18.18"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@types/estree": {
      "version": "1.0.6",
      "resolved": "https://registry.npmjs.org/@types/estree/-/estree-1.0.6.tgz",
      "integrity": "sha512-AYnb1nQyY49te+VRAVgmzfcgjYS91mY5P0TKUDCLEM+gNnA+3T6rWITXRLYCpahpqSQbN5cE+gHpnPyXjHWxcw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/json-schema": {
      "version": "7.0.15",
      "resolved": "https://registry.npmjs.org/@types/json-schema/-/json-schema-7.0.15.tgz",
      "integrity": "sha512-5+fP8P8MFNC+AyZCDxrB2pkZFPGzqQWUzpSeuuVLvm8VMcorNYavBqoFcxK8bQz4Qsbn4oUEEem4wDLfcysGHA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/acorn": {
      "version": "8.14.1",
      "resolved": "https://registry.npmjs.org/acorn/-/acorn-8.14.1.tgz",
      "integrity": "sha512-OvQ/2pUDKmgfCg++xsTX1wGxfTaszcHVcTctW4UJB4hibJx2HXxxO5UmVgyjMa+ZDsiaf5wWLXYpRWMmBI0QHg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "acorn": "bin/acorn"
      },
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/acorn-jsx": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/acorn-jsx/-/acorn-jsx-5.3.2.tgz",
      "integrity": "sha512-rq9s+JNhf0IChjtDXxllJ7g41oZk5SlXtp0LHwyA5cejwn7vKmKp4pPri6YEePv2PU65sAsegbXtIinmDFDXgQ==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "acorn": "^6.0.0 || ^7.0.0 || ^8.0.0"
      }
    },
    "node_modules/ajv": {
      "version": "6.12.6",
      "resolved": "https://registry.npmjs.org/ajv/-/ajv-6.12.6.tgz",
      "integrity": "sha512-j3fVLgvTo527anyYyJOGTYJbG+vnnQYvE0m5mmkc1TK+nxAppkCLMIL0aZ4dblVCNoGShhm+kzE4ZUykBoMg4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fast-deep-equal": "^3.1.1",
        "fast-json-stable-stringify": "^2.0.0",
        "json-schema-traverse": "^0.4.1",
        "uri-js": "^4.2.2"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/epoberezkin"
      }
    },
    "node_modules/ansi-styles": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-4.3.0.tgz",
      "integrity": "sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==",
      "dev": true,
      "dependencies": {
        "color-convert": "^2.0.1"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/argparse": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/argparse/-/argparse-2.0.1.tgz",
      "integrity": "sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q==",
      "dev": true,
      "license": "Python-2.0"
    },
    "node_modules/balanced-match": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz",
      "integrity": "sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==",
      "dev": true
    },
    "node_modules/brace-expansion": {
      "version": "1.1.11",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.11.tgz",
      "integrity": "sha512-iCuPHDFgrHX7H2vEI/5xpz07zSHB00TpugqhmYtVmMO6518mCuRMoOYFldEBl0g187ufozdaHgWKcYFb61qGiA==",
      "dev": true,
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/callsites": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/callsites/-/callsites-3.1.0.tgz",
      "integrity": "sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/chalk": {
      "version": "4.1.2",
      "resolved": "https://registry.npmjs.org/chalk/-/chalk-4.1.2.tgz",
      "integrity": "sha512-oKnbhFyRIXpUuez8iBMmyEa4nbj4IOQyuhc/wy9kY7/WVPcwIO9VA668Pu8RkO7+0G76SLROeyw9CpQ061i4mA==",
      "dev": true,
      "dependencies": {
        "ansi-styles": "^4.1.0",
        "supports-color": "^7.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/chalk?sponsor=1"
      }
    },
    "node_modules/chalk/node_modules/has-flag": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/has-flag/-/has-flag-4.0.0.tgz",
      "integrity": "sha512-EykJT/Q1KjTWctppgIAgfSO0tKVuZUjhgMr17kqTumMl6Afv3EISleU7qZUzoXDFTAHTDC4NOoG/ZxU3EvlMPQ==",
      "dev": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/chalk/node_modules/supports-color": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-7.2.0.tgz",
      "integrity": "sha512-qpCAvRl9stuOHveKsn7HncJRvv501qIacKzQlO/+Lwxc9+0q2wLyv4Dfvt80/DPn2pqOBsJdDiogXGR9+OvwRw==",
      "dev": true,
      "dependencies": {
        "has-flag": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/color-convert": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/color-convert/-/color-convert-2.0.1.tgz",
      "integrity": "sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==",
      "dev": true,
      "dependencies": {
        "color-name": "~1.1.4"
      },
      "engines": {
        "node": ">=7.0.0"
      }
    },
    "node_modules/color-name": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.4.tgz",
      "integrity": "sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA==",
      "dev": true
    },
    "node_modules/concat-map": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/concat-map/-/concat-map-0.0.1.tgz",
      "integrity": "sha512-/Srv4dswyQNBfohGpz9o6Yb3Gz3SrUDqBH5rTuhGR7ahtlbYKnVxw2bCFMRljaA7EXHaXZ8wsHdodFvbkhKmqg==",
      "dev": true
    },
    "node_modules/cross-spawn": {
      "version": "7.0.6",
      "resolved": "https://registry.npmjs.org/cross-spawn/-/cross-spawn-7.0.6.tgz",
      "integrity": "sha512-uV2QOWP2nWzsy2aMp8aRibhi9dlzF5Hgh5SHaB9OiTGEyDTiJJyx0uy51QXdyWbtAHNua4XJzUKca3OzKUd3vA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "path-key": "^3.1.0",
        "shebang-command": "^2.0.0",
        "which": "^2.0.1"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/debug": {
      "version": "4.3.4",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.4.tgz",
      "integrity": "sha512-PRWFHuSU3eDtQJPvnNY7Jcket1j0t5OuOsFzPPzsekD52Zl8qUfFIPEiswXqIvHWGVHOgX+7G/vCNNhehwxfkQ==",
      "dev": true,
      "dependencies": {
        "ms": "2.1.2"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/debug/node_modules/ms": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.2.tgz",
      "integrity": "sha512-sGkPx+VjMtmA6MX27oA4FBFELFCZZ4S4XqeGOXCv68tT+jb3vk/RyaKWP0PTKyWtmLSM0b+adUTEvbs1PEaH2w==",
      "dev": true
    },
    "node_modules/deep-is": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/deep-is/-/deep-is-0.1.4.tgz",
      "integrity": "sha512-oIPzksmTg4/MriiaYGO+okXDT7ztn/w3Eptv/+gSIdMdKsJo0u4CfYNFJPy+4SKMuCqGw2wxnA+URMg3t8a/bQ==",
      "dev": true
    },
    "node_modules/escape-string-regexp": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-4.0.0.tgz",
      "integrity": "sha512-TtpcNJ3XAzx3Gq8sWRzJaVajRs0uVxA2YAkdb1jm2YkPz4G6egUFAyA3n5vtEIZefPk5Wa4UXbKuS5fKkJWdgA==",
      "dev": true,
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/eslint": {
      "version": "9.22.0",
      "resolved": "https://registry.npmjs.org/eslint/-/eslint-9.22.0.tgz",
      "integrity": "sha512-9V/QURhsRN40xuHXWjV64yvrzMjcz7ZyNoF2jJFmy9j/SLk0u1OLSZgXi28MrXjymnjEGSR80WCdab3RGMDveQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.2.0",
        "@eslint-community/regexpp": "^4.12.1",
        "@eslint/config-array": "^0.19.2",
        "@eslint/config-helpers": "^0.1.0",
        "@eslint/core": "^0.12.0",
        "@eslint/eslintrc": "^3.3.0",
        "@eslint/js": "9.22.0",
        "@eslint/plugin-kit": "^0.2.7",
        "@humanfs/node": "^0.16.6",
        "@humanwhocodes/module-importer": "^1.0.1",
        "@humanwhocodes/retry": "^0.4.2",
        "@types/estree": "^1.0.6",
        "@types/json-schema": "^7.0.15",
        "ajv": "^6.12.4",
        "chalk": "^4.0.0",
        "cross-spawn": "^7.0.6",
        "debug": "^4.3.2",
        "escape-string-regexp": "^4.0.0",
        "eslint-scope": "^8.3.0",
        "eslint-visitor-keys": "^4.2.0",
        "espree": "^10.3.0",
        "esquery": "^1.5.0",
        "esutils": "^2.0.2",
        "fast-deep-equal": "^3.1.3",
        "file-entry-cache": "^8.0.0",
        "find-up": "^5.0.0",
        "glob-parent": "^6.0.2",
        "ignore": "^5.2.0",
        "imurmurhash": "^0.1.4",
        "is-glob": "^4.0.0",
        "json-stable-stringify-without-jsonify": "^1.0.1",
        "lodash.merge": "^4.6.2",
        "minimatch": "^3.1.2",
        "natural-compare": "^1.4.0",
        "optionator": "^0.9.3"
      },
      "bin": {
        "eslint": "bin/eslint.js"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://eslint.org/donate"
      },
      "peerDependencies": {
        "jiti": "*"
      },
      "peerDependenciesMeta": {
        "jiti": {
          "optional": true
        }
      }
    },
    "node_modules/eslint-scope": {
      "version": "8.3.0",
      "resolved": "https://registry.npmjs.org/eslint-scope/-/eslint-scope-8.3.0.tgz",
      "integrity": "sha512-pUNxi75F8MJ/GdeKtVLSbYg4ZI34J6C0C7sbL4YOp2exGwen7ZsuBqKzUhXd0qMQ362yET3z+uPwKeg/0C2XCQ==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "esrecurse": "^4.3.0",
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint-visitor-keys": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-4.2.0.tgz",
      "integrity": "sha512-UyLnSehNt62FFhSwjZlHmeokpRK59rcz29j+F1/aDgbkbRTk7wIc9XzdoasMUbRNKDM0qQt/+BJ4BrpFeABemw==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/espree": {
      "version": "10.3.0",
      "resolved": "https://registry.npmjs.org/espree/-/espree-10.3.0.tgz",
      "integrity": "sha512-0QYC8b24HWY8zjRnDTL6RiHfDbAWn63qb4LMj1Z4b076A4une81+z03Kg7l7mn/48PUTqoLptSXez8oknU8Clg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "acorn": "^8.14.0",
        "acorn-jsx": "^5.3.2",
        "eslint-visitor-keys": "^4.2.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/esquery": {
      "version": "1.5.0",
      "resolved": "https://registry.npmjs.org/esquery/-/esquery-1.5.0.tgz",
      "integrity": "sha512-YQLXUplAwJgCydQ78IMJywZCceoqk1oH01OERdSAJc/7U2AylwjhSCLDEtqwg811idIS/9fIU5GjG73IgjKMVg==",
      "dev": true,
      "dependencies": {
        "estraverse": "^5.1.0"
      },
      "engines": {
        "node": ">=0.10"
      }
    },
    "node_modules/esrecurse": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/esrecurse/-/esrecurse-4.3.0.tgz",
      "integrity": "sha512-KmfKL3b6G+RXvP8N1vr3Tq1kL/oCFgn2NYXEtqP8/L3pKapUA4G8cFVaoF3SU323CD4XypR/ffioHmkti6/Tag==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/estraverse": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
      "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
      "dev": true,
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/esutils": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/esutils/-/esutils-2.0.3.tgz",
      "integrity": "sha512-kVscqXk4OCp68SZ0dkgEKVi6/8ij300KBWTJq32P/dYeWTSwK41WyTxalN1eRmA5Z9UU/LX9D7FWSmV9SAYx6g==",
      "dev": true,
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/fast-deep-equal": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/fast-deep-equal/-/fast-deep-equal-3.1.3.tgz",
      "integrity": "sha512-f3qQ9oQy9j2AhBe/H9VC91wLmKBCCU/gDOnKNAYG5hswO7BLKj09Hc5HYNz9cGI++xlpDCIgDaitVs03ATR84Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-json-stable-stringify": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/fast-json-stable-stringify/-/fast-json-stable-stringify-2.1.0.tgz",
      "integrity": "sha512-lhd/wF+Lk98HZoTCtlVraHtfh5XYijIjalXck7saUtuanSDyLMxnHhSXEDJqHxD7msR8D0uCmqlkwjCV8xvwHw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-levenshtein": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/fast-levenshtein/-/fast-levenshtein-2.0.6.tgz",
      "integrity": "sha512-DCXu6Ifhqcks7TZKY3Hxp3y6qphY5SJZmrWMDrKcERSOXWQdMhU9Ig/PYrzyw/ul9jOIyh0N4M0tbC5hodg8dw==",
      "dev": true
    },
    "node_modules/file-entry-cache": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/file-entry-cache/-/file-entry-cache-8.0.0.tgz",
      "integrity": "sha512-XXTUwCvisa5oacNGRP9SfNtYBNAMi+RPwBFmblZEF7N7swHYQS6/Zfk7SRwx4D5j3CH211YNRco1DEMNVfZCnQ==",
      "dev": true,
      "dependencies": {
        "flat-cache": "^4.0.0"
      },
      "engines": {
        "node": ">=16.0.0"
      }
    },
    "node_modules/find-up": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/find-up/-/find-up-5.0.0.tgz",
      "integrity": "sha512-78/PXT1wlLLDgTzDs7sjq9hzz0vXD+zn+7wypEe4fXQxCmdmqfGsEPQxmiCSQI3ajFV91bVSsvNtrJRiW6nGng==",
      "dev": true,
      "dependencies": {
        "locate-path": "^6.0.0",
        "path-exists": "^4.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/flat-cache": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/flat-cache/-/flat-cache-4.0.1.tgz",
      "integrity": "sha512-f7ccFPK3SXFHpx15UIGyRJ/FJQctuKZ0zVuN3frBo4HnK3cay9VEW0R6yPYFHC0AgqhukPzKjq22t5DmAyqGyw==",
      "dev": true,
      "dependencies": {
        "flatted": "^3.2.9",
        "keyv": "^4.5.4"
      },
      "engines": {
        "node": ">=16"
      }
    },
    "node_modules/flatted": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/flatted/-/flatted-3.3.1.tgz",
      "integrity": "sha512-X8cqMLLie7KsNUDSdzeN8FYK9rEt4Dt67OsG/DNGnYTSDBG4uFAJFBnUeiV+zCVAvwFy56IjM9sH51jVaEhNxw==",
      "dev": true
    },
    "node_modules/glob-parent": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-6.0.2.tgz",
      "integrity": "sha512-XxwI8EOhVQgWp6iDL+3b0r86f4d6AX6zSU55HfB4ydCEuXLXc5FcYeOu+nnGftS4TEju/11rt4KJPTMgbfmv4A==",
      "dev": true,
      "dependencies": {
        "is-glob": "^4.0.3"
      },
      "engines": {
        "node": ">=10.13.0"
      }
    },
    "node_modules/globals": {
      "version": "14.0.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-14.0.0.tgz",
      "integrity": "sha512-oahGvuMGQlPw/ivIYBjVSrWAfWLBeku5tpPE2fOPLi+WHffIWbuh2tCjhyQhTBPMf5E9jDEH4FOmTYgYwbKwtQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/ignore": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-5.3.2.tgz",
      "integrity": "sha512-hsBTNUqQTDwkWtcdYI2i06Y/nUBEsNEDJKjWdigLvegy8kDuJAS8uRlpkkcQpyEXL0Z/pjDy5HBmMjRCJ2gq+g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/import-fresh": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/import-fresh/-/import-fresh-3.3.1.tgz",
      "integrity": "sha512-TR3KfrTZTYLPB6jUjfx6MF9WcWrHL9su5TObK4ZkYgBdWKPOFoSoQIdEuTuR82pmtxH2spWG9h6etwfr1pLBqQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "parent-module": "^1.0.0",
        "resolve-from": "^4.0.0"
      },
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/imurmurhash": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/imurmurhash/-/imurmurhash-0.1.4.tgz",
      "integrity": "sha512-JmXMZ6wuvDmLiHEml9ykzqO6lwFbof0GG4IkcGaENdCRDDmMVnny7s5HsIgHCbaq0w2MyPhDqkhTUgS2LU2PHA==",
      "dev": true,
      "engines": {
        "node": ">=0.8.19"
      }
    },
    "node_modules/is-extglob": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/is-extglob/-/is-extglob-2.1.1.tgz",
      "integrity": "sha512-SbKbANkN603Vi4jEZv49LeVJMn4yGwsbzZworEoyEiutsN3nJYdbO36zfhGJ6QEDpOZIFkDtnq5JRxmvl3jsoQ==",
      "dev": true,
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-glob": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/is-glob/-/is-glob-4.0.3.tgz",
      "integrity": "sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==",
      "dev": true,
      "dependencies": {
        "is-extglob": "^2.1.1"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/isexe": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/isexe/-/isexe-2.0.0.tgz",
      "integrity": "sha512-RHxMLp9lnKHGHRng9QFhRCMbYAcVpn69smSGcq3f36xjgVVWThj4qqLbTLlq7Ssj8B+fIQ1EuCEGI2lKsyQeIw==",
      "dev": true
    },
    "node_modules/jiti": {
      "version": "1.21.6",
      "resolved": "https://registry.npmjs.org/jiti/-/jiti-1.21.6.tgz",
      "integrity": "sha512-2yTgeWTWzMWkHu6Jp9NKgePDaYHbntiwvYuuJLbbN9vl7DC9DvXKOB2BC3ZZ92D3cvV/aflH0osDfwpHepQ53w==",
      "dev": true,
      "optional": true,
      "peer": true,
      "bin": {
        "jiti": "bin/jiti.js"
      }
    },
    "node_modules/js-yaml": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.0.tgz",
      "integrity": "sha512-wpxZs9NoxZaJESJGIZTyDEaYpl0FKSA+FB9aJiyemKhMwkxQg63h4T1KJgUGHpTqPDNRcmmYLugrRjJlBtWvRA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "argparse": "^2.0.1"
      },
      "bin": {
        "js-yaml": "bin/js-yaml.js"
      }
    },
    "node_modules/json-buffer": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
      "integrity": "sha512-4bV5BfR2mqfQTJm+V5tPPdf+ZpuhiIvTuAB5g8kcrXOZpTT/QwwVRWBywX1ozr6lEuPdbHxwaJlm9G6mI2sfSQ==",
      "dev": true
    },
    "node_modules/json-schema-traverse": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/json-schema-traverse/-/json-schema-traverse-0.4.1.tgz",
      "integrity": "sha512-xbbCH5dCYU5T8LcEhhuh7HJ88HXuW3qsI3Y0zOZFKfZEHcpWiHU/Jxzk629Brsab/mMiHQti9wMP+845RPe3Vg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-stable-stringify-without-jsonify": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/json-stable-stringify-without-jsonify/-/json-stable-stringify-without-jsonify-1.0.1.tgz",
      "integrity": "sha512-Bdboy+l7tA3OGW6FjyFHWkP5LuByj1Tk33Ljyq0axyzdk9//JSi2u3fP1QSmd1KNwq6VOKYGlAu87CisVir6Pw==",
      "dev": true
    },
    "node_modules/keyv": {
      "version": "4.5.4",
      "resolved": "https://registry.npmjs.org/keyv/-/keyv-4.5.4.tgz",
      "integrity": "sha512-oxVHkHR/EJf2CNXnWxRLW6mg7JyCCUcG0DtEGmL2ctUo1PNTin1PUil+r/+4r5MpVgC/fn1kjsx7mjSujKqIpw==",
      "dev": true,
      "dependencies": {
        "json-buffer": "3.0.1"
      }
    },
    "node_modules/levn": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/levn/-/levn-0.4.1.tgz",
      "integrity": "sha512-+bT2uH4E5LGE7h/n3evcS/sQlJXCpIp6ym8OWJ5eV6+67Dsql/LaaT7qJBAt2rzfoa/5QBGBhxDix1dMt2kQKQ==",
      "dev": true,
      "dependencies": {
        "prelude-ls": "^1.2.1",
        "type-check": "~0.4.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/locate-path": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/locate-path/-/locate-path-6.0.0.tgz",
      "integrity": "sha512-iPZK6eYjbxRu3uB4/WZ3EsEIMJFMqAoopl3R+zuq0UjcAm/MO6KCweDgPfP3elTztoKP3KtnVHxTn2NHBSDVUw==",
      "dev": true,
      "dependencies": {
        "p-locate": "^5.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/lodash.merge": {
      "version": "4.6.2",
      "resolved": "https://registry.npmjs.org/lodash.merge/-/lodash.merge-4.6.2.tgz",
      "integrity": "sha512-0KpjqXRVvrYyCsX1swR/XTK0va6VQkQM6MNo7PqW77ByjAhoARA8EfrP1N4+KlKj8YS0ZUCtRT/YUuhyYDujIQ==",
      "dev": true
    },
    "node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/natural-compare": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/natural-compare/-/natural-compare-1.4.0.tgz",
      "integrity": "sha512-OWND8ei3VtNC9h7V60qff3SVobHr996CTwgxubgyQYEpg290h9J0buyECNNJexkFm5sOajh5G116RYA1c8ZMSw==",
      "dev": true
    },
    "node_modules/optionator": {
      "version": "0.9.4",
      "resolved": "https://registry.npmjs.org/optionator/-/optionator-0.9.4.tgz",
      "integrity": "sha512-6IpQ7mKUxRcZNLIObR0hz7lxsapSSIYNZJwXPGeF0mTVqGKFIXj1DQcMoT22S3ROcLyY/rz0PWaWZ9ayWmad9g==",
      "dev": true,
      "dependencies": {
        "deep-is": "^0.1.3",
        "fast-levenshtein": "^2.0.6",
        "levn": "^0.4.1",
        "prelude-ls": "^1.2.1",
        "type-check": "^0.4.0",
        "word-wrap": "^1.2.5"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/p-limit": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-3.1.0.tgz",
      "integrity": "sha512-TYOanM3wGwNGsZN2cVTYPArw454xnXj5qmWF1bEoAc4+cU/ol7GVh7odevjp1FNHduHc3KZMcFduxU5Xc6uJRQ==",
      "dev": true,
      "dependencies": {
        "yocto-queue": "^0.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/p-locate": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/p-locate/-/p-locate-5.0.0.tgz",
      "integrity": "sha512-LaNjtRWUBY++zB5nE/NwcaoMylSPk+S+ZHNB1TzdbMJMny6dynpAGt7X/tl/QYq3TIeE6nxHppbo2LGymrG5Pw==",
      "dev": true,
      "dependencies": {
        "p-limit": "^3.0.2"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/parent-module": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/parent-module/-/parent-module-1.0.1.tgz",
      "integrity": "sha512-GQ2EWRpQV8/o+Aw8YqtfZZPfNRWZYkbidE9k5rpl/hC3vtHHBfGm2Ifi6qWV+coDGkrUKZAxE3Lot5kcsRlh+g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "callsites": "^3.0.0"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/path-exists": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-exists/-/path-exists-4.0.0.tgz",
      "integrity": "sha512-ak9Qy5Q7jYb2Wwcey5Fpvg2KoAc/ZIhLSLOSBmRmygPsGwkVVt0fZa0qrtMz+m6tJTAHfZQ8FnmB4MG4LWy7/w==",
      "dev": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-key": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/path-key/-/path-key-3.1.1.tgz",
      "integrity": "sha512-ojmeN0qd+y0jszEtoY48r0Peq5dwMEkIlCOu6Q5f41lfkswXuKtYrhgoTpLnyIcHm24Uhqx+5Tqm2InSwLhE6Q==",
      "dev": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/prelude-ls": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/prelude-ls/-/prelude-ls-1.2.1.tgz",
      "integrity": "sha512-vkcDPrRZo1QZLbn5RLGPpg/WmIQ65qoWWhcGKf/b5eplkkarX0m9z8ppCat4mlOqUsWpyNuYgO3VRyrYHSzX5g==",
      "dev": true,
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/punycode": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.3.1.tgz",
      "integrity": "sha512-vYt7UD1U9Wg6138shLtLOvdAu+8DsC/ilFtEVHcH+wydcSpNE20AfSOduf6MkRFahL5FY7X1oU7nKVZFtfq8Fg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/resolve-from": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-4.0.0.tgz",
      "integrity": "sha512-pb/MYmXstAkysRFx8piNI1tGFNQIFA3vkE3Gq4EuA1dF6gHp/+vgZqsCGJapvy8N3Q+4o7FwvquPJcnZ7RYy4g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/shebang-command": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/shebang-command/-/shebang-command-2.0.0.tgz",
      "integrity": "sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==",
      "dev": true,
      "dependencies": {
        "shebang-regex": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/shebang-regex": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/shebang-regex/-/shebang-regex-3.0.0.tgz",
      "integrity": "sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==",
      "dev": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-json-comments": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/strip-json-comments/-/strip-json-comments-3.1.1.tgz",
      "integrity": "sha512-6fPc+R4ihwqP6N/aIv2f1gMH8lOVtWQHoqC4yK6oSDVVocumAsfCqjkXnqiYMhmMwS/mEHLp7Vehlt3ql6lEig==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/tailwindcss": {
      "version": "4.0.14",
      "resolved": "https://registry.npmjs.org/tailwindcss/-/tailwindcss-4.0.14.tgz",
      "integrity": "sha512-92YT2dpt671tFiHH/e1ok9D987N9fHD5VWoly1CdPD/Cd1HMglvZwP3nx2yTj2lbXDAHt8QssZkxTLCCTNL+xw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/type-check": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/type-check/-/type-check-0.4.0.tgz",
      "integrity": "sha512-XleUoc9uwGXqjWwXaUTZAmzMcFZ5858QA2vvx1Ur5xIcixXIP+8LnFDgRplU30us6teqdlskFfu+ae4K79Ooew==",
      "dev": true,
      "dependencies": {
        "prelude-ls": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/uri-js": {
      "version": "4.4.1",
      "resolved": "https://registry.npmjs.org/uri-js/-/uri-js-4.4.1.tgz",
      "integrity": "sha512-7rKUyy33Q1yc98pQ1DAmLtwX109F7TIfWlW1Ydo8Wl1ii1SeHieeh0HHfPeL2fMXK6z0s8ecKs9frCuLJvndBg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "punycode": "^2.1.0"
      }
    },
    "node_modules/which": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/which/-/which-2.0.2.tgz",
      "integrity": "sha512-BLI3Tl1TW3Pvl70l3yq3Y64i+awpwXqsGBYWkkqMtnbXgrMD+yj7rhW0kuEDxzJaYXGjEW5ogapKNMEKNMjibA==",
      "dev": true,
      "dependencies": {
        "isexe": "^2.0.0"
      },
      "bin": {
        "node-which": "bin/node-which"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/word-wrap": {
      "version": "1.2.5",
      "resolved": "https://registry.npmjs.org/word-wrap/-/word-wrap-1.2.5.tgz",
      "integrity": "sha512-BN22B5eaMMI9UMtjrGd5g5eCYPpCPDUy0FJXbYsaT5zYxjFOckS53SQDE3pWkVoWpHXVb3BrYcEN4Twa55B5cA==",
      "dev": true,
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/yocto-queue": {
      "version": "0.1.0",
      "resolved": "https://registry.npmjs.org/yocto-queue/-/yocto-queue-0.1.0.tgz",
      "integrity": "sha512-rVksvsnNCdJ/ohGc6xgPwyN8eheCxsiLM8mxuE/t/mOVqJewPuO1miLpTHQiRgTKCLexL4MeAFVagts7HmNZ2Q==",
      "dev": true,
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    }
  }
}
```

---

## File: ./todo.md

```

to make a purchase possible i need to send the following info to the server:
- product id
- qty

example: [{ id: 1, qty: 1}, { id: 2, qty: 1}]


for the cart to function as normally id need:
- product name
- product url
- product id
- product qty

example: { 
    productName: "product name",
    productURL: "/product-url",
    productId: 1,
    productPrice: 10,
    productQty: 1,
}


but i need this to play nice with bundles

so cart data ought to look more like this

example: {
    productName: "product name",
    productURL: "/product-url",
    meta: [
        {
            productId: 1,
            productPrice: 10,
            productQty: 1
        },
        {
            productId: 2,
            productPrice: 20,
            productQty: 2
        }
    ]
}

which means data sent to checkout endpoint will look like this if someone buys one product and one bundle

example: [
    [{id: 1, qty: 1}],
    [
        {id: 1, qty: 1},
        {id: 2, qty: 2}
    ]

]


```

---

